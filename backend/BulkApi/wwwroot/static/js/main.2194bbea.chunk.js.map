{"version":3,"sources":["images/e_commerce.png","store/actionEnums.ts","store/actions/errorAction.ts","services/UtilService.ts","store/thunks/discountSchemeThunk.ts","components/discountSchemePage/CardComponent.tsx","components/shared/ErrorNotification.tsx","containers/DiscountSchemesPage.tsx","store/thunks/bidThunk.ts","components/shared/DataTable.tsx","components/shared/SnackbarComponent.tsx","components/cartPage/OrderCheckoutComponent.tsx","components/shared/CartButtons.tsx","components/shared/SelectComponents.tsx","components/shared/TextComponent.tsx","containers/OrdersPage.tsx","models/DiscountScheme.ts","models/SelectListItem.ts","models/Product.ts","components/shared/DialogComponent.tsx","services/DiscountSchemeService.ts","containers/ProducerDiscountSchemePage.tsx","store/thunks/productThunk.ts","containers/ProductsPage.tsx","services/DataTableService.tsx","containers/CartPage.tsx","components/shared/TextFieldComponents.tsx","containers/DiscountSchemeForm.tsx","containers/ProductForm.tsx","components/shared/DatePickerComponent.tsx","models/IdentityUser.ts","models/AuthVM.ts","containers/LoginForm.tsx","store/thunks/authThunk.ts","containers/ErrorPage.tsx","components/app/PrivateRoute.tsx","enums/Claims.tsx","components/app/NavBar.tsx","models/Bid.ts","containers/DiscountSchemeDetail/DiscountSchemeDetailPage.tsx","containers/DiscountSchemeDetail/DiscountSchemeDetailHOC.tsx","App.tsx","serviceWorker.ts","store/reducers/discountSchemeReducer.ts","store/reducers/bidReducer.ts","store/reducers/productReducer.ts","store/reducers/errorReducer.ts","store/reducers/authReducer.ts","store/rootReducer.ts","index.tsx"],"names":["module","exports","ACTIONS","errorAction","type","error","UtilService","authVMString","localStorage","getItem","jwt","JSON","parse","header","Headers","append","getDiscountSchemesWithBidOfProducer","producerId","dispatch","a","GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST","message","fetch","getApiUrl","headers","getAuthHeader","response","ok","json","discountSchemes","GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED","httpMessage","HTTP_READ_SUCCESS","ERROR","CardComponent","title","paras","actionTitle","action","classes","useStyles","Card","className","cardWidth","CardActionArea","onClick","CardMedia","component","height","cardHeight","image","CardContent","Typography","gutterBottom","variant","CardActions","Button","size","color","makeStyles","theme","createStyles","backdrop","zIndex","drawer","maxWidth","ErrorNotification","autoHideDuration","useDispatch","useState","openAlert","setOpenAlert","handleCloseAlert","cleanUpErrorAction","CLEAR_ERROR","useEffect","Snackbar","open","onClose","severity","Alert","props","elevation","DiscountSchemesPage","history","useHistory","useSelector","discountSchemeReducer","errorReducer","document","GET_DISCOUNTSCHEMES_REQUEST","GET_DISCOUNTSCHEMES_RECEIVED","cards","index","ds","dateString","expiryDate","Date","toString","toDateString","product","name","currentBids","bids","filter","bid","isInCart","reduce","accum","quantity","textDict","discountedPrice","minOrderQnty","Object","entries","key","value","para","align","originalPrice","push","card","Grid","item","xs","sm","lg","discountSchemeId","length","fullWidth","container","spacing","typo","fontVariant","width","margin","paddingLeft","paddingRight","updateBidInCartAsync","UPDATE_BID_IN_CART_REQUEST","messages","method","body","stringify","updatedBid","UPDATE_BID_IN_CART_RECEIVED","statusText","HTTP_UPDATE_SUCCESS","DataTable","data","columnNames","accessors","handleChecked","idColumnAccessorName","pageSize","actionIcon","enablePaging","enableSearch","actionMessage","enableSelection","detailPanelFieldName","enabledDetailPanel","headerDicts","i","accessor","headerDict","icons","tableIcons","columns","options","selection","search","paging","rowStyle","detailPanel","rowData","disabled","icon","display","displayNone","render","detailPanelFielddName","returnDetailTable","Add","forwardRef","ref","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","AddShoppingCartIcon","SnackbarComponent","setOpen","cleanUp","handleClose","reason","OrderCheckoutComponent","rowIds","handleOrder","selectedBids","includes","bidId","totalDeliveryCharge","map","numBidsAtAddress","addressBidCountDict","collectionAddress","deliveryCharge","discountScheme","charge","totalPrice","totalQuantity","Paper","paragraph","alignContent","CartButtons","setQuantity","ButtonGroup","aria-label","alignLeft","flexDirection","alignItems","alignCenter","alignRight","SelectControlledComponent","state","selectListItems","handleChange","isError","formHelperText","FormControl","formControl","InputLabel","id","Select","labelId","autoWidth","onChange","event","MenuItem","undefined","divider","selectListItem","text","FormHelperText","minWidth","selectEmpty","marginTop","TextComponent","Container","Row","remainingBidsRequired","bidExpiryDate","bidStatus","OrdersPage","bidReducer","customerId","GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST","GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED","getPendingOrSuccessfulBids","keys","rows","DataTableService","createRowFromBid_OrdersPage","DiscountScheme","productId","SelectListItem","selected","this","Product","category","description","DialogComponent","toggleOpen","content","showPicture","secondaryActionTitle","secondaryAction","Dialog","aria-labelledby","DialogTitle","DialogContent","imageUrl","DialogActions","DiscountSchemeService","isSchemeSuccess","some","bidSuccessDate","hasBidExpired","delete","ProducerDiscountSchemePage","immutableDiscountSchemes","products","uniqBy","setDiscountSchemes","status","setStatus","productName","setProductName","discountSchemesCopy","cloneDeep","determineStatusOfScheme","toLowerCase","openProductDialog","setOpenProductDialog","setProduct","productTextDict","productTextComponent","openDeleteDialog","setOpenDeleteDialog","targetDiscountScheme","setTargetDiscountScheme","httpResponseMessage","HTTP_DELETE_SUCCESS","row","createRowFromScheme_ProducerDiscountSchemePage","find","selectedStatus","target","Autocomplete","getOptionLabel","option","style","onInputChange","renderInput","params","TextField","label","deleteAction","DELETE_DISCOUNTSCHEME_REQUEST","deletedDiscountScheme","DELETE_DISCOUNTSCHEME_RECEIVED","getProductsAsync","GET_PRODUCTS_REQUEST","GET_PRODUCTS_RECEIVED","update","ProductsPage","productReducer","targetProduct","setTargetProduct","createRowFromProduct_ProductsPage","DELETE_PRODUCT_REQUEST","deletedProduct","DELETE_PRODUCT_RECEIVED","handleChangeQuantity","toggleCheckedRowId","deleteBid","handleChangeAddress","RowCart","avgDeliveryCharge","slice","borderBottom","fontSize","updateCartComponent","checkbox","Checkbox","deleteButton","address","descriptionDict","quantityDict","currentTotalBids","deliveryDict","RowOrder","updateProduct","onDeleteClick","RowProduct","isDisableDelete","tooltipMessage","onNameClick","SchemeRow","CartPage","notificationMessage","setNotificationMessage","handleNotification","isOpen","bidsInCart","setBids","useDeepCompareEffect","GET_BIDSOFCUSTOMER_INCART_REQUEST","GET_BIDSOFCUSTOMER_INCART_RECEIVED","getBidsOfCustomerInCartAsync","selectedRowBidIds","setSelectedRowBidIds","apiMessage","HTTP_UPDATE_ORDER_SUCCESS","handleUpdateCart","newQuantity","bidsCopy","bidCopy","updateAction","createRowFromBid_CartPage","newSelectedRowIds","DELETE_BID_IN_CART_REQUEST","DELETE_BID_IN_CART_RECEIVED","deleteBidFromCartAsync","newBids","selectedAddress","ORDER_BIDS_IN_CART_REQUEST","ORDER_BIDS_IN_CART_RECEIVED","orderBidsFromCart","TextFieldUncontrolledComponent","defaultValue","isFullWidth","adornment","control","errors","errorMessage","rules","helperText","InputProps","startAdornment","InputAdornment","position","FORM_NAMES","DatePickerUncontrolledComponent","DatePickerControlledComponent","MuiPickersUtilsProvider","utils","DateFnsUtils","disableToolbar","format","guid","onBlur","onFocus","DiscountSchemeForm","useForm","handleSubmit","getValues","watchProductId","watch","selectedProduct","HTTP_CREATE_SUCCESS","onSubmit","CREATE_DISCOUNTSCHEME_REQUEST","createdDiscountScheme","CREATE_DISCOUNTSCHEME_RECEIVED","createDiscountSchemeAsync","createDiscountScheme","justify","textAlign","bottom","EmptyGridRow","required","min","ProductForm","routeParams","useParams","parseInt","mode","productToUpdate","GET_PRODUCT_REQUEST","GET_PRODUCT_RECEIVED","getProductAsync","reset","setValue","openSnackbar","setOpenSnackbar","initializeProduct","createdProduct","createProductsAsync","UPDATE_PRODUCT_REQUEST","updatedProduct","updateProductAsync","GridRow","Claims","IdentityUser","userName","passwordHash","AuthVM","isAuthenticated","email","claims","LoginForm","openSnackBar","setOpenSnackBar","defaultAuthVM","authVM","authReducer","identityUser","LOGIN_REQUEST","console","log","LOGIN_FAILED","LOGIN_SUCCESS","loginAsync","ErrorPage","PrivateRoute","path","requiredClaims","isAuthorized","every","requiredClaim","linkToLoginForm","to","CLAIMS","NavBar","logoutMessage","LOGOUT_SUCCESS","Navbar","expand","blueBg","Brand","navLink","Toggle","aria-controls","Collapse","Nav","CONSUMER","PRODUCER","DropdownButton","NavDropdown","Item","Link","as","NavLink","LOGOUT","logoutSync","textDecoration","backgroundColor","dropDownLink","Bid","DiscountSchemeDetailPage","MODE","bidIdToUpdate","GET_DISCOUNTSCHEME_REQUEST","GET_DISCOUNTSCHEME_RECEIVED","getDiscountSchemeAsync","setAddress","leftExpiryDateDict","rightDescriptionDict","leftPriceDict","rightPriceDict","leftQuantityDict","rightQuantityDict","addressTextDict","avgDeliveryChargeDict","e_commerce","ADD_BID_TO_CART_REQUEST","createdBid","ADD_BID_TO_CART_RECEIVED","addBidToCartAsync","DiscountSchemeDetailHOC","App","exact","Boolean","window","location","hostname","match","initialState","rootReducer","combineReducers","prevState","newState","CREATE_PRODUCT_REQUEST","CREATE_PRODUCT_RECEIVED","UPDATE_PRODUCT_RECEIVED","setItem","removeItem","store","createStore","applyMiddleware","thunk","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.2194bbea.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/e_commerce.3acf207a.png\";","export enum ACTIONS { \r\n    GET_DISCOUNTSCHEMES_REQUEST = \"GET_DISCOUNTSCHEMES_REQUEST\",\r\n    GET_DISCOUNTSCHEMES_RECEIVED = \"GET_DISCOUNTSCHEMES_RECEIVED\",\r\n\r\n    GET_DISCOUNTSCHEME_REQUEST = \"GET_DISCOUNTSCHEME_REQUEST\",\r\n    GET_DISCOUNTSCHEME_RECEIVED = \"GET_DISCOUNTSCHEME_RECEIVED\",\r\n\r\n    GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST = \"GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST\",\r\n    GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED = \"GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED\",\r\n\r\n    CREATE_DISCOUNTSCHEME_REQUEST = \"CREATE_DISCOUNTSCHEME_REQUEST\",\r\n    CREATE_DISCOUNTSCHEME_RECEIVED = \"CREATE_DISCOUNTSCHEME_RECEIVED\",\r\n\r\n    DELETE_DISCOUNTSCHEME_REQUEST = \"DELETE_DISCOUNTSCHEME_REQUEST\",\r\n    DELETE_DISCOUNTSCHEME_RECEIVED = \"DELETE_DISCOUNTSCHEME_RECEIVED\",\r\n\r\n    GET_BIDSOFCUSTOMER_INCART_REQUEST = \"GET_BIDSOFCUSTOMER_INCART_REQUEST\",\r\n    GET_BIDSOFCUSTOMER_INCART_RECEIVED = \"GET_BIDSOFCUSTOMER_INCART_RECEIVED\",\r\n\r\n    ADD_BID_TO_CART_REQUEST = \"ADD_BID_TO_CART_REQUEST\",\r\n    ADD_BID_TO_CART_RECEIVED = \"ADD_BID_TO_CART_RECEIVED\",\r\n\r\n    UPDATE_BID_IN_CART_REQUEST = \"UPDATE_BID_IN_CART_REQUEST\",\r\n    UPDATE_BID_IN_CART_RECEIVED = \"UPDATE_BID_IN_CART_RECEIVED\",\r\n\r\n    DELETE_BID_IN_CART_REQUEST = \"DELETE_BID_IN_CART_REQUEST\",\r\n    DELETE_BID_IN_CART_RECEIVED = \"DELETE_BID_IN_CART_RECEIVED\",\r\n\r\n    ERROR = \"ERROR\",\r\n    CLEAR_ERROR = \"CLEAR_ERROR\",\r\n\r\n    ORDER_BIDS_IN_CART_REQUEST = \"ORDER_BIDS_IN_CART_REQUEST\",\r\n    ORDER_BIDS_IN_CART_RECEIVED = \"ORDER_BIDS_IN_CART_RECEIVED\",\r\n\r\n    GET_PRODUCTS_REQUEST = \"GET_PRODUCTS_REQUEST\",\r\n    GET_PRODUCTS_RECEIVED = \"GET_PRODUCTS_RECEIVED\",\r\n\r\n    GET_PRODUCT_REQUEST = \"GET_PRODUCT_REQUEST\",\r\n    GET_PRODUCT_RECEIVED = \"GET_PRODUCT_RECEIVED\",\r\n\r\n\r\n    GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST = \"GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST\",\r\n    GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED = \"GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED\",\r\n\r\n    CREATE_PRODUCT_REQUEST = \"CREATE_PRODUCT_REQUEST\",\r\n    CREATE_PRODUCT_RECEIVED = \"CREATE_PRODUCT_RECEIVED\",\r\n\r\n    DELETE_PRODUCT_REQUEST = \"DELETE_PRODUCT_REQUEST\",\r\n    DELETE_PRODUCT_RECEIVED = \"DELETE_PRODUCT_RECEIVED\",\r\n\r\n    UPDATE_PRODUCT_REQUEST = \"UPDATE_PRODUCT_REQUEST\",\r\n    UPDATE_PRODUCT_RECEIVED = \"UPDATE_PRODUCT_RECEIVED\",\r\n\r\n    LOGIN_REQUEST = \"LOGIN_REQUEST\",\r\n    LOGIN_SUCCESS = \"LOGIN_SUCCESS\",\r\n    LOGIN_FAILED = \"LOGIN_FAILED\",\r\n\r\n    LOGOUT = \"LOGOUT\",\r\n    LOGOUT_SUCCESS = \"LOGOUT_SUCCESS\",\r\n\r\n    HTTP_UPDATE_SUCCESS = \"HTTP_UPDATE_SUCCESS\",\r\n    HTTP_READ_SUCCESS = \"HTTP_READ_SUCCESS\",\r\n    HTTP_CREATE_SUCCESS = \"HTTP_CREATE_SUCCESS\",\r\n    HTTP_DELETE_SUCCESS = \"HTTP_DELETE_SUCCESS\",\r\n\r\n    HTTP_UPDATE_ORDER_SUCCESS = \"HTTP_UPDATE_ORDER_SUCCESS\"\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { Action } from \"redux\";\r\nimport { ApiError } from \"../../models/ApiError\";\r\nimport { ErrorCollection } from \"../../models/ErrorCollection\";\r\nimport { ACTIONS } from \"../actionEnums\";\r\n\r\nexport interface IErrorAction extends Action {\r\n    type: string;\r\n    error: ApiError | Error | ErrorCollection | null;\r\n}\r\n \r\nexport function errorAction(type: string, error: ApiError | Error | ErrorCollection): IErrorAction {\r\n    return {\r\n        type: type,\r\n        error: error,\r\n    }\r\n}\r\n\r\nexport function cleanErrors(): IErrorAction {\r\n    return {\r\n        type: ACTIONS.CLEAR_ERROR,\r\n        error: null\r\n    }\r\n}","import { AuthVM } from \"../models/AuthVM\";\r\n\r\nexport class UtilService {\r\n\r\n    static getAuthHeader(): Headers | undefined {\r\n\r\n        const authVMString: string = localStorage.getItem(\"authVM\") as string;\r\n\r\n        if (!authVMString) {\r\n            return;\r\n        }\r\n\r\n        const authVM: AuthVM = JSON.parse(authVMString);\r\n        let jwt: string = authVM.jwt;\r\n        let header = new Headers();\r\n        header.append(\"Authorization\", `Bearer ${jwt}`);\r\n        header.append(\"Content-Type\", \"application/json\");\r\n        \r\n        return header; \r\n    }\r\n\r\n    static getJWT(): string {\r\n        if (!localStorage.getItem(\"authVM\") ) {\r\n           return \"\";\r\n        }\r\n        const authVM: AuthVM = JSON.parse(localStorage.getItem(\"authVM\") as string);\r\n        let jwt: string = authVM.jwt;\r\n        return `Bearer ${jwt}`;\r\n    }\r\n\r\n    static getApiUrl(): string {\r\n        //const localhost: string = \"https://localhost:44397/api/\";   \r\n        //const docker: string = \"http://localhost:44397/api/\"; // http and not https\r\n        //const azure: string = \"https://bulkapi20201108130318.azurewebsites.net/api/\";\r\n        const azure2: string = \"https://bulk-aspnet.azurewebsites.net/api/\";\r\n\r\n        return azure2;\r\n    }\r\n}","import { ACTIONS } from \"../actionEnums\";\r\nimport { ThunkDispatch, ThunkAction } from 'redux-thunk';\r\nimport { DiscountScheme } from \"../../models/DiscountScheme\";\r\nimport { Action } from \"redux\";\r\nimport { IErrorAction, errorAction } from \"../actions/errorAction\";\r\nimport { ApiError } from \"../../models/ApiError\";\r\nimport { UtilService } from \"../../services/UtilService\";\r\n\r\nexport interface IDiscountSchemeAction extends Action {\r\n    type: string;\r\n    discountSchemes?: DiscountScheme[] | null;\r\n    discountScheme?: DiscountScheme | null;\r\n    message?: string;\r\n    httpMessage?: string;\r\n}\r\n\r\n\r\nexport function getAllDiscountSchemesWithBidsAsync(): ThunkAction<Promise<void>, {}, {}, IDiscountSchemeAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IDiscountSchemeAction | IErrorAction> ) => {\r\n        dispatch({ type: ACTIONS.GET_DISCOUNTSCHEMES_REQUEST, message: \"GET DiscountSchemes...\"});\r\n        try {            \r\n            \r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"discountSchemes\", {\r\n                headers: UtilService.getAuthHeader()\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n\r\n            const discountSchemes: DiscountScheme[] = await response.json();\r\n            dispatch({ type: ACTIONS.GET_DISCOUNTSCHEMES_RECEIVED, discountSchemes: discountSchemes, httpMessage: ACTIONS.HTTP_READ_SUCCESS });\r\n        } catch (error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n        \r\n    }\r\n}\r\n\r\nexport function getDiscountSchemeAsync(discountSchemeId: number): ThunkAction<Promise<void>, {}, {}, IDiscountSchemeAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IDiscountSchemeAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.GET_DISCOUNTSCHEME_REQUEST, message: \"GET DiscountScheme with id: \" + discountSchemeId});\r\n        try {            \r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"discountSchemes/\" + discountSchemeId, {\r\n                headers: UtilService.getAuthHeader()\r\n            });\r\n            \r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            const discountScheme: DiscountScheme = await response.json();\r\n            dispatch({ type: ACTIONS.GET_DISCOUNTSCHEME_RECEIVED, discountScheme: discountScheme, httpMessage: ACTIONS.HTTP_READ_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n        \r\n    }\r\n}\r\n\r\nexport function getDiscountSchemesWithBidOfProducer(producerId: number): ThunkAction<Promise<void>, {}, {}, IDiscountSchemeAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IDiscountSchemeAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST, message: \"GET DiscountScheme of producer id: \" + producerId });\r\n        try {\r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"discountSchemes/producer/\" + producerId, {\r\n                headers: UtilService.getAuthHeader()\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            const discountSchemes: DiscountScheme[] = await response.json();\r\n            dispatch({ type: ACTIONS.GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED, discountSchemes: discountSchemes, httpMessage: ACTIONS.HTTP_READ_SUCCESS });\r\n\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n    }\r\n}\r\n\r\nexport function createDiscountSchemeAsync(discountScheme: DiscountScheme): ThunkAction<Promise<void>, {}, {}, IDiscountSchemeAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IDiscountSchemeAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.CREATE_DISCOUNTSCHEME_REQUEST, message: \"Creating Discount Scheme\" });\r\n        try {\r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"discountSchemes\", {\r\n                method: \"POST\",\r\n                headers: UtilService.getAuthHeader(),\r\n                body: JSON.stringify(discountScheme)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            const createdDiscountScheme: DiscountScheme = await response.json();\r\n            dispatch({ type: ACTIONS.CREATE_DISCOUNTSCHEME_RECEIVED, discountScheme: createdDiscountScheme, httpMessage: ACTIONS.HTTP_CREATE_SUCCESS });\r\n\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n    }\r\n}\r\n\r\nexport function deleteDiscountSchemeAsync(discountSchemeId: number): ThunkAction<Promise<void>, {}, {}, IDiscountSchemeAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IDiscountSchemeAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.DELETE_DISCOUNTSCHEME_REQUEST, message: \"Deleting Discount Scheme\" });\r\n        try {\r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"discountSchemes/\" + discountSchemeId, {\r\n                method: \"DELETE\",\r\n                headers: UtilService.getAuthHeader()\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            const deletedDiscountScheme: DiscountScheme = await response.json();\r\n            dispatch({ type: ACTIONS.DELETE_DISCOUNTSCHEME_RECEIVED, discountScheme: deletedDiscountScheme, httpMessage: ACTIONS.HTTP_DELETE_SUCCESS });\r\n\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport { CardContent, Button, CardActions } from \"@material-ui/core\";\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\n\r\ninterface IProp {\r\n    title: string,\r\n    paras: JSX.Element[] | JSX.Element, // e.g. [<p></p>, <p><p>]\r\n    actionTitle?: string,\r\n    action?: (val: any) => any;\r\n}\r\n\r\nexport function CardComponent({title, paras, actionTitle, action}: IProp) {\r\n    const classes = useStyles(); \r\n\r\n    return (\r\n        <div>\r\n            <Card className={classes.cardWidth}>\r\n                <CardActionArea onClick={action}>\r\n                    <CardMedia \r\n                        component=\"img\"\r\n                        height=\"140\"\r\n                        className={classes.cardHeight}\r\n                        image=\"e_commerce.png\"\r\n                        title=\"https://acowebs.com/impact-ecommerce-society/\"/>\r\n                </CardActionArea>\r\n                <CardContent>\r\n                    <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                        {title}\r\n                    </Typography>\r\n                    {paras}\r\n                </CardContent>\r\n                { action != null &&\r\n                    <CardActions>                \r\n                        <Button size=\"medium\" color=\"primary\" onClick={action}>\r\n                            {actionTitle}\r\n                        </Button>\r\n                    </CardActions>  \r\n                }\r\n                  \r\n            </Card>\r\n            \r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    backdrop: {\r\n      zIndex: theme.zIndex.drawer + 1,\r\n      color: \"#fff\"\r\n    },\r\n    cardWidth: {\r\n        maxWidth: 450,\r\n    },\r\n    cardHeight: {\r\n        height: 140,\r\n    },\r\n  })\r\n);","import React, { useEffect, useState } from \"react\";\r\nimport { Snackbar } from \"@material-ui/core\";\r\nimport MuiAlert, { AlertProps } from '@material-ui/lab/Alert';\r\nimport { ApiError } from \"../../models/ApiError\";\r\nimport { errorAction } from \"../../store/actions/errorAction\";\r\nimport { ACTIONS } from \"../../store/actionEnums\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Dispatch } from \"redux\";\r\nimport { ErrorCollection } from \"../../models/ErrorCollection\";\r\n\r\ninterface IProp {\r\n    autoHideDuration?: number;\r\n    error: ApiError | Error | ErrorCollection | null,\r\n    message: string\r\n}\r\n\r\n// Stateful component\r\n// Parent component does not need to hold the showAlert in its state\r\nexport function ErrorNotification({error, autoHideDuration=6000, message}: IProp): JSX.Element {\r\n    // API Errors received if any\r\n    // To display error notification\r\n    const dispatch: Dispatch<any> = useDispatch(); \r\n    const [openAlert, setOpenAlert] = useState<boolean>(false); \r\n    const handleCloseAlert = () => {\r\n        setOpenAlert(false);\r\n        const cleanUpErrorAction = errorAction(ACTIONS.CLEAR_ERROR, error as ApiError | Error | ErrorCollection );\r\n        dispatch(cleanUpErrorAction);\r\n    }\r\n\r\n    useEffect(()=> {\r\n        if (error) {\r\n            setOpenAlert(true);\r\n        }\r\n    }, [error]);\r\n    return <Snackbar open={openAlert} autoHideDuration={autoHideDuration} onClose={handleCloseAlert}>\r\n    <Alert severity=\"error\" onClose={handleCloseAlert}>{message}</Alert>\r\n</Snackbar>\r\n}\r\n\r\nfunction Alert(props: AlertProps) {\r\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n  }","import React, { useEffect } from \"react\";\r\nimport { Dispatch } from \"redux\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getAllDiscountSchemesWithBidsAsync } from \"../store/thunks/discountSchemeThunk\";\r\nimport { DiscountScheme } from \"../models/DiscountScheme\"; \r\nimport { RootState } from \"../store/rootReducer\"; \r\nimport Grid from '@material-ui/core/Grid';\r\nimport { CardComponent } from \"../components/discountSchemePage/CardComponent\"; \r\nimport Typography from '@material-ui/core/Typography';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\r\nimport { ApiError } from \"../models/ApiError\";\r\nimport { ErrorNotification } from \"../components/shared/ErrorNotification\";\r\n \r\nexport function DiscountSchemesPage(): JSX.Element {\r\n    const dispatch: Dispatch<any> = useDispatch();  \r\n    const history = useHistory();   \r\n    const classes = useStyles();\r\n\r\n    let discountSchemes: DiscountScheme[] = useSelector((action: RootState) => action.discountSchemeReducer.discountSchemes as DiscountScheme[]) ?? []; \r\n\r\n    const error: ApiError = useSelector((action: RootState) => action.errorReducer.error as ApiError) ?? null;\r\n\r\n    useEffect(() => {\r\n        document.title = \"Products\"\r\n        let action = getAllDiscountSchemesWithBidsAsync();\r\n        dispatch(action)\r\n    }, [dispatch]); \r\n\r\n    let cards: JSX.Element[] = []\r\n    for (let index = 0; index < discountSchemes.length; index ++ ) {\r\n        const ds = discountSchemes[index];\r\n\r\n        let dateString: string = \"\";\r\n        if (ds.expiryDate) {\r\n            let date: Date = new Date(ds.expiryDate.toString());\r\n            dateString = date.toDateString();\r\n        } \r\n\r\n        let title = ds.product?.name ?? \"\";\r\n        let currentBids: number = ds.bids\r\n            .filter(bid => !bid.isInCart)\r\n            .reduce((accum, bid) => accum + bid?.quantity, 0);\r\n\r\n        let textDict = {\r\n            \"Title\": title,\r\n            \"Discounted Price\": \"$\" + ds.discountedPrice,\r\n            \"Remaining Bids Needed\": ds.minOrderQnty - currentBids,\r\n            \"Expiry Date\": dateString\r\n        } \r\n\r\n        let paras: JSX.Element[] = [];\r\n        for (let [key, value] of Object.entries(textDict)) {\r\n            let para: JSX.Element = <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\" align=\"left\" key={key}>\r\n                <b>{key}&nbsp;</b>{value} \r\n            </Typography>\r\n\r\n            if (key === \"Discounted Price\") {\r\n                para = <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\" align=\"left\" key={key}>\r\n                <b>{key}&nbsp;</b> ${ds.discountedPrice} $<del>{ds.product?.originalPrice}</del>\r\n            </Typography>\r\n            }\r\n\r\n            paras.push(para)\r\n        }\r\n                 \r\n        const redirectToDiscountSchemeDetail = () => { history.push(\"/discountScheme/\" + ds.discountSchemeId) };\r\n\r\n        let card: JSX.Element = <Grid item xs={12} sm={4} lg={3} key={index}>\r\n            <CardComponent title={title} paras={paras} actionTitle={\"Add to Cart\"} action={redirectToDiscountSchemeDetail}/>\r\n        </Grid>\r\n        cards.push(card);\r\n    }  \r\n\r\n    return <div>\r\n        {discountSchemes.length > 0 &&\r\n            <Grid className={classes.fullWidth}\r\n                container\r\n                spacing={3}>\r\n                {cards}\r\n            </Grid>     \r\n        }\r\n        <ErrorNotification error={error} message=\"error fetching schemes\" />\r\n    </div>\r\n\r\n} \r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    typo: {\r\n       fontVariant: \"body2\",\r\n       color: \"textSecondary\",\r\n       component: \"p\",\r\n       align: \"left\"\r\n    },\r\n    fullWidth: {\r\n        width: \"100vw\",\r\n        margin: \"auto\",\r\n        paddingLeft: \"100px\",\r\n        paddingRight: \"100px\"\r\n    }\r\n  })\r\n);","import { Action } from \"redux\";\r\nimport { Bid } from \"../../models/Bid\";\r\nimport { ThunkAction, ThunkDispatch } from \"redux-thunk\";\r\nimport { ACTIONS } from \"../actionEnums\";\r\nimport { IErrorAction, errorAction } from \"../actions/errorAction\";\r\nimport { ApiError } from \"../../models/ApiError\";\r\nimport { UtilService } from \"../../services/UtilService\";\r\n\r\n\r\nexport interface IBidAction extends Action {\r\n    type: string;\r\n    bid?: Bid | undefined;\r\n    bids?: Bid[] | undefined;\r\n    message?: string; // All internal messages and for response messages received on GET request\r\n    // Messages for create, read, update and delete\r\n    // need to separate messages and responseMessages\r\n    // some components rely on successfuly update response, before sending another get request to get the latest list\r\n    // if not separate, there will be infinite loop when using useEffect(()=>{}, [messages])\r\n    httpMessage?: string // For API messages\r\n}\r\n\r\nexport function addBidToCartAsync(bid: Bid): ThunkAction<Promise<void>, {}, {}, IBidAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IBidAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.ADD_BID_TO_CART_REQUEST, message: \"Making post request to add bid to cart ...\" });\r\n\r\n        try {\r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"bids/addcart\", {\r\n                method: \"POST\",\r\n                headers: UtilService.getAuthHeader(),\r\n                body: JSON.stringify(bid)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            let createdBid: Bid = (await response.json());\r\n            dispatch({ type: ACTIONS.ADD_BID_TO_CART_RECEIVED, bid: createdBid, message: response.statusText,  httpMessage: ACTIONS.HTTP_CREATE_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }        \r\n        \r\n    }\r\n}\r\n\r\nexport function updateBidInCartAsync(bid: Bid): ThunkAction<Promise<void>, {}, {}, IBidAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IBidAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.UPDATE_BID_IN_CART_REQUEST, messages: \"Request to update bid in cart\" });\r\n\r\n        try {\r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"bids/updatecart\", {\r\n                method: \"PUT\",\r\n                headers: UtilService.getAuthHeader(),\r\n                body: JSON.stringify(bid)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            let updatedBid: Bid = (await response.json());\r\n            dispatch({ type: ACTIONS.UPDATE_BID_IN_CART_RECEIVED, bid: updatedBid, message: response.statusText, httpMessage: ACTIONS.HTTP_UPDATE_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }        \r\n        \r\n    }\r\n}\r\n\r\nexport function getBidsOfCustomerInCartAsync(customerId: number) {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IBidAction | IErrorAction>) => { \r\n        dispatch({ type: ACTIONS.GET_BIDSOFCUSTOMER_INCART_REQUEST, messages: \"Fetching bids in cart for customer \" + customerId});\r\n\r\n        try {\r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"bids/cart/\" + customerId, {\r\n                headers: UtilService.getAuthHeader()\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n\r\n            const bids: Bid[] = await response.json();\r\n            dispatch({ type: ACTIONS.GET_BIDSOFCUSTOMER_INCART_RECEIVED, bids: bids, message: response.statusText, httpMessage: ACTIONS.HTTP_READ_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n    }\r\n}\r\n\r\nexport function deleteBidFromCartAsync(bidId: number) {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IBidAction | IErrorAction>) => { \r\n        dispatch({ type: ACTIONS.DELETE_BID_IN_CART_REQUEST, messages: \"deleting bids in cart with bidId\" + bidId});\r\n\r\n        try {\r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"bids/cart/\" + bidId, {\r\n                method: \"DELETE\",\r\n                headers: UtilService.getAuthHeader()\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            dispatch({ type: ACTIONS.DELETE_BID_IN_CART_RECEIVED, message: response.statusText, httpMessage: ACTIONS.HTTP_DELETE_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n    }\r\n}\r\n\r\nexport function orderBidsFromCart(bids: Bid[]) {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IBidAction | IErrorAction>) => { \r\n        dispatch({ type: ACTIONS.ORDER_BIDS_IN_CART_REQUEST, messages: \"ordering bids in cart \" + bids.toString()});\r\n        try {\r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"bids/cart/order\", {\r\n                method: \"PUT\",\r\n                headers: UtilService.getAuthHeader(),\r\n                body: JSON.stringify(bids)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n\r\n            dispatch({type: ACTIONS.ORDER_BIDS_IN_CART_RECEIVED, message: response.statusText, httpMessage: ACTIONS.HTTP_UPDATE_ORDER_SUCCESS })\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n    }\r\n}\r\n\r\nexport function getPendingOrSuccessfulBids(customerId: number) {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IBidAction | IErrorAction>) => { \r\n        dispatch({ type: ACTIONS.GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST, messages: \"getting  PendingOrSuccessfulBids of customer \" + customerId});\r\n        try {\r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"bids/orders/\" + 1, {\r\n                headers: UtilService.getAuthHeader()\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n\r\n            const bids: Bid[] = await response.json();\r\n\r\n            dispatch({type: ACTIONS.GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED, bids: bids, message: response.statusText, httpMessage: ACTIONS.HTTP_READ_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n    }\r\n}","import MaterialTable from 'material-table';\r\nimport React from \"react\"; \r\n\r\nimport { forwardRef } from 'react';\r\n\r\nimport AddBox from '@material-ui/icons/AddBox';\r\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\r\nimport Check from '@material-ui/icons/Check';\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRight from '@material-ui/icons/ChevronRight';\r\nimport Clear from '@material-ui/icons/Clear';\r\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\r\nimport Edit from '@material-ui/icons/Edit';\r\nimport FilterList from '@material-ui/icons/FilterList';\r\nimport FirstPage from '@material-ui/icons/FirstPage';\r\nimport LastPage from '@material-ui/icons/LastPage';\r\nimport Remove from '@material-ui/icons/Remove';\r\nimport SaveAlt from '@material-ui/icons/SaveAlt';\r\nimport Search from '@material-ui/icons/Search';\r\nimport ViewColumn from '@material-ui/icons/ViewColumn';\r\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart';\r\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\n\r\nimport { Icons } from 'material-table';\r\nimport  { SvgIconTypeMap } from \"@material-ui/core/SvgIcon\";\r\nimport { OverridableComponent } from '@material-ui/core/OverridableComponent';\r\n\r\ninterface IProp {\r\n  title: string,\r\n  data: any[];\r\n  columnNames: any[];\r\n  accessors: string[];\r\n  handleChecked?: (rowIds: number[]) => any;\r\n  idColumnAccessorName?: string; //to hide the id column,\r\n  pageSize?: number;\r\n  actionIcon?: OverridableComponent<SvgIconTypeMap<{}, \"svg\">>;\r\n  enableSearch?: boolean;\r\n  enablePaging?: boolean;\r\n  enableSelection?: boolean;\r\n  actionMessage?: string;\r\n  detailPanelFieldName?: string; //To render the detail panel\r\n  enabledDetailPanel?: boolean;\r\n}\r\n\r\n \r\nexport function DataTable({title, data, columnNames, accessors, handleChecked=defaultHandleChecked, idColumnAccessorName=\"\", pageSize=10, actionIcon,\r\n  enablePaging=false, enableSearch=false, actionMessage=\"Action\", enableSelection=false, detailPanelFieldName=\"\", enabledDetailPanel=false  }: IProp): JSX.Element {\r\n\r\n  let headerDicts: any[] = [];\r\n    for(let i = 0; i < columnNames.length; i++) {\r\n        let header: string = columnNames[i];\r\n        let accessor: string = accessors[i];    \r\n        let headerDict: any = {\r\n            \"title\": header,\r\n            \"field\": accessor,\r\n            \"hidden\": accessor === idColumnAccessorName\r\n        }; \r\n        headerDicts.push(headerDict);\r\n    }\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n      <div> \r\n        <MaterialTable        \r\n          icons={tableIcons}\r\n            title={title}\r\n            columns={headerDicts}\r\n            data={data}        \r\n            options={{\r\n              selection: enableSelection,\r\n              pageSize: pageSize,\r\n              search: enableSearch,\r\n              paging: enablePaging,\r\n              rowStyle:{\r\n                height: \"100px\"\r\n              },            \r\n            }}\r\n            detailPanel={[\r\n              rowData => ({\r\n                disabled: !enabledDetailPanel,\r\n                icon: () => <ChevronRight className={enabledDetailPanel ? classes.display : classes.displayNone } />,\r\n                render: () => returnDetailTable(rowData, detailPanelFieldName)\r\n              })\r\n            ]}\r\n            //rowData => returnDetailTable(rowData, detailPanelFieldName)\r\n            \r\n      />\r\n      </div>\r\n    )\r\n}\r\n\r\n  // There is a bug with Material Table where the table is fully rerendered on parent state update since 1.53.0\r\n  // https://github.com/mbrn/material-table/issues/1265 \r\nfunction returnDetailTable(rowData: any, detailPanelFielddName: string): JSX.Element {\r\n  return rowData[detailPanelFielddName] as JSX.Element;\r\n}\r\n\r\nconst defaultHandleChecked = (val?: any) => {};\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    displayNone: {\r\n      display: 'none'      \r\n    },\r\n    display: {\r\n      display: \"initial\"\r\n    }\r\n  }),\r\n);\r\n  \r\nconst tableIcons = {\r\n  Add: forwardRef<any, Icons>((props, ref) => <AddBox {...props} ref={ref} />),\r\n  Check: forwardRef<any, Icons>((props, ref) => <Check {...props} ref={ref} />),\r\n  Clear: forwardRef<any, Icons>((props, ref) => <Clear {...props} ref={ref} />),\r\n  Delete: forwardRef<any, Icons>((props, ref) => <DeleteOutline {...props} ref={ref} />),\r\n  DetailPanel: forwardRef<any, Icons>((props, ref) => <ChevronRight {...props} ref={ref} />),\r\n  Edit: forwardRef<any, Icons>((props, ref) => <Edit {...props} ref={ref} />),\r\n  Export: forwardRef<any, Icons>((props, ref) => <SaveAlt {...props} ref={ref} />),\r\n  Filter: forwardRef<any, Icons>((props, ref) => <FilterList {...props} ref={ref} />),\r\n  FirstPage: forwardRef<any, Icons>((props, ref) => <FirstPage {...props} ref={ref} />),\r\n  LastPage: forwardRef<any, Icons>((props, ref) => <LastPage {...props} ref={ref} />),\r\n  NextPage: forwardRef<any, Icons>((props, ref) => <ChevronRight {...props} ref={ref} />),\r\n  PreviousPage: forwardRef<any, Icons>((props, ref) => <ChevronLeft {...props} ref={ref} />),\r\n  ResetSearch: forwardRef<any, Icons>((props, ref) => <Clear {...props} ref={ref} />),\r\n  Search: forwardRef<any, Icons>((props, ref) => <Search {...props} ref={ref} />),\r\n  SortArrow: forwardRef<any, Icons>((props, ref) => <ArrowDownward {...props} ref={ref} />),\r\n  ThirdStateCheck: forwardRef<any, Icons>((props, ref) => <Remove {...props} ref={ref} />),\r\n  ViewColumn: forwardRef<any, Icons>((props, ref) => <ViewColumn {...props} ref={ref} />),\r\n  AddShoppingCartIcon: forwardRef<any, Icons>((props, ref) => <AddShoppingCartIcon {...props} ref={ref} />)\r\n};","import React from \"react\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport MuiAlert, { AlertProps } from \"@material-ui/lab/Alert\";\r\n\r\ninterface IProps { \r\n    open: boolean;  // useState(true)\r\n    setOpen: (val: boolean) => void;    //useState(true)\r\n    message: string | JSX.Element;\r\n    severity: \"error\" | \"warning\" | \"info\" | \"success\",\r\n    cleanUp?: () => any;    // callback function when notification closes;\r\n    autoHideDuration?: number;\r\n}\r\n\r\nexport function SnackbarComponent({open, setOpen, message, severity, cleanUp, autoHideDuration=6000}: IProps): JSX.Element {\r\n\r\n    const handleClose = (reason: string) => { \r\n        setOpen(false); \r\n        if (cleanUp) {\r\n            cleanUp();\r\n        }\r\n    }; \r\n    \r\n    return <Snackbar open={open} autoHideDuration={autoHideDuration} onClose={() => handleClose(\"clickaway\")}>\r\n        <Alert onClose={() => handleClose(\"clickaway\")} severity={severity} >\r\n            {message}\r\n        </Alert>\r\n    </Snackbar>\r\n}\r\n\r\nfunction Alert(props: AlertProps) {\r\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n  }\r\n\r\n","import React from \"react\";\r\nimport { Bid } from \"../../models/Bid\";\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Button } from \"@material-ui/core\";\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\ninterface IProp {\r\n    bids: Bid[];\r\n    rowIds: number[];\r\n    handleOrder: () => void\r\n}\r\n\r\nexport function OrderCheckoutComponent({bids, rowIds, handleOrder}: IProp) {\r\n\r\n    const selectedBids: Bid[] = bids.filter(bid =>  rowIds.includes(bid.bidId));\r\n\r\n    const totalDeliveryCharge = selectedBids.map(bid => {\r\n        const addressBidCountDict = bid.addressBidCountDict as Record<string, number>;   // { collectionAddress: number of bids} \r\n        const numBidsAtAddress: number = addressBidCountDict[bid.collectionAddress];\r\n        const deliveryCharge: number = bid?.discountScheme?.deliveryCharge ?? 0;\r\n        const avgDeliveryCharge: number = (!numBidsAtAddress) ? deliveryCharge : deliveryCharge / numBidsAtAddress;\r\n        return avgDeliveryCharge\r\n    }).reduce((accum, charge) => accum + charge, 0);\r\n\r\n    let totalPrice: number = selectedBids\r\n        .reduce((accum, bid) => accum + bid.quantity * (bid.discountScheme?.discountedPrice ?? 0), 0);\r\n\r\n    const totalQuantity: number = selectedBids\r\n        .reduce((accum, bid) => accum + bid.quantity ?? 0, 0);\r\n\r\n    \r\n    \r\n    return <Paper>\r\n        <Grid container spacing={3}>\r\n            <Grid item xs={3}></Grid>\r\n            <Grid item xs={6}>\r\n                <Typography variant={\"body1\"} align={\"center\"} color=\"textSecondary\" paragraph={true}><b>Total Quantity: </b>{totalQuantity}</Typography>\r\n                <Typography variant={\"body1\"} align={\"center\"} color=\"textSecondary\" paragraph={true}><b>Total Price: </b>${totalPrice}</Typography>\r\n                <Typography variant={\"body1\"} align={\"center\"} color=\"textSecondary\" paragraph={true}><b>Total Delivery Charge: </b>${totalDeliveryCharge}</Typography>\r\n                <Typography variant={\"body1\"} align={\"center\"} color=\"secondary\" paragraph={true}><b>Grand Total: </b>${totalDeliveryCharge + totalQuantity}</Typography>\r\n            </Grid>\r\n            <Grid item xs={3} alignContent=\"flex-end\">\r\n                <Button color=\"secondary\" size=\"large\" variant=\"contained\" onClick={handleOrder} disabled={selectedBids.length < 1}>Order Bids</Button>\r\n            </Grid>        \r\n        </Grid> \r\n    </Paper>\r\n    \r\n}","import React from \"react\";\r\nimport Button from '@material-ui/core/Button';\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport RemoveIcon from \"@material-ui/icons/Remove\";\r\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\r\n\r\ninterface IProp {\r\n    quantity: number; // quantity is part of useState(0)\r\n    setQuantity: (num: number) => any;  // setQuantity is part of useState(0)\r\n    size?: \"small\" | \"medium\" | \"large\"\r\n    align?: \"alignLeft\" | \"alignCenter\" | \"alignRight\"\r\n}\r\n\r\nexport function CartButtons({quantity, setQuantity, size=\"medium\", align=\"alignLeft\"}: IProp): JSX.Element {\r\n    const classes: Record<string, any> = useStyles();\r\n\r\n    const handleIncrement = () => {\r\n        setQuantity(quantity + 1);\r\n    }\r\n\r\n    const handleDecrement  = () => {\r\n        let newQuantity = quantity - 1\r\n        if (newQuantity < 1)\r\n            return;\r\n        setQuantity(quantity - 1);\r\n    }\r\n\r\n    return <div className={classes[align]}>\r\n        <ButtonGroup color=\"primary\" aria-label=\"outlined primary button group\" size={size}>\r\n            <Button onClick={handleIncrement}><AddIcon/></Button>\r\n            <Button>{quantity}</Button>\r\n            <Button onClick={handleDecrement}><RemoveIcon /></Button>\r\n        </ButtonGroup>\r\n    </div>\r\n\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    alignLeft: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'left',\r\n      '& > *': {\r\n        margin: theme.spacing(1),\r\n      }\r\n    }, \r\n    alignCenter: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      '& > *': {\r\n        margin: theme.spacing(1),\r\n      }\r\n    },\r\n    alignRight: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'right',\r\n      '& > *': {\r\n        margin: theme.spacing(1),\r\n      }\r\n    }\r\n  }),\r\n);\r\n ","import React from \"react\";\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { SelectListItem } from \"../../models/SelectListItem\";\r\nimport { Control, Controller, DeepMap, FieldError } from \"react-hook-form\";\r\nimport { FormHelperText } from \"@material-ui/core\";\r\n\r\ninterface IPropUncontrolled {\r\n    title: string;\r\n    name: string,\r\n    selectListItems: SelectListItem[] // Record<text, value>,\r\n    errorMessage?: string,\r\n    defaultValue?: string,\r\n    formHelperText?: string\r\n    control: Control<Record<string, any>>,\r\n    errors: DeepMap<Record<string, any>, FieldError>,\r\n    rules: object\r\n}\r\n\r\n// For Select field used in React Hook Forms. React Hook forms are uncontrolled, i.e. no state\r\n// The data for each input element is stored in the DOM, not in the component. \r\n// React hook forms library uses a ref behind the scenes to retrieve the data\r\nexport function SelectUncontrolledComponent({title, selectListItems,\r\n  name, errorMessage=\"\", defaultValue=\"\", control, errors, rules}: IPropUncontrolled): JSX.Element {\r\n\r\n  let isError = errors[name] != null ? true : false;\r\n\r\n  return  <Controller\r\n    name={name}\r\n    defaultValue={defaultValue}\r\n    control={control}\r\n    rules={rules}\r\n    render={props => <SelectControlledComponent title={title} state={props.value} selectListItems={selectListItems} \r\n      handleChange={props.onChange} formHelperText={errorMessage} isError={isError} {...props} />  \r\n    } />\r\n}\r\n\r\ninterface IPropControlled {\r\n  title: string;\r\n  state: any;\r\n  selectListItems: SelectListItem[] // Record<text, value>\r\n  handleChange: (event: React.ChangeEvent<any>) => any | void;\r\n  isError?: boolean;\r\n  formHelperText?: string\r\n}\r\n  \r\n// For controlled forms\r\n// In a controlled component, the form data is handled by the state within the component.\r\nexport function SelectControlledComponent({title, state, selectListItems, handleChange, isError=false, formHelperText=\"\"}: IPropControlled): JSX.Element {\r\n    const classes = useStyles();\r\n\r\n    return  <FormControl className={classes.formControl} error={isError}>\r\n          <InputLabel id=\"demo-simple-select-label\">{title}</InputLabel>\r\n          <Select labelId=\"demo-simple-select-label\"\r\n              autoWidth={true}\r\n              value={state}\r\n              onChange={event => handleChange(event)} > \r\n              <MenuItem value={undefined} divider>\r\n                  <em>None</em>\r\n              </MenuItem>\r\n              {\r\n                selectListItems.map((selectListItem, index) => <MenuItem key={index} value={selectListItem.value}>{selectListItem.text}</MenuItem>)\r\n              }\r\n          </Select>\r\n          { isError &&\r\n            <FormHelperText>{formHelperText}</FormHelperText>\r\n          }\r\n          \r\n    </FormControl>\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    formControl: {\r\n      //margin: theme.spacing(1),\r\n      minWidth: 150,\r\n    },\r\n    selectEmpty: {\r\n      marginTop: theme.spacing(2),\r\n    },\r\n  }),\r\n);","import React from \"react\";\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\n\r\ninterface IProp {\r\n    textDict: Record<string, any>\r\n    color?: \"inherit\" | \"initial\" | \"textSecondary\" | \"primary\" | \"secondary\" | \"textPrimary\" | \"error\" | undefined\r\n}\r\n\r\nexport function TextComponent({textDict, color=\"textSecondary\"}: IProp): JSX.Element {\r\n    let paras: JSX.Element[] = [];\r\n    for (let [key, value] of Object.entries(textDict)) {\r\n        let para: JSX.Element = <Typography variant=\"body2\" color={color} component=\"p\" align=\"left\" key={key}>\r\n            <b>{key}&nbsp;</b>{value} \r\n        </Typography>\r\n        paras.push(para)\r\n    }\r\n\r\n    return <Container>\r\n        {paras}\r\n    </Container>\r\n}","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Dispatch } from \"redux\"; \r\nimport { Bid } from \"../models/Bid\";\r\nimport { RootState } from \"../store/rootReducer\";\r\nimport { getPendingOrSuccessfulBids } from \"../store/thunks/bidThunk\";\r\nimport { Container } from \"@material-ui/core\";\r\nimport { DataTable } from \"../components/shared/DataTable\";\r\nimport { DataTableService } from \"../services/DataTableService\";\r\n\r\nexport class Row {\r\n    name: string | undefined;\r\n    discountedPrice: string | undefined;\r\n    quantity: string | undefined;\r\n    deliveryCharge: string | undefined;\r\n    collectionAddress: string | undefined;\r\n    remainingBidsRequired: number | undefined;\r\n    bidExpiryDate: string | undefined;\r\n    bidStatus: \"SUCCESS\" | \"PENDING\" | \"FAILED\" | undefined\r\n};\r\n\r\nexport function OrdersPage(): JSX.Element {\r\n    document.title = \"Orders\";\r\n    const dispatch: Dispatch<any> = useDispatch();\r\n\r\n    const bids: Bid[] = useSelector((action: RootState) => action.bidReducer.bids as Bid[] ) ?? [];\r\n\r\n    useEffect(() => {\r\n        const customerId: number = 1;\r\n        const action = getPendingOrSuccessfulBids(customerId);\r\n        dispatch(action);\r\n    }, [dispatch]);\r\n\r\n    const columnNames: string[] = [\"Name\", \"Discounted Price Per Item\", \"Quantity\", \"Delivery Charge\", \"Collection Address\", \"Remaining Bids Required\", \"Bid Expiry Date\", \"Bid Status\"];\r\n    const accessors: string[] = Object.keys(new Row());\r\n    const rows: Row[] = bids.map(bid => DataTableService.createRowFromBid_OrdersPage(bid));\r\n\r\n     return <Container maxWidth=\"lg\">\r\n         <DataTable columnNames={columnNames} accessors={accessors} data={rows} title={\"Submitted Bids\"} enablePaging={true} pageSize={5} />\r\n     </Container>\r\n}\r\n\r\n ","import { Product } from \"./Product\";\r\nimport { Bid } from \"./Bid\";\r\n\r\nexport class DiscountScheme {\r\n    discountSchemeId: number = 0;\r\n    minOrderQnty: number = 0;\r\n    discountedPrice: number = 0;\r\n    expiryDate: Date | null = null;\r\n    deliveryCharge: number = 0;\r\n\r\n    productId: number = 0;\r\n    product: Product | null = null;\r\n    bids: Bid[] = [];\r\n\r\n    //Properties of ViewModel\r\n    addressBidCountDict?: Record<string, number> = {}\r\n\r\n}","export class SelectListItem {\r\n    disabled: boolean = false;\r\n    selected: boolean = false;\r\n    text: string = \"\";\r\n    value: any;\r\n\r\n\r\n    constructor(text = \"\", value: any) {\r\n        this.text = text;\r\n        this.value = value;\r\n    }\r\n}","import { DiscountScheme } from \"./DiscountScheme\";\r\n\r\nexport class Product {\r\n    productId: number = 0;\r\n    name: string = \"\";\r\n    category: string = \"\";\r\n    description: string = \"\";\r\n    originalPrice: number = 0;\r\n    producerId: number = 0;\r\n\r\n    discountSchemes: DiscountScheme[] = [];\r\n\r\n}","import React from \"react\";\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { Button } from \"@material-ui/core\";\r\nimport CardMedia from '@material-ui/core/CardMedia'; \r\nimport imageUrl  from  \"../../images/e_commerce.png\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Container from '@material-ui/core/Container';\r\n\r\ninterface IProps {\r\n    open: boolean;  //open is part of useState(false)\r\n    toggleOpen: () => void; //toggleOpen is part of useState(false)\r\n    title?: string;\r\n    showPicture?: boolean;\r\n    content?: JSX.Element;  // paragraphs to display, e.g. [<p></p>, <p></p>]\r\n    actionTitle?: string,   //title of button\r\n    action?: (arg?: any) => any; //callback function on button click\r\n    secondaryActionTitle?: string,\r\n    secondaryAction?: (arg?: any) => any;\r\n}\r\n\r\nexport function DialogComponent({open, toggleOpen, title, content, actionTitle, action, showPicture=false, secondaryActionTitle, secondaryAction}: IProps): JSX.Element {\r\n\r\n    return <Dialog open={open} onClose={toggleOpen} aria-labelledby=\"form-dialog-title\" maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle id=\"form-dialog-title\">{title}</DialogTitle>\r\n            <DialogContent>\r\n                { showPicture &&\r\n                    <CardMedia \r\n                        component=\"img\"\r\n                        \r\n                        //height=\"140\"\r\n                        image={imageUrl}\r\n                        title=\"https://acowebs.com/impact-ecommerce-society/\"/>\r\n                } \r\n                <br/>               \r\n                {content}                \r\n            </DialogContent>\r\n\r\n            <Container>\r\n                <Grid container spacing={0}>\r\n                    <Grid item xs={8}></Grid>\r\n                    <Grid item xs={4}>\r\n                    {actionTitle &&\r\n                        <DialogActions>\r\n                            <Button onClick={action} color=\"primary\" variant=\"outlined\">\r\n                                {actionTitle}\r\n                            </Button>\r\n                        </DialogActions>\r\n                    } \r\n                    </Grid>\r\n                </Grid>                       \r\n\r\n                <Grid container spacing={0}>\r\n                    <Grid item xs={4}>\r\n                    {secondaryActionTitle &&\r\n                        <DialogActions>\r\n                            <Button onClick={secondaryAction as () => {}} color=\"secondary\" variant=\"outlined\">\r\n                                {secondaryActionTitle}\r\n                            </Button>\r\n                        </DialogActions>\r\n                    }  \r\n                    </Grid>\r\n                    <Grid item xs={4}></Grid>\r\n                    <Grid item xs={4}>\r\n                        <DialogActions>                \r\n                            <Button onClick={toggleOpen} color=\"primary\" variant=\"outlined\">\r\n                                Close\r\n                            </Button>\r\n                        </DialogActions>\r\n                    </Grid>\r\n                </Grid>\r\n            </Container>\r\n            \r\n            \r\n            \r\n    </Dialog>\r\n\r\n}\r\n","import { DiscountScheme } from \"../models/DiscountScheme\";\r\n\r\nexport type Status = \"SUCCESS\" | \"PENDING\" | \"FAILED\" | undefined;\r\n\r\nexport class DiscountSchemeService {\r\n\r\n    static determineStatusOfScheme(ds: DiscountScheme): Status {\r\n        const expiryDate: Date = new Date(ds.expiryDate as Date);\r\n    \r\n        const isSchemeSuccess: boolean = ds.bids.some(bid => bid.bidSuccessDate != null);\r\n        const hasBidExpired: boolean = expiryDate < new Date();\r\n    \r\n        if (isSchemeSuccess) {\r\n            return \"SUCCESS\"\r\n        } else if (!isSchemeSuccess && hasBidExpired ) {\r\n            return \"FAILED\";\r\n        } else {\r\n            return \"PENDING\";\r\n        }\r\n    }\r\n    \r\n }\r\n ","import { Container, Grid } from \"@material-ui/core\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Dispatch } from \"redux\"; \r\nimport { DataTable } from \"../components/shared/DataTable\";\r\nimport { DiscountScheme } from \"../models/DiscountScheme\";\r\nimport { RootState } from \"../store/rootReducer\";\r\nimport { deleteDiscountSchemeAsync, getDiscountSchemesWithBidOfProducer } from \"../store/thunks/discountSchemeThunk\";\r\nimport { cloneDeep, uniqBy } from \"lodash\";\r\nimport Button from '@material-ui/core/Button';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SelectControlledComponent } from \"../components/shared/SelectComponents\";\r\nimport { SelectListItem } from \"../models/SelectListItem\";\r\nimport { Product } from \"../models/Product\";\r\nimport { DialogComponent } from \"../components/shared/DialogComponent\";\r\nimport { TextComponent } from \"../components/shared/TextComponent\";\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { ACTIONS } from \"../store/actionEnums\";\r\nimport { DataTableService } from \"../services/DataTableService\";\r\nimport { DiscountSchemeService, Status } from \"../services/DiscountSchemeService\";\r\n\r\n\r\nexport class Row {\r\n    name: JSX.Element | undefined;\r\n    discountedPrice: JSX.Element | undefined;\r\n    deliveryCharge: string | undefined = \"0\";\r\n    minOrderQnty: number | undefined = 0;\r\n    currentBids: number | undefined = 0;    \r\n    bidExpiryDate: string | undefined  = \"\";\r\n    bidStatus: Status;\r\n    delete: JSX.Element | undefined;\r\n}\r\n\r\nexport function ProducerDiscountSchemePage(): JSX.Element {\r\n\r\n    document.title = \"Schemes\";\r\n    const producerId: number = 2;\r\n    const dispatch: Dispatch<any> = useDispatch();\r\n    const history = useHistory(); \r\n\r\n    // Single source of truth, avoid mutating it\r\n    const immutableDiscountSchemes: DiscountScheme[] = useSelector((action: RootState) => action.discountSchemeReducer.discountSchemes as DiscountScheme[]) ?? [];\r\n    useEffect(() => {\r\n        \r\n        const action = getDiscountSchemesWithBidOfProducer(producerId);\r\n        dispatch(action);\r\n    }, [dispatch]);\r\n\r\n    // For the AutoComplete Filter\r\n    let products: Product[] = immutableDiscountSchemes.map(ds => ds.product ?? new Product());\r\n    products = uniqBy(products, (product) => product.name);    \r\n\r\n    // DiscountSchemes to dispaly to the data table, subject to filtering\r\n    const [discountSchemes, setDiscountSchemes] = useState<DiscountScheme[]>([]);\r\n    useEffect(() => {\r\n        setDiscountSchemes(immutableDiscountSchemes);        \r\n    }, [immutableDiscountSchemes.length, immutableDiscountSchemes]);\r\n\r\n    const [status, setStatus] = useState<Status>();\r\n    const handleStatusChange = ((event: React.ChangeEvent<any>) => {\r\n        let selectedStatus: Status = event.target.value as Status;\r\n        setStatus(selectedStatus);\r\n    });\r\n\r\n    //Status filtering\r\n    const selectListItems: SelectListItem[] = [\"SUCCESS\", \"PENDING\", \"FAILED\"].map((status) => new SelectListItem(status, status));\r\n    \r\n    // Product name filtering\r\n    const [productName, setProductName] = useState<string>(\"\");\r\n    const handleChangeProductName = (name: string) => {\r\n        setProductName(name);\r\n    }\r\n\r\n    useEffect(() => {\r\n        let discountSchemesCopy: DiscountScheme[] = cloneDeep(immutableDiscountSchemes);\r\n        discountSchemesCopy = discountSchemesCopy\r\n            .filter(ds => status ? DiscountSchemeService.determineStatusOfScheme(ds) === status : true )\r\n            .filter(ds => productName ? ds.product?.name?.toLowerCase()?.includes(productName.toLowerCase()) : true)\r\n        setDiscountSchemes(discountSchemesCopy);\r\n    }, [status, productName, immutableDiscountSchemes]);\r\n\r\n    // To display the product as a dialog when user clicks on the link\r\n    const [openProductDialog, setOpenProductDialog] = useState<boolean>(false);\r\n    const [product, setProduct] = useState<Product>(new Product());\r\n    let productTextDict: Record<string, any> = {\r\n        \"Name\": product.name,\r\n        \"Original Price\": \"$\" + product.originalPrice,\r\n        \"Category\": product.category,\r\n        \"Description\": product.description        \r\n    }\r\n    let productTextComponent: JSX.Element = <TextComponent textDict={productTextDict} />\r\n\r\n    // To redirect user to create discount Scheme\r\n    const redirectToForm = () => history.push(\"/producer/discountSchemes/create\");   \r\n\r\n    // To create rows for the data table\r\n    const rows: Row[] = [];\r\n\r\n    // When user clicks delete in the opened product dialog, close it, then open another and confirm delete\r\n    const [openDeleteDialog, setOpenDeleteDialog] = useState<boolean>(false); \r\n    const [targetDiscountScheme, setTargetDiscountScheme] = useState<DiscountScheme>(new DiscountScheme());\r\n    const deleteProduct = () => {\r\n        if (targetDiscountScheme.bids.length > 0) {\r\n            return;\r\n        }\r\n        const deleteAction = deleteDiscountSchemeAsync(targetDiscountScheme.discountSchemeId);\r\n        dispatch(deleteAction);\r\n        setOpenDeleteDialog(false);\r\n    } \r\n\r\n    let httpResponseMessage: string = useSelector((action: RootState) => action.discountSchemeReducer.httpMessage as string) ?? \"\";\r\n    useEffect(() => {\r\n        if (httpResponseMessage.includes(ACTIONS.HTTP_DELETE_SUCCESS)) {\r\n            \r\n            const action = getDiscountSchemesWithBidOfProducer(producerId);\r\n            dispatch(action);\r\n        }\r\n    }, [httpResponseMessage, dispatch]);\r\n\r\n    // Set the rows for the datatable\r\n    for (let ds of discountSchemes) {\r\n        const onNameClick = () => {\r\n            let product: Product = discountSchemes\r\n                .map(ds => ds.product)\r\n                .find(product => product?.productId === ds.productId) ?? new Product();\r\n            setProduct(product);\r\n\r\n            setOpenProductDialog(!openProductDialog);\r\n        };\r\n        const onDeleteClick = () => {\r\n            setTargetDiscountScheme(ds);\r\n            setOpenDeleteDialog(true);\r\n        }\r\n\r\n        let row: Row = DataTableService.createRowFromScheme_ProducerDiscountSchemePage(ds, onNameClick, onDeleteClick);\r\n        rows.push(row);\r\n    }\r\n\r\n    \r\n    const columnNames: string[] = [\"Name\", \"Discounted Price\", \"Delivery Charge\",  \"Min Order Qnty\", \"Current Bids\",\"Expiry Date\", \"Bid Status\", \"Delete\"];\r\n    const accessors: string[] = Object.keys(new Row());        \r\n\r\n    return <Container maxWidth=\"lg\">\r\n        <Grid container>\r\n            <Grid item xs={2}>\r\n                <SelectControlledComponent title=\"Status\" state={status} selectListItems={selectListItems} handleChange={handleStatusChange}  />\r\n            </Grid> \r\n            <Grid item xs={3}>\r\n            <Autocomplete\r\n                id=\"combo-box-demo\"\r\n                options={products}\r\n                getOptionLabel={(option: Product) => option.name ?? \"\"}\r\n                style={{ width: 300 }}\r\n                onInputChange={(event, value) => handleChangeProductName(value)}\r\n                renderInput={(params) => <TextField {...params} label=\"Products\" variant=\"outlined\" />}\r\n            />\r\n            </Grid>\r\n            <Grid item xs={5}></Grid>     \r\n            <Grid item xs={2}>\r\n                <Button onClick={redirectToForm} variant=\"contained\" color=\"primary\">\r\n                    Create Scheme\r\n                </Button>\r\n            </Grid>        \r\n        </Grid>\r\n        <br/>\r\n        <DataTable columnNames={columnNames} accessors={accessors} data={rows} title={\"Discount Schemes\"} enablePaging={true} pageSize={5} />\r\n        \r\n        <DialogComponent open={openProductDialog} toggleOpen={() => setOpenProductDialog(!openProductDialog)} \r\n            content={productTextComponent} showPicture />\r\n        <DialogComponent open={openDeleteDialog} toggleOpen={() => setOpenDeleteDialog(!openDeleteDialog)} content={<p>Confirm Delete?</p>}\r\n            secondaryAction={deleteProduct} secondaryActionTitle=\"Delete Product\"/>\r\n    </Container>\r\n}\r\n\r\n","import { Action } from \"redux\";\r\nimport { Product } from \"../../models/Product\";\r\nimport { ThunkAction, ThunkDispatch } from \"redux-thunk\";\r\nimport { ACTIONS } from \"../actionEnums\";\r\nimport { IErrorAction, errorAction } from \"../actions/errorAction\";\r\nimport { ApiError } from \"../../models/ApiError\";\r\nimport { UtilService } from \"../../services/UtilService\";\r\n\r\nexport interface IProductAction extends Action {\r\n    type: string;\r\n    product?: Product | undefined;\r\n    products?: Product[] | undefined;\r\n    message?: string;  \r\n    httpMessage?: string // For API messages\r\n}\r\n\r\nexport function getProductsAsync(producerId: number): ThunkAction<Promise<void>, {}, {}, IProductAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IProductAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.GET_PRODUCTS_REQUEST, message: \"Getting products of producer ...\" });\r\n\r\n        try {\r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"products/producer/\" + producerId, {\r\n                headers: UtilService.getAuthHeader()\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            let products: Product[] = (await response.json());\r\n            dispatch({ type: ACTIONS.GET_PRODUCTS_RECEIVED, products: products, message: response.statusText,  httpMessage: ACTIONS.HTTP_READ_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }        \r\n        \r\n    }\r\n}\r\n\r\nexport function getProductAsync(productId: number): ThunkAction<Promise<void>, {}, {}, IProductAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IProductAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.GET_PRODUCT_REQUEST, message: \"Getting products of producer ...\" });\r\n\r\n        try {\r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"products/\" + productId, {\r\n                headers: UtilService.getAuthHeader()\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            let product: Product = (await response.json());\r\n            dispatch({ type: ACTIONS.GET_PRODUCT_RECEIVED, product: product, message: response.statusText,  httpMessage: ACTIONS.HTTP_READ_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }        \r\n        \r\n    }\r\n}\r\n\r\nexport function createProductsAsync(product: Product): ThunkAction<Promise<void>, {}, {}, IProductAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IProductAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.GET_PRODUCTS_REQUEST, message: \"Creating product ...\" });\r\n\r\n        try {\r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"products/\", {\r\n                method: \"POST\",\r\n                headers: UtilService.getAuthHeader(),\r\n                body: JSON.stringify(product)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            let createdProduct: Product = (await response.json());\r\n            dispatch({ type: ACTIONS.GET_PRODUCTS_RECEIVED, product: createdProduct, message: response.statusText,  httpMessage: ACTIONS.HTTP_CREATE_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }        \r\n        \r\n    }\r\n}\r\n\r\nexport function updateProductAsync(productId: number, product: Product): ThunkAction<Promise<void>, {}, {}, IProductAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IProductAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.UPDATE_PRODUCT_REQUEST, message: \"Updating product ...\" });\r\n\r\n        try {\r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"products/\" + productId, {\r\n                method: \"PUT\",\r\n                headers: UtilService.getAuthHeader(),\r\n                body: JSON.stringify(product)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            let updatedProduct: Product = (await response.json());\r\n            dispatch({ type: ACTIONS.GET_PRODUCTS_RECEIVED, product: updatedProduct, message: response.statusText,  httpMessage: ACTIONS.HTTP_UPDATE_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }        \r\n        \r\n    }\r\n}\r\n\r\nexport function deleteProductAsync(productId: number): ThunkAction<Promise<void>, {}, {}, IProductAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IProductAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.DELETE_PRODUCT_REQUEST, message: \"Deleting product ...\" });\r\n\r\n        try {\r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"products/\" + productId, {\r\n                method: \"DELETE\",\r\n                headers: UtilService.getAuthHeader()\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            let deletedProduct: Product = (await response.json());\r\n            dispatch({ type: ACTIONS.DELETE_PRODUCT_RECEIVED, product: deletedProduct, message: response.statusText,  httpMessage: ACTIONS.HTTP_DELETE_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }        \r\n        \r\n    }\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Product } from \"../models/Product\";\r\nimport { RootState } from \"../store/rootReducer\";\r\nimport { deleteProductAsync, getProductsAsync } from \"../store/thunks/productThunk\";\r\nimport { Dispatch } from \"redux\"; \r\nimport { useHistory } from \"react-router-dom\";\r\nimport Button from '@material-ui/core/Button';\r\nimport { Container, Grid } from \"@material-ui/core\";\r\nimport { DialogComponent } from \"../components/shared/DialogComponent\";\r\nimport { DataTable } from \"../components/shared/DataTable\";\r\nimport \"./toolTip.css\";\r\nimport { ACTIONS } from \"../store/actionEnums\";\r\nimport { DataTableService } from \"../services/DataTableService\";\r\n\r\n\r\nexport class Row {\r\n    name: string | undefined;\r\n    originalPrice: string | undefined;\r\n    category: string | undefined;\r\n    description: string | undefined;\r\n    update: JSX.Element | undefined;\r\n    delete: JSX.Element | undefined;\r\n}\r\n\r\nexport function ProductsPage(): JSX.Element {\r\n    document.title = \"Products\";\r\n    const dispatch: Dispatch<any> = useDispatch();\r\n    const history = useHistory(); \r\n    const producerId = 2;\r\n\r\n    const products: Product[] = useSelector((action: RootState) => action.productReducer.products as Product[]) ?? [];\r\n    useEffect(() => {\r\n        \r\n        const action = getProductsAsync(producerId);\r\n        dispatch(action);        \r\n    }, [dispatch]);\r\n\r\n    const columnNames: string[] = [\"Name\", \"Original Price\", \"Category\",  \"Description\", \"Update\",\"Delete\"];\r\n    const accessors: string[] = Object.keys(new Row());\r\n    const rows: Row[] = [];\r\n\r\n    // When user clicks delete in the opened product dialog, confirm delete\r\n    const [openDeleteDialog, setOpenDeleteDialog] = useState<boolean>(false); \r\n\r\n    const [targetProduct, setTargetProduct] = useState<Product>(new Product());\r\n    const deleteProduct = () => {\r\n        if (targetProduct.discountSchemes.length > 0) {\r\n            return;\r\n        }\r\n        const action = deleteProductAsync(targetProduct.productId);\r\n        dispatch(action);\r\n        setOpenDeleteDialog(false);\r\n    } \r\n\r\n    let httpResponseMessage: string = useSelector((action: RootState) => action.productReducer.httpMessage as string);\r\n    useEffect(() => {\r\n        if (httpResponseMessage.includes(ACTIONS.HTTP_DELETE_SUCCESS)) {\r\n            const action = getProductsAsync(producerId);\r\n            dispatch(action);\r\n        }\r\n    }, [httpResponseMessage, dispatch]); \r\n\r\n    for (let i = 0; i < products.length; i++) {\r\n        let product: Product = products[i];\r\n\r\n        const updateProduct = () => history.push(\"/producer/product/\" + product.productId);\r\n        const onDeleteClick = () => {\r\n            setOpenDeleteDialog(true);\r\n            setTargetProduct(product);\r\n        }\r\n\r\n        let row: Row = DataTableService.createRowFromProduct_ProductsPage(product, updateProduct, onDeleteClick);\r\n        rows.push(row);\r\n    }    \r\n\r\n    const redirectToProductForm = () => history.push(\"/producer/product/\" + 0);\r\n\r\n    return <Container>\r\n        <Grid container>\r\n            <Grid item xs={10}></Grid>\r\n            <Grid item xs={2}>\r\n                <Button variant=\"contained\" onClick={redirectToProductForm} color=\"primary\">Create Product</Button>\r\n            </Grid>\r\n        </Grid>\r\n        <Grid item xs={12}><br/></Grid>\r\n        <DataTable columnNames={columnNames} accessors={accessors} data={rows} title={\"Products\"} enablePaging={true} pageSize={5} />\r\n        <DialogComponent open={openDeleteDialog} toggleOpen={() => setOpenDeleteDialog(!openDeleteDialog)} content={<p>Confirm Delete?</p>}\r\n            secondaryAction={deleteProduct} secondaryActionTitle=\"Delete Product\"/>\r\n    </Container>\r\n}\r\n\r\n","import { Button, Checkbox, Grid } from \"@material-ui/core\";\r\nimport React from \"react\";\r\nimport { CartButtons } from \"../components/shared/CartButtons\";\r\nimport { SelectControlledComponent } from \"../components/shared/SelectComponents\";\r\nimport { TextComponent } from \"../components/shared/TextComponent\";\r\nimport { Row as RowCart }  from \"../containers/CartPage\";\r\nimport { Row as RowOrder } from \"../containers/OrdersPage\";\r\nimport { Row as SchemeRow } from \"../containers/ProducerDiscountSchemePage\";\r\nimport { Row as RowProduct } from \"../containers/ProductsPage\";\r\nimport { Bid } from \"../models/Bid\";\r\nimport { DiscountScheme } from \"../models/DiscountScheme\";\r\nimport { Product } from \"../models/Product\";\r\nimport { SelectListItem } from \"../models/SelectListItem\";\r\nimport { DiscountSchemeService } from \"./DiscountSchemeService\";\r\n\r\nexport class DataTableService {\r\n\r\n    static createRowFromBid_CartPage(bid: Bid, \r\n        handleChangeQuantity: (newQuantity: number)=>void, \r\n        toggleCheckedRowId: ()=>void,\r\n        deleteBid: ()=>void,\r\n        handleChangeAddress: (event: React.ChangeEvent<any>)=>void,\r\n        ): RowCart {\r\n\r\n        let discountedPrice = bid.discountScheme?.discountedPrice as number;\r\n        let originalPrice = bid.discountScheme?.product?.originalPrice as number;\r\n        let dateString = \"\";\r\n        if (bid.discountScheme?.expiryDate) {\r\n            let date: Date = new Date(bid.discountScheme.expiryDate.toString());\r\n            dateString = date.toDateString();        \r\n        }\r\n        const quantity: number = bid.quantity as number;\r\n\r\n        let row: RowCart = new RowCart();\r\n        row.bidId = bid.bidId;\r\n        row.discountedPrice = `$${discountedPrice} (Save $${originalPrice - discountedPrice})`;\r\n        row.name = bid.discountScheme?.product?.name;\r\n\r\n        const addressBidCountDict = bid.addressBidCountDict as Record<string, number>; \r\n        const numBidsAtAddress: number = addressBidCountDict[bid.collectionAddress];\r\n        const deliveryCharge: number = bid?.discountScheme?.deliveryCharge ?? 0;\r\n        const avgDeliveryCharge: number = (!numBidsAtAddress) ? deliveryCharge : deliveryCharge / (numBidsAtAddress + 1);\r\n        row.deliveryCharge = <Grid container>\r\n            <Grid item xs={6}>\r\n                <span>{`$${avgDeliveryCharge.toString().slice(0, 4)}`}</span>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n                <span style={{borderBottom:\"1px solid black\", display:\"block\", fontSize:\"12px\"}}>${deliveryCharge}</span>\r\n                <span style={{fontSize:\"12px\"}}>{numBidsAtAddress} other bids here</span>\r\n            </Grid>\r\n        </Grid>\r\n\r\n        row.updateCartComponent = <CartButtons quantity={quantity} setQuantity={handleChangeQuantity} size={\"small\"}/>\r\n        row.checkbox = <Checkbox size=\"small\" onChange={toggleCheckedRowId} />\r\n        row.deleteButton = <Button size={\"small\"} variant={\"contained\"} color={\"primary\"} onClick={deleteBid}>Delete</Button>\r\n\r\n        // Collection Address\r\n        const selectListItems: SelectListItem[] = [];\r\n        for (let address in addressBidCountDict) {\r\n            let selectListItem: SelectListItem = new SelectListItem(address, address);\r\n            selectListItem.selected = bid.collectionAddress === address;\r\n            selectListItems.push(selectListItem);\r\n        }        \r\n        row.collectionAddress = <SelectControlledComponent title={\"Delivery\"} state={bid.collectionAddress?.toString()} \r\n            selectListItems={selectListItems} handleChange={handleChangeAddress} />\r\n\r\n        // Detail Panel\r\n        let descriptionDict: Record<string, any> = {\r\n            \"Description\": bid.discountScheme?.product?.description,\r\n            \"Bid Expiry Date\": dateString\r\n        }  \r\n\r\n        let quantityDict: Record<string, any> = {\r\n            \"Min Order Quantity\": bid.discountScheme?.minOrderQnty,\r\n            \"Current total bids\": bid.currentTotalBids,\r\n            \"Remaining bids required\": bid.discountScheme?.minOrderQnty as number - (bid.currentTotalBids as number)\r\n        }\r\n\r\n        let deliveryDict: Record<string, any> = {\r\n            \"Delivery Charge\": \"$\" + bid.discountScheme?.deliveryCharge\r\n        }\r\n        row.detailPanel = <Grid container>\r\n            <Grid item xs={4}>\r\n                <TextComponent textDict={descriptionDict}/>\r\n            </Grid>\r\n            <Grid item xs={4}>\r\n                <TextComponent textDict={quantityDict}/>\r\n            </Grid>\r\n            <Grid item xs={4}>\r\n                <TextComponent textDict={deliveryDict}/>\r\n            </Grid>\r\n        </Grid>\r\n        \r\n        return row;\r\n    }\r\n\r\n    static createRowFromBid_OrdersPage(bid: Bid): RowOrder {\r\n        let discountedPrice: number = bid.discountScheme?.discountedPrice as number;\r\n        let originalPrice: number = bid.discountScheme?.product?.originalPrice as number;\r\n        let minOrderQnty: number = bid.discountScheme?.minOrderQnty as number;\r\n        let currentTotalBids: number = bid.currentTotalBids as number;\r\n    \r\n        let row: RowOrder = new RowOrder();\r\n        row.quantity = bid.quantity + \"\";\r\n        row.collectionAddress = bid.collectionAddress;\r\n        row.discountedPrice = `$${discountedPrice} (Save $${originalPrice - discountedPrice})`;\r\n        row.deliveryCharge = \"$\" + bid.discountScheme?.deliveryCharge;\r\n        row.name = bid.discountScheme?.product?.name;\r\n        row.remainingBidsRequired = minOrderQnty - currentTotalBids;\r\n    \r\n        let expiryDate: Date = new Date(bid.discountScheme?.expiryDate as Date);    //json return date as strings\r\n        row.bidExpiryDate = expiryDate.toDateString();\r\n    \r\n        if (bid.bidSuccessDate != null) {\r\n            row.bidStatus = \"SUCCESS\";        \r\n        } else if (new Date() > expiryDate) {\r\n            row.bidStatus = \"FAILED\";\r\n        } else {\r\n            row.bidStatus = \"PENDING\";\r\n        }\r\n        \r\n        return row;\r\n    }\r\n\r\n    static createRowFromProduct_ProductsPage(product: Product, updateProduct: ()=>void, onDeleteClick: ()=>void): RowProduct {\r\n        let row: RowProduct = new RowProduct();\r\n        row.name = product.name;\r\n        row.originalPrice = \"$\" + product.originalPrice;\r\n        row.category = product.category;\r\n        row.description = product.description;\r\n\r\n        // If product already has schemes, disallow delete\r\n        const isDisableDelete: boolean = product.discountSchemes.length > 0;\r\n        let tooltipMessage: string = isDisableDelete ? \"Cannot delete product as it has dependent discount schemes\" : \"\";\r\n\r\n        row.update = <Button size=\"small\" variant=\"outlined\" onClick={updateProduct}>Update</Button>\r\n        row.delete = <div className=\"tooltip__div-visible\">\r\n            <Button color=\"secondary\" size=\"small\" variant=\"outlined\"  \r\n                disabled={isDisableDelete} \r\n                onClick={onDeleteClick}>Delete\r\n                <span className=\"tooltiptext\">{tooltipMessage}</span>\r\n            </Button> \r\n        </div> \r\n\r\n        return row;\r\n    }\r\n\r\n    static createRowFromScheme_ProducerDiscountSchemePage(ds: DiscountScheme, onNameClick: ()=>void, onDeleteClick: ()=>void): SchemeRow {\r\n        let row: SchemeRow = new SchemeRow();\r\n        if (ds == null) {\r\n            return row;\r\n        }\r\n        \r\n        const discountedPrice = ds.discountedPrice;\r\n        const originalPrice = ds.product?.originalPrice;\r\n        row.discountedPrice = <span>${discountedPrice} <del>${originalPrice}</del></span>\r\n    \r\n        const expiryDate: Date = new Date(ds.expiryDate as Date);\r\n        row.bidExpiryDate = expiryDate.toDateString();\r\n        row.deliveryCharge = \"$\" + ds.deliveryCharge;\r\n        row.currentBids =  ds.bids\r\n            .filter(bid => !bid.isInCart)\r\n            .reduce((accum, bid) => accum + bid.quantity, 0);\r\n    \r\n        row.minOrderQnty = ds.minOrderQnty;\r\n        row.bidStatus = DiscountSchemeService.determineStatusOfScheme(ds);\r\n\r\n        // Disallow deleting of schemes which have bids\r\n        const isDisableDelete: boolean = ds.bids.length > 0;\r\n        let tooltipMessage: string = isDisableDelete ? \"Cannot delete scheme as it has dependent bids\" : \"\";\r\n\r\n        row.name = <Button onClick={onNameClick} size=\"small\" variant=\"outlined\">{ds.product?.name}</Button> ;\r\n        row.delete = <div className=\"tooltip__div-visible\">\r\n            <Button size=\"small\" variant=\"outlined\" color=\"secondary\" disabled={isDisableDelete}\r\n                onClick={onDeleteClick}>Delete\r\n                    <span className=\"tooltiptext\">{tooltipMessage}</span>\r\n                </Button>\r\n        </div> ;\r\n    \r\n        return row;    \r\n    }\r\n    \r\n    \r\n\r\n\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Bid } from \"../models/Bid\";\r\nimport { RootState } from \"../store/rootReducer\";\r\nimport { deleteBidFromCartAsync, getBidsOfCustomerInCartAsync, orderBidsFromCart, updateBidInCartAsync } from \"../store/thunks/bidThunk\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Dispatch } from \"redux\"; \r\nimport { DataTable } from \"../components/shared/DataTable\";\r\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart';\r\nimport { SnackbarComponent } from \"../components/shared/SnackbarComponent\";\r\nimport { Container } from \"@material-ui/core\";\r\nimport { OrderCheckoutComponent } from \"../components/cartPage/OrderCheckoutComponent\";\r\nimport { ACTIONS } from \"../store/actionEnums\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { cloneDeep } from \"lodash\";\r\nimport { DataTableService } from \"../services/DataTableService\";\r\nimport useDeepCompareEffect from \"use-deep-compare-effect\";\r\n\r\nexport class Row {\r\n    bidId: number | undefined;\r\n    checkbox: JSX.Element | undefined;\r\n    name: string | undefined;\r\n    discountedPrice: string | undefined;\r\n    updateCartComponent: JSX.Element | undefined;    \r\n    collectionAddress: JSX.Element | undefined;\r\n    deliveryCharge: JSX.Element | undefined;\r\n    deleteButton: JSX.Element | undefined;\r\n    detailPanel: JSX.Element | undefined;\r\n}\r\n\r\nexport function CartPage(): JSX.Element {\r\n    const history = useHistory();          \r\n    const dispatch: Dispatch<any> = useDispatch(); \r\n\r\n    // State to determine whether to show notification\r\n    const [open, setOpen] = useState(false);\r\n    const [notificationMessage, setNotificationMessage] = useState(\"\");\r\n    const handleNotification = (isOpen: boolean, message: string) => {\r\n        setOpen(isOpen);\r\n        setNotificationMessage(message);\r\n    }    \r\n\r\n    // The Bids received from the GET request\r\n    const bidsInCart: Bid[] = useSelector((action: RootState) => action.bidReducer.bids as Bid[] ) ?? [];  \r\n    const [bids, setBids] = useState<Bid[]>([]);\r\n    useDeepCompareEffect(() => {\r\n        setBids(cloneDeep(bidsInCart));\r\n        \r\n    }, [bidsInCart]);  \r\n\r\n    // For some reason, useState(bidsInCart.map(bid => bid.quantity)) will produce only an empty array\r\n    // React hooks are always one step behind. On next render, the state variable will have a new value.\r\n    useEffect(() => {\r\n        document.title = \"Cart\";\r\n        const customerId = 1;\r\n        const action = getBidsOfCustomerInCartAsync(customerId);\r\n        dispatch(action);        \r\n    }, [dispatch]); \r\n\r\n    // When the user selects the row (Bid) in the datatable\r\n    const [selectedRowBidIds, setSelectedRowBidIds] = useState<number[]>([]);\r\n    const handleOrder = () => {\r\n        let bidsToOrder: Bid[] = bids.filter(bid => selectedRowBidIds.includes(bid.bidId));\r\n        const action = orderBidsFromCart(bidsToOrder);\r\n        dispatch(action);\r\n    };\r\n\r\n    //Response on update. If update is successful, make another request to get bids in cart\r\n    const apiMessage: string = useSelector( (action: RootState) => action.bidReducer.httpMessage as string ) ?? \"\"; \r\n    useEffect(() => {\r\n\r\n        // if user successfully makes an order, redirect to orders page\r\n        if (apiMessage.includes(ACTIONS.HTTP_UPDATE_ORDER_SUCCESS)) {\r\n            history.push(\"/orders\");\r\n        }\r\n    }, [apiMessage, history]);\r\n\r\n    // Convert the Bids to Rows to pass to the DataTable\r\n    // const rows: Row[] = bids.map(bid => createRowFromBid(bid));\r\n    let rows: Row[] = [];    \r\n\r\n    // To add React components to each row\r\n    for (let i = 0; i < bids.length; i++) {\r\n        let bid: Bid = bids[i];       \r\n\r\n        // Method reference to POST updated id to pass into CartButtons\r\n        const handleUpdateCart = (newQuantity: number, collectionAddress: string) => {\r\n            let bidsCopy: Bid[] = cloneDeep(bidsInCart);    \r\n            let bidCopy = bidsCopy[i];\r\n            bidCopy.quantity = newQuantity;\r\n            bidCopy.collectionAddress = collectionAddress;\r\n            setBids(bidsCopy);\r\n            const updateAction = updateBidInCartAsync(bidCopy);\r\n            dispatch(updateAction);\r\n            handleNotification(true, \"bid added to cart\"); \r\n        }\r\n\r\n        // Method reference to set quantity to pass into CartButtons\r\n        const handleChangeQuantity = (newQuantity: number) => {\r\n            handleUpdateCart(newQuantity, bid.collectionAddress);            \r\n        };\r\n\r\n        const handleChangeAddress = (event: React.ChangeEvent<any>) => {\r\n            let selectedAddress: string = event.target.value;\r\n            handleUpdateCart(bid.quantity, selectedAddress);\r\n        }\r\n\r\n        const toggleCheckedRowId = () => {\r\n            const bidId: number = bid.bidId;\r\n            if (!selectedRowBidIds.includes(bidId)) {\r\n                setSelectedRowBidIds([...selectedRowBidIds, bidId])\r\n            } else {\r\n                let newSelectedRowIds: number[] = selectedRowBidIds.filter(id => id !== bidId);\r\n                setSelectedRowBidIds(newSelectedRowIds);\r\n            }\r\n        }\r\n\r\n        const deleteBid = () => {\r\n            const bidId: number = bid.bidId;\r\n            const deleteAction = deleteBidFromCartAsync(bidId);            \r\n            dispatch(deleteAction);\r\n            handleNotification(true, \"item deleted\");\r\n            let newBids = cloneDeep(bids).filter((bid, index) => index !== i);\r\n            setBids(newBids);\r\n        } \r\n\r\n        let row: Row = DataTableService.createRowFromBid_CartPage(bid, handleChangeQuantity, toggleCheckedRowId, deleteBid, handleChangeAddress);\r\n        rows.push(row);\r\n        \r\n    }\r\n\r\n    let accessors: string[] = Object.keys(new Row());   // accessors allow the DataTable to access the properties of the Row object. \r\n    const detailPanelName: string = \"detailPanel\";  // Remove access to detailPanel property\r\n    accessors = accessors.filter(accessor => accessor !== detailPanelName);\r\n    const columnNames: any[] = [\"BidId\", \"Check Box\", \"Name\", \"Price per Item\", \"Quantity\", \"Collection Address\", \"Average Delivery Charge\", \"Remove\"];\r\n\r\n    return <Container maxWidth=\"xl\">\r\n        <OrderCheckoutComponent bids={bids} rowIds={selectedRowBidIds} handleOrder={handleOrder} />\r\n        <br/>\r\n        <DataTable data={rows} columnNames={columnNames} accessors={accessors} title=\"Cart\" \r\n            idColumnAccessorName={\"bidId\"}             \r\n            actionMessage=\"Make Order\"  actionIcon={AddShoppingCartIcon}  \r\n            enabledDetailPanel={true} detailPanelFieldName={detailPanelName} />\r\n        <SnackbarComponent open={open} setOpen={setOpen} message={notificationMessage} severity={\"success\"}/>        \r\n    </Container>\r\n}\r\n ","import React from \"react\";\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Controller, Control, DeepMap, FieldError } from \"react-hook-form\";\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\n\r\ninterface IProp {\r\n    label: string,\r\n    name: string,\r\n    errorMessage?: string,\r\n    defaultValue?: string,\r\n    control: Control<Record<string, any>>,\r\n    errors: DeepMap<Record<string, any>, FieldError>,\r\n    rules: object,\r\n    isFullWidth?: boolean,\r\n    adornment?: string | null,\r\n    variant?: \"outlined\" | \"filled\" | \"standard\",\r\n    type?: \"text\" | \"number\" | \"password\"\r\n}\r\n\r\nexport function TextFieldUncontrolledComponent({ label, name, defaultValue=\"\", \r\n    isFullWidth=false, variant=\"standard\", type=\"text\",\r\n    adornment=null,\r\n    control, errors, \r\n    errorMessage=\"\", rules={}}: IProp): JSX.Element {\r\n    let isError: boolean = errors[name] != null;\r\n    let helperText: string = isError ? errorMessage : \"\";\r\n\r\n    return <div>\r\n        <Controller\r\n            name={name}\r\n            defaultValue={defaultValue}\r\n            control={control}\r\n            rules={rules}\r\n            render={props => <TextField {...props} label={label} error={isError} helperText={helperText} \r\n                fullWidth={isFullWidth} variant={variant} type={type}\r\n                InputProps={{\r\n                    startAdornment: adornment ? <InputAdornment position=\"start\">{adornment}</InputAdornment> : null\r\n                }}\r\n            />} \r\n        />  \r\n    </div> \r\n}","import React, { useEffect } from \"react\";\r\nimport { Container, Grid, TextField } from \"@material-ui/core\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Dispatch } from \"redux\"; \r\nimport { Product } from \"../models/Product\";\r\nimport { RootState } from \"../store/rootReducer\";\r\nimport { getProductsAsync } from \"../store/thunks/productThunk\";\r\nimport { useForm, Controller } from \"react-hook-form\";\r\nimport Button from '@material-ui/core/Button';\r\nimport { DiscountScheme } from \"../models/DiscountScheme\";\r\nimport { TextComponent } from \"../components/shared/TextComponent\";\r\nimport { createDiscountSchemeAsync } from \"../store/thunks/discountSchemeThunk\";\r\nimport { ACTIONS } from \"../store/actionEnums\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\nimport { TextFieldUncontrolledComponent } from \"../components/shared/TextFieldComponents\";\r\nimport { DatePickerUncontrolledComponent } from \"../components/shared/DatePickerComponent\";\r\n\r\nenum FORM_NAMES {\r\n    productId = \"productId\",\r\n    discountedPrice = \"discountedPrice\",\r\n    minOrderQnty = \"minOrderQnty\",\r\n    deliveryCharge = \"deliveryCharge\",\r\n    expiryDate = \"expiryDate\"\r\n}\r\n\r\nexport function DiscountSchemeForm(): JSX.Element {\r\n    document.title = \"Create Discount Scheme\";\r\n\r\n    const dispatch: Dispatch<any> = useDispatch(); \r\n    const history = useHistory();  \r\n\r\n    const products: Product[] = useSelector((action: RootState) => action.productReducer.products as Product[] ) ?? [];  \r\n\r\n    useEffect(() => {\r\n        const producerId: number = 2;\r\n        const action = getProductsAsync(producerId);\r\n        dispatch(action);\r\n    }, [dispatch]);  \r\n\r\n    // React hook form - uncontrolled state that uses useRef behind the scenes\r\n    const { errors, handleSubmit, control, getValues, watch } = useForm();    \r\n\r\n    const watchProductId: number = watch(FORM_NAMES.productId, 0);\r\n    const selectedProduct: Product = products.find(product => product.productId === watchProductId) ?? new Product();\r\n    const productTextDict: Record<string, any> = {\r\n        \"Original Price\": \"$\" + selectedProduct.originalPrice,\r\n        \"Description\": selectedProduct.description\r\n    }\r\n\r\n    const onSubmit = (data: any) => {\r\n        const {productId, discountedPrice, minOrderQnty, deliveryCharge, expiryDate} = getValues([FORM_NAMES.productId, FORM_NAMES.discountedPrice, \r\n            FORM_NAMES.minOrderQnty, FORM_NAMES.deliveryCharge, FORM_NAMES.expiryDate]);\r\n        const discountScheme: DiscountScheme = createDiscountScheme(productId, minOrderQnty, discountedPrice, expiryDate, deliveryCharge);\r\n        const action = createDiscountSchemeAsync(discountScheme);\r\n        dispatch(action);\r\n    }   \r\n\r\n    // If create is successful, redirect\r\n    const apiMessage: string = useSelector( (action: RootState) => action.discountSchemeReducer.httpMessage as string ) ?? \"\"; \r\n    useEffect(() => {\r\n        if (apiMessage.includes(ACTIONS.HTTP_CREATE_SUCCESS)) {\r\n            history.push(\"/producer/discountSchemes\");\r\n        }\r\n    }, [apiMessage, history]);\r\n\r\n    // Redirect to product form if user decides to create new product\r\n    const redirectToProductForm = () => history.push(\"/producer/product/\" + 0);\r\n\r\n    return <Container maxWidth=\"md\">\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n            \r\n            <Grid container justify=\"flex-start\">\r\n                <Grid item xs={4}>\r\n                    <Controller                     \r\n                        control={control}\r\n                        name={FORM_NAMES.productId}                \r\n                        rules={{\"required\": true }}\r\n                        render={({onChange}: any) =>  <Autocomplete\r\n                                id=\"combo-box-demo\"\r\n                                options={products}\r\n                                getOptionLabel={(option: Product) => option.name ?? \"\"}\r\n                                style={{ width: 300 }} \r\n                                onChange={(event: any, data) => onChange((data as Product).productId)}                                \r\n                                renderInput={(params) => <TextField {...params} label=\"Products\" variant=\"outlined\" />}  \r\n                                />\r\n                        }\r\n                    />\r\n                    {errors[\"productId\"] &&\r\n                        <p style={{fontSize: \"14px\", color: \"red\", textAlign: \"left\"}}>Product is required</p>                                            \r\n                    }\r\n                \r\n                    {/* <SelectUncontrolledComponent title={\"Choose Product\"} selectListItems={selectListItems} name={FORM_NAMES.productId} errorMessage=\"Scheme is required\"\r\n                        control={control} errors={errors} rules={{required: true}} /> */}\r\n                </Grid>                \r\n                <Grid item xs={3} alignItems=\"flex-end\">\r\n                    <Button onClick={redirectToProductForm} variant=\"outlined\" size=\"small\" style={{bottom: \"-30%\"}} >Or create one</Button>\r\n                </Grid>\r\n                <EmptyGridRow />\r\n\r\n                { watchProductId > 0 &&\r\n                    <Grid item xs={12}>\r\n                        <TextComponent textDict={productTextDict}  color={\"textSecondary\"} />\r\n                    </Grid>\r\n                }\r\n                <EmptyGridRow />\r\n\r\n                <Grid item xs={12}>\r\n                    <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.discountedPrice} label={\"Discounted Price\"} errorMessage={\"Discounted Price is required\"} \r\n                        rules={{required: true, min: 1}} adornment={\"$\"} />\r\n                </Grid>\r\n                <EmptyGridRow />\r\n\r\n                <Grid item xs={12}>\r\n                    <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.minOrderQnty} label={\"Minimum order quantity\"} errorMessage={\"Minimum order quantity is required\"} \r\n                        rules={{required: true, min: 1}} />\r\n                </Grid>\r\n                <EmptyGridRow />\r\n\r\n                <Grid item xs={12}>\r\n                    <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.deliveryCharge} label={\"Delivery Charge\"} errorMessage={\"Delivery Charge is required\"} \r\n                        rules={{required: true, min: 1}} adornment={\"$\"} />        \r\n                </Grid>\r\n                <EmptyGridRow />\r\n\r\n                <Grid item xs={2}>\r\n                    <DatePickerUncontrolledComponent label={\"Expiry Date\"} name={FORM_NAMES.expiryDate} \r\n                        control={control} errors={errors} rules={{required: true}} errorMessage={\"Expiry Date is required\"} />\r\n                </Grid>\r\n                <EmptyGridRow />\r\n\r\n                <Grid item xs={12}>\r\n                    <Button variant=\"contained\" color=\"primary\" type=\"submit\">\r\n                        Submit\r\n                    </Button> \r\n                </Grid>\r\n                <EmptyGridRow />\r\n\r\n            </Grid>            \r\n                        \r\n        </form>\r\n    </Container>\r\n}\r\n\r\nfunction createDiscountScheme(productId: number, minOrderQnty: number, discountedPrice: number, expiryDate: Date, deliveryCharge: number): DiscountScheme {\r\n    let discountScheme: DiscountScheme = new DiscountScheme();\r\n    discountScheme.productId = productId;\r\n    discountScheme.minOrderQnty = minOrderQnty;\r\n    discountScheme.discountedPrice = discountedPrice;\r\n    discountScheme.expiryDate = expiryDate;\r\n    discountScheme.deliveryCharge = deliveryCharge;\r\n\r\n    return discountScheme;\r\n}\r\n\r\nfunction EmptyGridRow(): JSX.Element {\r\n    return <Grid item xs={12}><br/></Grid>;\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Dispatch } from \"redux\"; \r\nimport { useParams } from \"react-router-dom\";\r\nimport { Container, Grid } from \"@material-ui/core\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { Product } from \"../models/Product\";\r\nimport { createProductsAsync, getProductAsync, updateProductAsync } from \"../store/thunks/productThunk\";\r\nimport { RootState } from \"../store/rootReducer\";\r\nimport Button from '@material-ui/core/Button';\r\nimport { ACTIONS } from \"../store/actionEnums\";\r\nimport { useState } from \"react\";\r\nimport { SnackbarComponent } from \"../components/shared/SnackbarComponent\";\r\nimport { TextFieldUncontrolledComponent } from \"../components/shared/TextFieldComponents\";\r\nimport useDeepCompareEffect from \"use-deep-compare-effect\";\r\n\r\nenum FORM_NAMES {\r\n    productId = \"productId\",\r\n    name = \"name\",\r\n    category = \"category\",\r\n    description = \"description\",\r\n    originalPrice = \"originalPrice\"\r\n}\r\n\r\ntype FORM_DATA = {\r\n    \"productId\" : number,\r\n    \"name\": string;\r\n    \"category\": string;\r\n    \"description\": string;\r\n    \"originalPrice\": number;\r\n}\r\n\r\n\r\n// User can either Create or Update the product\r\ntype MODE = \"CREATE\" | \"UPDATE\";\r\n\r\nexport function ProductForm(): JSX.Element {\r\n    document.title = \"Product Form\";\r\n    const dispatch: Dispatch<any> = useDispatch();\r\n\r\n    // If creating, route param is set to 0. If update, route param is set to existing productId\r\n    let routeParams: Record<string, string>  = (useParams()) as Record<string, string>;    \r\n    const productId: number = parseInt(routeParams[\"productId\"]); \r\n    const mode: MODE = productId === 0 ? \"CREATE\" : \"UPDATE\";\r\n\r\n    let productToUpdate: Product = useSelector((action: RootState) => action.productReducer.product as Product ) ?? new Product();\r\n\r\n    useEffect(() => {\r\n        if (mode === \"UPDATE\") {\r\n            const action = getProductAsync(productId);\r\n            dispatch(action);\r\n        }   \r\n    }, [productId, dispatch, mode]);   \r\n\r\n    const { errors, handleSubmit, control, reset, setValue } = useForm<FORM_DATA>(); \r\n\r\n    useDeepCompareEffect(() => {\r\n        if (mode === \"UPDATE\") {\r\n            setValue(FORM_NAMES.productId, productToUpdate.productId);\r\n            setValue(FORM_NAMES.name, productToUpdate.name);\r\n            setValue(FORM_NAMES.category, productToUpdate.category);\r\n            setValue(FORM_NAMES.description, productToUpdate.description);\r\n            setValue(FORM_NAMES.originalPrice, productToUpdate.originalPrice);\r\n        }\r\n    }, [productToUpdate, mode, setValue])\r\n    \r\n    \r\n\r\n    const onSubmit = (data: any) => {\r\n\r\n        const {productId, name, category, description, originalPrice} = data;        \r\n        //getValues([FORM_NAMES.productId, FORM_NAMES.name, FORM_NAMES.category, FORM_NAMES.description, FORM_NAMES.originalPrice]);\r\n        const product = initializeProduct(productId, name, category, description, originalPrice);\r\n        if (mode === \"CREATE\") {\r\n            const action = createProductsAsync(product);\r\n            dispatch(action);\r\n            reset({});\r\n        } else if (mode === \"UPDATE\") {\r\n            product.producerId = productToUpdate.producerId;\r\n            const action = updateProductAsync(productId, product);\r\n            dispatch(action);\r\n            //reset(product);\r\n        }                \r\n    };\r\n    \r\n    const [openSnackbar, setOpenSnackbar] = useState<boolean>(false);\r\n    const apiMessage: string = useSelector( (action: RootState) => action.productReducer.httpMessage as string ) ?? \"\"; \r\n    useEffect(() => {\r\n        if (apiMessage.includes(ACTIONS.HTTP_CREATE_SUCCESS) || apiMessage.includes(ACTIONS.HTTP_UPDATE_SUCCESS)) {\r\n            setOpenSnackbar(true);\r\n        }        \r\n    }, [apiMessage]);\r\n\r\n    return <Container maxWidth=\"md\">\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n            <GridRow display=\"none\" component={\r\n                <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.productId} label={\"Product Id\"} \r\n                    rules={{required: false}}  />\r\n            }/>\r\n            \r\n            <GridRow component={\r\n                <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.name} label={\"Name\"} \r\n                    rules={{required: true}} errorMessage=\"Name is required\" />\r\n            }/>\r\n\r\n            <GridRow component={\r\n                <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.originalPrice} label={\"Original Price\"} \r\n                    rules={{required: true, min: 1}} adornment={\"$\"} errorMessage=\"Original Price is required\" />\r\n            } />\r\n\r\n            <GridRow component={\r\n                <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.category} label={\"Category\"} \r\n                    rules={{required: false}} />\r\n            }/>\r\n\r\n            <GridRow component={\r\n                <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.description} label={\"Description\"} \r\n                    rules={{required: false}}  />\r\n            }/>                          \r\n\r\n            <Button variant=\"contained\" color=\"primary\" type=\"submit\">\r\n                Submit\r\n            </Button> \r\n\r\n        </form>\r\n        <SnackbarComponent open={openSnackbar} setOpen={setOpenSnackbar} severity={\"success\"} message={mode + \" is successful!\"}/>\r\n    </Container>\r\n}\r\n\r\ninterface IRowProp {\r\n    component: JSX.Element,\r\n    display?: \"initial\" | \"none\"\r\n}\r\nfunction GridRow({component, display=\"initial\"}: IRowProp): JSX.Element {\r\n    return <div>\r\n        <Grid item xs={12} style={{display: display}}>\r\n            {component}\r\n        </Grid>\r\n        <Grid item xs={12}><br/></Grid>\r\n    </div>;\r\n}\r\n\r\nfunction initializeProduct(productId: number, name: string, category: string, description: string, originalPrice: number): Product {\r\n    let product: Product = new Product();\r\n    product.productId = productId > 0 ? productId : 0;  //When creating product, productId is set to null from react hook form\r\n    product.name = name;\r\n    product.category = category;\r\n    product.description = description;\r\n    product.originalPrice = originalPrice;\r\n    product.producerId = 2;\r\n    return product;\r\n}\r\n ","import React from \"react\";\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport { MuiPickersUtilsProvider, KeyboardDatePicker} from '@material-ui/pickers';\r\nimport { v4 as guid } from 'uuid';\r\nimport { Control, Controller, DeepMap, FieldError } from \"react-hook-form\";\r\n\r\ninterface IPropUncontrolled {\r\n    label: string,\r\n    name: string,\r\n    errorMessage?: string,\r\n    defaultValue?: string,\r\n    control: Control<Record<string, any>>,\r\n    errors: DeepMap<Record<string, any>, FieldError>,\r\n    rules?: object,\r\n}\r\n\r\nexport function DatePickerUncontrolledComponent({ control, errors, label, name, defaultValue=\"\", errorMessage=\"\", rules={}}: IPropUncontrolled): JSX.Element {\r\n    let isError: boolean = errors[name] != null;\r\n    let helperText: string = isError ? errorMessage : \"\";\r\n    return <Controller\r\n        name={name}\r\n        defaultValue={defaultValue}\r\n        control={control}\r\n        rules={rules}\r\n        render={props => <DatePickerControlledComponent {...props} label={label} error={isError} helperText={helperText} />} // props contains: onChange, onBlur and value\r\n    />  \r\n}\r\n\r\ninterface IPropControlled {\r\n    onChange: () => void;\r\n    label: string;\r\n    value: Date;\r\n    error?: boolean;\r\n    helperText?: string\r\n}\r\n\r\nexport function DatePickerControlledComponent({label, onChange, value, error=false, helperText=\"\"}: IPropControlled): JSX.Element {\r\n\r\n    if (!value) {\r\n        value = new Date();\r\n    }\r\n    return <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <KeyboardDatePicker\r\n            error={error}\r\n            helperText={helperText}\r\n            disableToolbar\r\n            variant=\"inline\"\r\n            format=\"dd/MM/yyyy\"\r\n            margin=\"normal\"\r\n            id={guid()}\r\n            label={label}\r\n            value={value }\r\n            onBlur={null}\r\n            onFocus={null}            \r\n            onChange={onChange}\r\n            />\r\n    </MuiPickersUtilsProvider>\r\n}\r\n\r\n// KeyboardButtonProps={{\r\n//     'aria-label': 'change date',\r\n// }} ","export class IdentityUser {\r\n    userName: string = \"\";\r\n    passwordHash: string = \"\";\r\n}","export enum Claims {\r\n    PRODUCER = \"PRODUCER\",\r\n    CONSUMER = \"CONSUMER\",\r\n}\r\n\r\n\r\nexport class AuthVM {\r\n    jwt: string = \"\";\r\n    isAuthenticated: boolean | \"UNTOUCHED\" = false;\r\n    id: string = \"\";\r\n    userName: string = \"\";\r\n    email: string = \"\";\r\n    claims: string[] = []\r\n\r\n    constructor(userName=\"\") {\r\n        this.userName = userName;\r\n    }\r\n}\r\n","import React, { useEffect, useState } from \"react\";\r\nimport { Button, Container, Grid } from \"@material-ui/core\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { IdentityUser } from \"../models/IdentityUser\";\r\nimport { loginAsync } from \"../store/thunks/authThunk\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Dispatch } from \"redux\"; \r\nimport { AuthVM } from \"../models/AuthVM\";\r\nimport { RootState } from \"../store/rootReducer\";\r\nimport { SnackbarComponent } from \"../components/shared/SnackbarComponent\"; \r\nimport { TextFieldUncontrolledComponent } from \"../components/shared/TextFieldComponents\";\r\n\r\nenum FORM_NAMES {\r\n    userName = \"userName\",\r\n    passwordHash = \"passwordHash\"\r\n}\r\n\r\ntype FORM_DATA = {\r\n    \"userName\" : string,\r\n    \"passwordHash\": string;\r\n}\r\n\r\n\r\nexport function LoginForm(): JSX.Element {\r\n    document.title = \"Login\";\r\n    const dispatch: Dispatch<any> = useDispatch();\r\n    const history = useHistory();\r\n\r\n    let [openSnackBar, setOpenSnackBar] = useState<boolean>(false);\r\n\r\n    let defaultAuthVM = new AuthVM();\r\n    defaultAuthVM.isAuthenticated = \"UNTOUCHED\";\r\n\r\n    let authVM: AuthVM = useSelector((action: RootState) => action.authReducer.authVM) ?? defaultAuthVM;\r\n\r\n    useEffect(() => { \r\n        if (authVM.isAuthenticated === \"UNTOUCHED\") {\r\n            return;\r\n        }\r\n\r\n        if (authVM.isAuthenticated) {\r\n            history.push(\"\");\r\n        } else {\r\n            setOpenSnackBar(true);\r\n        }\r\n    }, [authVM.isAuthenticated, history]);\r\n  \r\n\r\n    const { errors, handleSubmit, control } = useForm<FORM_DATA>(); \r\n\r\n    const onSubmit = (data: FORM_DATA) => {\r\n        let identityUser: IdentityUser = new IdentityUser();\r\n        identityUser.userName = data.userName;\r\n        identityUser.passwordHash = data.passwordHash;\r\n\r\n        const action = loginAsync(identityUser);\r\n        dispatch(action);\r\n\r\n    }\r\n\r\n    return <Container>\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n            <GridRow component={\r\n                <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.userName} label={\"UserName\"} \r\n                    variant=\"outlined\"\r\n                    rules={{required: true}} errorMessage=\"Name is required\" />\r\n            }/>\r\n            \r\n            <GridRow component={\r\n                <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.passwordHash} label={\"Password\"} \r\n                    variant=\"outlined\" type=\"password\"\r\n                    rules={{required: true}} errorMessage=\"Password is required\" />\r\n            }/>\r\n                        \r\n\r\n            <Button variant=\"contained\" color=\"primary\" type=\"submit\">\r\n                Submit\r\n            </Button> \r\n\r\n        </form>\r\n        <SnackbarComponent open={openSnackBar} setOpen={setOpenSnackBar} message=\"Authentication failed\" severity=\"error\"/>\r\n    </Container>\r\n}\r\n\r\ninterface IRowProp {\r\n    component: JSX.Element,\r\n    display?: \"initial\" | \"none\"\r\n}\r\n\r\nfunction GridRow({component, display=\"initial\"}: IRowProp): JSX.Element {\r\n    return <div>\r\n        <Grid item xs={12}>\r\n            {component}\r\n        </Grid>\r\n        <Grid item xs={12}><br/></Grid>\r\n    </div>;\r\n}","import { ThunkAction, ThunkDispatch } from \"@reduxjs/toolkit\";\r\nimport { Action } from \"redux\";\r\nimport { ApiError } from \"../../models/ApiError\";\r\nimport { AuthVM } from \"../../models/AuthVM\";\r\nimport { IdentityUser } from \"../../models/IdentityUser\";\r\nimport { UtilService } from \"../../services/UtilService\";\r\nimport { ACTIONS } from \"../actionEnums\";\r\nimport { errorAction, IErrorAction } from \"../actions/errorAction\";\r\n\r\nexport interface IAuthAction extends Action {\r\n    type: string;\r\n    identityUser?: IdentityUser | undefined;\r\n    message?: string; // All internal messages and for response messages received on GET request \r\n    authVM?: AuthVM;\r\n    httpMessage?: string; // For API messages\r\n\r\n}\r\n\r\n export function loginAsync(identityUser: IdentityUser): ThunkAction<Promise<void>, {}, {}, IAuthAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IAuthAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.LOGIN_REQUEST, message: \"Attempting login...\"});\r\n\r\n        try {\r\n            const response: Response = await fetch(UtilService.getApiUrl() + \"auth/signIn\", {\r\n                method: \"POST\",\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(identityUser)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            // If authentication succeeds, server sends authVM. Otherwise, AuthenticationException raised\r\n            let authVM: AuthVM = await response.json();\r\n            console.log(\"IAuthVM\", authVM);\r\n\r\n            if (authVM.isAuthenticated === false) {\r\n                authVM.userName = \"ACCOUNT\";\r\n                dispatch({ type: ACTIONS.LOGIN_FAILED,\r\n                    authVM: authVM,\r\n                    message: response.statusText,  \r\n                    httpMessage: ACTIONS.HTTP_UPDATE_SUCCESS \r\n                });\r\n              return;\r\n            }\r\n\r\n            dispatch({ type: ACTIONS.LOGIN_SUCCESS, \r\n                authVM: authVM,\r\n                message: response.statusText,  \r\n                httpMessage: ACTIONS.HTTP_UPDATE_SUCCESS \r\n            });\r\n        } catch(error) {          \r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }        \r\n        \r\n    }\r\n}\r\n\r\nexport function logoutSync(): IAuthAction {\r\n    let authVM: AuthVM = new AuthVM(\"ACCOUNT\");\r\n    authVM.isAuthenticated = \"UNTOUCHED\";\r\n    return { type: ACTIONS.LOGOUT, message: \"Logout ...\", authVM: authVM}; \r\n}\r\n","import { Container } from \"@material-ui/core\";\r\nimport React from \"react\";\r\n\r\nexport function ErrorPage(): JSX.Element {\r\n    return <Container>\r\n        <h2>An error occured</h2>\r\n    </Container>\r\n}","import React, { Fragment, FunctionComponent, useEffect, useState } from \"react\";\r\nimport { NavLink, Route, useHistory } from 'react-router-dom';\r\nimport { ErrorPage } from \"../../containers/ErrorPage\";\r\nimport { AuthVM } from \"../../models/AuthVM\";\r\nimport { SnackbarComponent } from \"../shared/SnackbarComponent\";\r\n\r\ninterface IProp {\r\n    component: FunctionComponent;\r\n    path: string;\r\n    requiredClaims?: string[];\r\n}\r\n\r\nexport function PrivateRoute({component, path, requiredClaims=[]}: IProp): JSX.Element {    \r\n\r\n    let authVM: AuthVM = new AuthVM();\r\n\r\n    if (localStorage.getItem(\"authVM\")) {\r\n        authVM = JSON.parse(localStorage.getItem(\"authVM\") as string);\r\n    }\r\n     \r\n    let isAuthenticated: boolean = authVM.isAuthenticated === true ? true : false;\r\n    let claims: string[] = authVM.claims;\r\n    let history = useHistory();\r\n\r\n    if (!isAuthenticated) {\r\n        history.push(\"/login\");\r\n    }\r\n\r\n    let [openSnackBar, setOpenSnackBar] = useState<boolean>(false);\r\n\r\n    let isAuthorized: boolean = requiredClaims.every(requiredClaim => claims.includes(requiredClaim));\r\n\r\n    let linkToLoginForm: JSX.Element = <Fragment>\r\n        <span>Not Authorized </span>\r\n        <NavLink to=\"/login\" style={{color: \"white\"}}><b>Click here to login</b></NavLink>\r\n    </Fragment> \r\n\r\n    useEffect(() => {\r\n        if (!isAuthorized) {\r\n            setOpenSnackBar(true);\r\n            return;\r\n            // history.push(\"/login\");\r\n        }\r\n    }, [isAuthorized]);\r\n\r\n    \r\n\r\n    return <Fragment>\r\n        {  isAuthorized\r\n            ? <Route path={path} component= { component } />\r\n            : <ErrorPage />\r\n        }        \r\n        <SnackbarComponent open={openSnackBar} setOpen={setOpenSnackBar} message={linkToLoginForm} severity=\"warning\" autoHideDuration={10000}/>\r\n    </Fragment>\r\n     \r\n}","export enum CLAIMS {\r\n    PRODUCER = \"PRODUCER\",\r\n    CONSUMER = \"CONSUMER\"\r\n}","import React, { Dispatch, Fragment, useEffect } from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles'; \r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\nimport Button from '@material-ui/core/Button';\r\nimport { Navbar, Nav, NavDropdown, DropdownButton } from 'react-bootstrap';\r\nimport \"./NavBar.css\";\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { AuthVM } from '../../models/AuthVM';\r\nimport { CLAIMS } from '../../enums/Claims';\r\nimport { ACTIONS } from '../../store/actionEnums';\r\nimport { RootState } from '../../store/rootReducer';\r\nimport { logoutSync } from '../../store/thunks/authThunk';\r\n\r\n\r\nexport function NavBar() {\r\n  \r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const dispatch: Dispatch<any> = useDispatch(); \r\n\r\n  let authVM: AuthVM = useSelector((action: RootState) => action.authReducer.authVM) ?? new AuthVM(\"ACCOUNT\");\r\n\r\n  let logoutMessage: string = useSelector((action: RootState) => action.authReducer.message) ?? \"\";\r\n\r\n  // When user refresh window, reducer state resets\r\n  // Retrieve again from localstorage\r\n  if (localStorage.getItem(\"authVM\")) {\r\n    authVM = JSON.parse( localStorage.getItem(\"authVM\") as string );\r\n  } \r\n\r\n  const logout = () => {\r\n    const action = logoutSync();\r\n    dispatch(action);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (logoutMessage === ACTIONS.LOGOUT_SUCCESS) {\r\n      history.push(\"/login\");\r\n    }\r\n  }, [logoutMessage, history])\r\n\r\n  return (\r\n    <div>\r\n      <Navbar expand=\"lg\" variant=\"dark\" className={classes.blueBg}>\r\n          <Navbar.Brand><NavLink to=\"/\" className={classes.navLink} >BulkApi</NavLink></Navbar.Brand>\r\n          <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n          <Navbar.Collapse id=\"basic-navbar-nav\">\r\n              <Nav className=\"mr-auto\">\r\n\r\n                {/* Consumer NavBar */}\r\n                { authVM.claims?.includes(CLAIMS.CONSUMER) &&\r\n\r\n                  <Fragment>\r\n                    <Button color=\"inherit\" ><NavLink to=\"/\" className={classes.navLink} >Products</NavLink></Button>\r\n                    <Button color=\"inherit\"><NavLink to=\"/cart\" className={classes.navLink}>Cart</NavLink></Button>\r\n                    <Button color=\"inherit\"><NavLink to=\"/orders\" className={classes.navLink}>Orders</NavLink></Button>\r\n                  </Fragment>\r\n                }\r\n              \r\n                {/* Producer NavBar */}\r\n                { authVM.claims?.includes(CLAIMS.PRODUCER) &&\r\n                  <Fragment>\r\n                    <Button color=\"inherit\"><NavLink to=\"/producer/discountSchemes\" className={classes.navLink} >Schemes</NavLink></Button>\r\n                    <Button color=\"inherit\"><NavLink to=\"/producer/products\" className={classes.navLink} >Products</NavLink></Button>                    \r\n                  </Fragment>\r\n                }\r\n                \r\n              </Nav>\r\n\r\n              {/* Authentication DropDown */}\r\n              <DropdownButton alignRight title={authVM.userName}>\r\n              { authVM.isAuthenticated\r\n                ? <NavDropdown.Item >\r\n                    <Nav.Link as={NavLink} onClick={logout} to=\"/login\" style={{color: \"black\"}}>LOGOUT</Nav.Link>\r\n                  </NavDropdown.Item> \r\n                : <NavDropdown.Item >\r\n                  <Nav.Link as={NavLink} to=\"/login\" style={{color: \"black\"}}>LOGIN</Nav.Link>\r\n                </NavDropdown.Item> \r\n              }\r\n              </DropdownButton>\r\n                  \r\n                       \r\n                \r\n          </Navbar.Collapse>\r\n          \r\n      </Navbar>\r\n      <br/>\r\n    </div>\r\n  );\r\n}\r\n \r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    navLink: {\r\n        color: \"white\",\r\n        textDecoration: \"inherit\",        \r\n    },\r\n    blueBg: {\r\n      backgroundColor: \"#3f51b5\",\r\n      textDecoration: \"inherit\", \r\n    },\r\n    dropDownLink: {\r\n      color: \"black\",\r\n      textDecoration: \"inherit\",\r\n    }\r\n  }),\r\n);\r\n","import { DiscountScheme } from \"./DiscountScheme\";\r\n\r\nexport class Bid {\r\n    bidId: number = 0;\r\n    isInCart: boolean = false;\r\n    quantity: number = 0;\r\n    bidSuccessDate: Date | null = null;\r\n\r\n    collectionAddress: string = \"\";\r\n\r\n    discountSchemeId: number = 0;\r\n    discountScheme: DiscountScheme | null = null;\r\n\r\n    customerId: number = 0;\r\n\r\n    //View model properties\r\n    currentTotalBids?: number = 0;\r\n    addressBidCountDict?: Record<string, number> = {}\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Dispatch } from \"redux\";\r\n\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Container from '@material-ui/core/Container';\r\nimport e_commerce from '../../images/e_commerce.png';\r\n\r\nimport { Grid } from \"@material-ui/core\";\r\n\r\nimport Button from '@material-ui/core/Button';\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\r\nimport { CartButtons } from \"../../components/shared/CartButtons\";\r\nimport { SelectControlledComponent } from \"../../components/shared/SelectComponents\";\r\nimport { SnackbarComponent } from \"../../components/shared/SnackbarComponent\";\r\nimport { TextComponent } from \"../../components/shared/TextComponent\";\r\nimport { Bid } from \"../../models/Bid\";\r\nimport { DiscountScheme } from \"../../models/DiscountScheme\";\r\nimport { SelectListItem } from \"../../models/SelectListItem\";\r\nimport { RootState } from \"../../store/rootReducer\";\r\nimport { addBidToCartAsync, updateBidInCartAsync } from \"../../store/thunks/bidThunk\";\r\nimport { getDiscountSchemeAsync } from \"../../store/thunks/discountSchemeThunk\";\r\n\r\nexport interface IProps {\r\n    discountSchemeId: number;\r\n    MODE: \"CREATE\" | \"UPDATE\";\r\n    bidIdToUpdate?: number;\r\n}\r\n\r\nexport function DiscountSchemeDetailPage({discountSchemeId, MODE, bidIdToUpdate=0}: IProps): JSX.Element {\r\n    const dispatch: Dispatch<any> = useDispatch();  \r\n\r\n    // Quantity to add to cart\r\n    const [quantity, setQuantity] = useState(1);    \r\n\r\n    // State to determine whether to show notification\r\n    const [open, setOpen] = useState(false);\r\n    \r\n  \r\n    // The discountScheme retrieved through a GET request\r\n    useEffect(() => {\r\n        const action = getDiscountSchemeAsync(discountSchemeId);\r\n        dispatch(action);\r\n        \r\n        // Note that you cannot pass values obtained from useSelector to the useEffect dependency array\r\n        // Since you are returning a new object (at a different memory address) from the reducer, \r\n        // useEffect will treat it that vaLue changed when doing shallow comparison\r\n    }, [discountSchemeId, dispatch]);  \r\n\r\n    let ds: DiscountScheme = useSelector((action: RootState) => action.discountSchemeReducer.discountScheme as DiscountScheme ) ?? new DiscountScheme();      \r\n\r\n    // Collection Address\r\n    const addressBidCountDict = ds.addressBidCountDict as Record<string, number>;   // { collectionAddress: number of bids} \r\n    const selectListItems: SelectListItem[] = [];\r\n    for (let address in addressBidCountDict) {\r\n        let selectListItem: SelectListItem = new SelectListItem(address, address);\r\n        selectListItems.push(selectListItem);\r\n    }\r\n\r\n    const [address, setAddress] = useState<string>(\"\");\r\n    const handleChangeAddress = (event: React.ChangeEvent<any>) => {\r\n        let selectedAddress: string = event.target.value;\r\n        setAddress(selectedAddress);\r\n    }\r\n    const numBidsAtAddress: number = addressBidCountDict?.address;\r\n    const avgDeliveryCharge: number = (!numBidsAtAddress) ? ds.deliveryCharge : ds.deliveryCharge / (numBidsAtAddress + 1);\r\n \r\n    // POST bid when user bids for the discountScheme\r\n    const submitBid = () => {\r\n        let bid: Bid = new Bid();\r\n        bid.customerId = 1;\r\n        bid.collectionAddress = address;\r\n        bid.quantity = quantity;\r\n\r\n        let action = null;\r\n        if (MODE === \"CREATE\") {\r\n            bid.discountSchemeId = ds.discountSchemeId;\r\n            action = addBidToCartAsync(bid);\r\n        } else if (MODE === \"UPDATE\") {\r\n            bid.bidId = bidIdToUpdate;\r\n            action = updateBidInCartAsync(bid);\r\n        }\r\n\r\n        dispatch(action);\r\n        setOpen(true);\r\n    };\r\n    \r\n    // The details of the the discountScheme to display\r\n    let dateString: string = \"\";\r\n    if (ds.expiryDate) {\r\n        let date: Date = new Date(ds.expiryDate.toString());\r\n        dateString = date.toDateString();\r\n    }  \r\n\r\n    let currentBids: number = ds.bids\r\n            .filter(bid => !bid.isInCart)\r\n            .reduce((accum, bid) => accum + bid?.quantity, 0);\r\n    \r\n    let leftExpiryDateDict: Record<string, any> = {\r\n        \"Expiry Date\": dateString\r\n    }\r\n    let rightDescriptionDict: Record<string, any> = {\r\n        \"Description\": ds.product?.description,\r\n    }\r\n    let leftPriceDict: Record<string, any> = {\r\n        \"Discounted Price\": \"$\" + ds.discountedPrice,\r\n    }\r\n    let rightPriceDict: Record<string, any> = {\r\n        \"Original Price\": \"$\" + ds.product?.originalPrice ?? \"$\"\r\n    }\r\n    let leftQuantityDict: Record<string, any> = {\r\n        \"Remaining Bids Needed\": ds.minOrderQnty - currentBids,\r\n    }\r\n    let rightQuantityDict: Record<string, any> = {\r\n        \"Min Collective Quantity\": ds.minOrderQnty,\r\n        \"Current Total Bids\": currentBids,\r\n    }\r\n    let addressTextDict: Record<string, any> = {\r\n        \"Delivery Charge\": \"$\" + ds.deliveryCharge,\r\n        \"Current bids at collection point\": numBidsAtAddress,\r\n    }\r\n    let avgDeliveryChargeDict: Record<string, any> = {\r\n        \"Current Average Delivery charge\": \"approx $\" + avgDeliveryCharge\r\n    }    \r\n    return  <Container maxWidth=\"sm\">\r\n        <Typography color=\"primary\" variant=\"h5\" align=\"left\">{ds.product?.name ?? \"\"}</Typography>\r\n        <CardMedia \r\n            component=\"img\"\r\n            image={e_commerce}\r\n            title=\"https://acowebs.com/impact-ecommerce-society/\"/>\r\n        <br/>\r\n        <Grid container>\r\n            <Grid item xs={12}>\r\n                    <TextComponent textDict={rightDescriptionDict}/>\r\n                    <hr/>\r\n                </Grid>\r\n            <Grid item xs={12}>\r\n                <TextComponent textDict={leftExpiryDateDict} color=\"textPrimary\"/>\r\n                <hr/>\r\n            </Grid>           \r\n            <Grid item xs={6}>\r\n                <TextComponent textDict={leftPriceDict} color=\"textPrimary\"/>\r\n                <hr/>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n                <TextComponent textDict={rightPriceDict}/>  \r\n                <hr/>          \r\n            </Grid>\r\n            <Grid item xs={6}>\r\n                <TextComponent textDict={leftQuantityDict} color=\"textPrimary\"/>            \r\n            </Grid>\r\n            <Grid item xs={6}>\r\n                <TextComponent textDict={rightQuantityDict}/>            \r\n            </Grid>\r\n        </Grid>\r\n        \r\n        <hr/>\r\n        <Grid container>\r\n            <Grid item xs={4}>        \r\n                <SelectControlledComponent title={\"Delivery\"} state={address} selectListItems={selectListItems} handleChange={handleChangeAddress} />\r\n            </Grid>\r\n            <Grid item xs={8}>\r\n                <TextComponent textDict={addressTextDict} />\r\n                <TextComponent textDict={avgDeliveryChargeDict} color=\"textPrimary\" />\r\n            </Grid>\r\n        </Grid>\r\n        <hr/>\r\n       \r\n        <CartButtons quantity={quantity} setQuantity={setQuantity} align={\"alignCenter\"}/>\r\n        <ButtonGroup size={\"medium\"}>            \r\n            <Button  onClick={submitBid} color=\"primary\" variant=\"contained\" disabled={!address || quantity < 1}>Add To Cart</Button>           \r\n          </ButtonGroup>\r\n        <SnackbarComponent open={open} setOpen={setOpen} message={\"Bid successfully created\"} severity={\"success\"}/>\r\n    </Container>\r\n}","import React from \"react\";\r\nimport { useParams } from \"react-router-dom\";\r\nimport { DiscountSchemeDetailPage } from \"./DiscountSchemeDetailPage\";\r\n\r\n// Essentially a HOC\r\nexport function DiscountSchemeDetailHOC(): JSX.Element {\r\n    \r\n    // DiscountScheme Id parse from route parameter\r\n    let routeParams: Record<string, string>  = (useParams()) as Record<string, string>;\r\n    const discountSchemeId: number = parseInt(routeParams[\"discountSchemeId\"]);\r\n\r\n    return <DiscountSchemeDetailPage discountSchemeId={discountSchemeId} MODE=\"CREATE\" />\r\n}","import React from 'react';\r\nimport './App.css';\r\nimport { DiscountSchemesPage } from './containers/DiscountSchemesPage';\r\nimport { Route } from 'react-router-dom';\r\nimport { Switch, BrowserRouter as Router } from 'react-router-dom';\r\nimport { CartPage } from './containers/CartPage';\r\nimport { OrdersPage } from './containers/OrdersPage';\r\nimport { ProducerDiscountSchemePage } from './containers/ProducerDiscountSchemePage';\r\nimport { DiscountSchemeForm } from './containers/DiscountSchemeForm';\r\nimport { ProductForm } from './containers/ProductForm';\r\nimport { ProductsPage } from './containers/ProductsPage';\r\nimport { LoginForm } from './containers/LoginForm';\r\nimport { PrivateRoute } from './components/app/PrivateRoute';\r\nimport { Claims } from './models/AuthVM';\r\nimport { NavBar } from './components/app/NavBar';\r\nimport { DiscountSchemeDetailHOC } from './containers/DiscountSchemeDetail/DiscountSchemeDetailHOC';\r\n\r\nfunction App() {\r\n\r\n  return (\r\n      <div className=\"App\">\r\n        <Router>\r\n          <NavBar/>\r\n          <Switch>\r\n            {/* Public Paths */}\r\n            <Route exact path=\"/\" component={ DiscountSchemesPage } />\r\n            <Route path=\"/login\" component={ LoginForm } />\r\n\r\n            {/* Consumer paths */}\r\n            <PrivateRoute path=\"/discountScheme/:discountSchemeId\" component= { DiscountSchemeDetailHOC } requiredClaims={[Claims.CONSUMER]} />\r\n            <PrivateRoute path=\"/cart\" component= { CartPage } requiredClaims={[Claims.CONSUMER]} />\r\n            <PrivateRoute path=\"/orders\" component= { OrdersPage } requiredClaims={[Claims.CONSUMER]} />\r\n\r\n            {/* Producer paths */}\r\n            <PrivateRoute path=\"/producer/products\" component = { ProductsPage } requiredClaims={[Claims.PRODUCER]} />\r\n            <PrivateRoute path=\"/producer/product/:productId\" component = { ProductForm } requiredClaims={[Claims.PRODUCER]} />            \r\n            <PrivateRoute path=\"/producer/discountSchemes/create\" component = { DiscountSchemeForm } requiredClaims={[Claims.PRODUCER]} />\r\n            <PrivateRoute path=\"/producer/discountSchemes\" component = { ProducerDiscountSchemePage } requiredClaims={[Claims.PRODUCER]} />\r\n          </Switch>\r\n        </Router> \r\n      </div>    \r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import { ACTIONS } from \"../actionEnums\";\r\nimport {cloneDeep} from 'lodash';\r\nimport { DiscountScheme } from \"../../models/DiscountScheme\";\r\nimport { IDiscountSchemeAction } from \"../thunks/discountSchemeThunk\";\r\n\r\nconst initialState : IDiscountSchemeAction = {\r\n    type: \"\",\r\n    discountSchemes: null\r\n}\r\n\r\nexport default function discountSchemeReducer(prevState = initialState, action: IDiscountSchemeAction): IDiscountSchemeAction {\r\n    let newState: IDiscountSchemeAction = cloneDeep(prevState);\r\n    newState.type = action.type;\r\n    newState.message = `${action.message} ${(new Date())}`;\r\n    newState.httpMessage = `${action.httpMessage} ${new Date()}`;\r\n\r\n    switch(action.type) {        \r\n        case(ACTIONS.GET_DISCOUNTSCHEMES_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.GET_DISCOUNTSCHEMES_RECEIVED):\r\n            let discountSchemes: DiscountScheme[] = action.discountSchemes as DiscountScheme[];\r\n            newState.discountSchemes = discountSchemes;\r\n            return newState;\r\n        case(ACTIONS.GET_DISCOUNTSCHEME_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.GET_DISCOUNTSCHEME_RECEIVED):\r\n            const discountScheme: DiscountScheme = action.discountScheme as DiscountScheme;\r\n            newState.discountScheme = discountScheme;\r\n            return newState;\r\n        case(ACTIONS.GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED):\r\n            newState.discountSchemes = action.discountSchemes as DiscountScheme[];\r\n            return newState;\r\n        case(ACTIONS.CREATE_DISCOUNTSCHEME_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.CREATE_DISCOUNTSCHEME_RECEIVED):\r\n            newState.discountScheme = action.discountScheme as DiscountScheme;\r\n            return newState;\r\n        case(ACTIONS.DELETE_DISCOUNTSCHEME_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.DELETE_DISCOUNTSCHEME_RECEIVED):\r\n            newState.discountScheme = action.discountScheme;\r\n            return newState;\r\n        default:\r\n            return prevState;\r\n    }\r\n    \r\n}","import { IBidAction } from \"../thunks/bidThunk\";\r\nimport { cloneDeep } from \"lodash\";\r\nimport { ACTIONS } from \"../actionEnums\";\r\n\r\nconst initialState : IBidAction = {\r\n    type: \"\",\r\n    bid: undefined,\r\n    bids: undefined,\r\n    message: \"Initial Message\",\r\n    httpMessage: \"Initial Response Message\",        \r\n}\r\n\r\nexport default function bidReducer(prevState = initialState, action: IBidAction): IBidAction {\r\n    let newState: IBidAction = cloneDeep(prevState);\r\n    \r\n    newState.type = action.type;\r\n    newState.message = `${action.message} ${(new Date())}`;\r\n    newState.httpMessage = `${action.httpMessage} + ${new Date()}`;\r\n\r\n    switch(action.type) {    \r\n        case(ACTIONS.ADD_BID_TO_CART_REQUEST):\r\n            return newState;    \r\n        case(ACTIONS.ADD_BID_TO_CART_RECEIVED): \r\n            newState.bid = action.bid;\r\n            return newState;\r\n        case(ACTIONS.GET_BIDSOFCUSTOMER_INCART_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.GET_BIDSOFCUSTOMER_INCART_RECEIVED):\r\n            newState.bids = action.bids;\r\n            return newState;   \r\n        case(ACTIONS.UPDATE_BID_IN_CART_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.UPDATE_BID_IN_CART_RECEIVED):\r\n            return newState;\r\n        case(ACTIONS.DELETE_BID_IN_CART_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.DELETE_BID_IN_CART_RECEIVED):\r\n            return newState;\r\n        case(ACTIONS.ORDER_BIDS_IN_CART_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.ORDER_BIDS_IN_CART_RECEIVED):\r\n            return newState;\r\n        case(ACTIONS.GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED):\r\n            newState.bids = action.bids;\r\n            return newState;\r\n        default:\r\n            return prevState;\r\n    }\r\n    \r\n}","import { IProductAction } from \"../thunks/productThunk\";\r\nimport { cloneDeep } from \"lodash\";\r\nimport { ACTIONS } from \"../actionEnums\";\r\n\r\nconst initialState: IProductAction = {\r\n    type: \"\",\r\n    product: undefined,\r\n    products: undefined,\r\n    message: \"\",\r\n    httpMessage: \"\" // For API messages\r\n}\r\n\r\nexport default function productReducer(prevState = initialState, action: IProductAction): IProductAction {\r\n\r\n    let newState: IProductAction = cloneDeep(prevState);\r\n    \r\n    newState.type = action.type;\r\n    newState.message = `${action.message} ${(new Date())}`;\r\n    newState.httpMessage = `${action.httpMessage} + ${new Date()}`;\r\n\r\n    switch(action.type) {\r\n        case(ACTIONS.GET_PRODUCTS_REQUEST):\r\n            return newState;\r\n        case (ACTIONS.GET_PRODUCTS_RECEIVED):\r\n            newState.products = action.products;\r\n            return newState;\r\n        case(ACTIONS.CREATE_PRODUCT_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.CREATE_PRODUCT_RECEIVED):\r\n            newState.product = action.product;\r\n            return newState;\r\n        case(ACTIONS.GET_PRODUCT_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.GET_PRODUCT_RECEIVED):\r\n            newState.product = action.product;\r\n            return newState;\r\n        case(ACTIONS.UPDATE_PRODUCT_RECEIVED):\r\n            return newState;\r\n        case(ACTIONS.UPDATE_PRODUCT_REQUEST):\r\n            newState.product = action.product;\r\n            return newState;\r\n        case(ACTIONS.DELETE_PRODUCT_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.DELETE_PRODUCT_RECEIVED):\r\n            newState.product = action.product;\r\n            return newState;\r\n        default:\r\n            return prevState;\r\n    }\r\n\r\n}","import { IErrorAction } from \"../actions/errorAction\";\r\nimport { ACTIONS } from \"../actionEnums\";\r\n\r\nconst initialState : IErrorAction = {\r\n    type: \"\",\r\n    error: null\r\n}\r\n\r\nexport default function errorReducer(prevState = initialState, action: IErrorAction): IErrorAction {\r\n    const { type, error } = action;\r\n    // Must make sure to clear all errors before redirecting, otherwise errors will persist even at the next component\r\n    if (type === ACTIONS.CLEAR_ERROR) {\r\n        return initialState;\r\n    } else if (error) {\r\n        console.log(\"error received in errorReducer:\", error);\r\n        //When you go to a new component, you want the previous errors to disappear\r\n        return {\r\n            type: type,\r\n            error: action.error\r\n        }         \r\n    }\r\n\r\n    //For any start and finished actions that don't have errors we return the current state.\r\n    return prevState; \r\n}","import { cloneDeep } from \"lodash\";\r\nimport { ACTIONS } from \"../actionEnums\";\r\nimport { IAuthAction } from \"../thunks/authThunk\";\r\n\r\nconst initialState : IAuthAction = {\r\n    type: \"\",\r\n    identityUser: undefined,\r\n    message: \"Initial Message\",\r\n    httpMessage: \"Initial Response Message\",   \r\n    authVM: undefined     \r\n}\r\n\r\nexport default function authReducer(prevState = initialState, action: IAuthAction): IAuthAction {\r\n\r\n    let newState: IAuthAction = cloneDeep(prevState);\r\n    \r\n    newState.authVM = cloneDeep(action.authVM);\r\n    newState.type = action.type;\r\n    newState.message = `${action.message} ${(new Date())}`;\r\n    newState.httpMessage = `${action.httpMessage} + ${new Date()}`;\r\n \r\n    switch(action.type) {    \r\n        case(ACTIONS.LOGIN_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.LOGIN_SUCCESS): \r\n            localStorage.setItem(\"authVM\", JSON.stringify(action.authVM)); \r\n            return newState;\r\n        case(ACTIONS.LOGIN_FAILED):\r\n            return newState;\r\n        case(ACTIONS.LOGOUT):\r\n            localStorage.removeItem(\"authVM\");\r\n            newState.message = ACTIONS.LOGOUT_SUCCESS;\r\n            return newState;\r\n        default:\r\n            return prevState;            \r\n    }\r\n\r\n}","import { combineReducers } from 'redux';\r\nimport discountSchemeReducer from './reducers/discountSchemeReducer';\r\nimport bidReducer from './reducers/bidReducer';\r\nimport productReducer from './reducers/productReducer';\r\nimport errorReducer from './reducers/errorReducer';\r\nimport authReducer from './reducers/authReducer';\r\n\r\n\r\nexport const rootReducer = combineReducers({    \r\n    discountSchemeReducer,\r\n    bidReducer,\r\n    productReducer,\r\n    authReducer,\r\n    errorReducer\r\n});\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport {createStore, applyMiddleware} from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { Provider } from 'react-redux';\r\nimport { rootReducer } from './store/rootReducer';\r\n\r\nconst store = createStore(rootReducer, applyMiddleware(thunk));\r\n\r\nReactDOM.render(\r\n  <Provider store={store} > \r\n    <React.StrictMode>\r\n        <App />\r\n      </React.StrictMode>\r\n  </Provider> , document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}