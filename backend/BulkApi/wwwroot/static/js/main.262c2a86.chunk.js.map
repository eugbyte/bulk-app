{"version":3,"sources":["images/e_commerce.png","../node_modules/jspdf/dist sync","store/actionEnums.ts","store/actions/errorAction.ts","store/thunks/discountSchemeThunk.ts","components/CardComponent.tsx","components/ErrorNotification.tsx","containers/DiscountSchemesPage.tsx","models/AuthVM.ts","enums/Claims.tsx","components/NavBar.tsx","store/thunks/authThunk.ts","models/DiscountScheme.ts","components/CartButtons.tsx","models/Bid.ts","store/thunks/bidThunk.ts","components/SnackbarComponent.tsx","components/SelectComponents.tsx","models/SelectListItem.ts","components/TextComponent.tsx","containers/DiscountSchemeDetailPage.tsx","containers/DiscountSchemeDetailHOC.tsx","components/DataTable.tsx","components/OrderCheckoutComponent.tsx","containers/CartPage.tsx","containers/OrdersPage.tsx","models/Product.ts","components/DialogComponent.tsx","containers/ProducerDiscountSchemePage.tsx","store/thunks/productThunk.ts","components/DatePickerComponent.tsx","containers/DiscountSchemeForm.tsx","containers/ProductForm.tsx","components/TextFieldComponents.tsx","containers/ProductsPage.tsx","models/IdentityUser.ts","containers/LoginForm.tsx","containers/ErrorPage.tsx","components/PrivateRoute.tsx","App.tsx","serviceWorker.ts","store/reducers/discountSchemeReducer.ts","store/reducers/bidReducer.ts","store/reducers/productReducer.ts","store/reducers/errorReducer.ts","store/reducers/authReducer.ts","store/rootReducer.ts","index.tsx"],"names":["module","exports","webpackEmptyContext","req","e","Error","code","keys","resolve","id","ACTIONS","errorAction","type","error","getDiscountSchemesWithBidOfProducer","producerId","dispatch","a","GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST","message","fetch","response","ok","json","discountSchemes","GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED","httpMessage","HTTP_READ_SUCCESS","ERROR","CardComponent","title","paras","actionTitle","action","classes","useStyles","Card","className","cardWidth","CardActionArea","onClick","CardMedia","component","height","cardHeight","image","CardContent","Typography","gutterBottom","variant","CardActions","Button","size","color","makeStyles","theme","createStyles","backdrop","zIndex","drawer","maxWidth","ErrorNotification","autoHideDuration","useDispatch","useState","openAlert","setOpenAlert","handleCloseAlert","cleanUpErrorAction","CLEAR_ERROR","useEffect","Snackbar","open","onClose","severity","Alert","props","elevation","DiscountSchemesPage","history","useHistory","useSelector","discountSchemeReducer","console","log","errorReducer","document","GET_DISCOUNTSCHEMES_REQUEST","GET_DISCOUNTSCHEMES_RECEIVED","cards","index","ds","dateString","expiryDate","Date","toString","toDateString","product","name","currentBids","bids","filter","bid","isInCart","reduce","accum","quantity","textDict","discountedPrice","minOrderQnty","Object","entries","key","value","para","align","originalPrice","push","card","Grid","item","xs","sm","lg","discountSchemeId","length","fullWidth","container","spacing","Claims","typo","fontVariant","width","margin","paddingLeft","paddingRight","CLAIMS","AuthVM","userName","jwt","isAuthenticated","email","claims","this","NavBar","authVM","authReducer","logoutMessage","localStorage","getItem","JSON","parse","LOGOUT_SUCCESS","Navbar","expand","blueBg","Brand","to","navLink","Toggle","aria-controls","Collapse","Nav","includes","CONSUMER","PRODUCER","DropdownButton","alignRight","NavDropdown","Item","Link","as","NavLink","LOGOUT","logoutSync","style","textDecoration","backgroundColor","dropDownLink","DiscountScheme","deliveryCharge","productId","addressBidCountDict","CartButtons","setQuantity","ButtonGroup","aria-label","alignLeft","display","flexDirection","alignItems","alignCenter","Bid","bidId","bidSuccessDate","collectionAddress","discountScheme","customerId","currentTotalBids","updateBidInCartAsync","UPDATE_BID_IN_CART_REQUEST","messages","method","headers","body","stringify","updatedBid","UPDATE_BID_IN_CART_RECEIVED","statusText","HTTP_UPDATE_SUCCESS","SnackbarComponent","setOpen","cleanUp","handleClose","reason","SelectControlledComponent","state","selectListItems","handleChange","isError","formHelperText","FormControl","formControl","InputLabel","Select","labelId","autoWidth","onChange","event","MenuItem","undefined","divider","map","selectListItem","text","FormHelperText","minWidth","selectEmpty","marginTop","SelectListItem","disabled","selected","TextComponent","Container","DiscountSchemeDetailPage","MODE","bidIdToUpdate","GET_DISCOUNTSCHEME_REQUEST","GET_DISCOUNTSCHEME_RECEIVED","getDiscountSchemeAsync","address","setAddress","numBidsAtAddress","avgDeliveryCharge","leftExpiryDateDict","rightDescriptionDict","description","leftPriceDict","rightPriceDict","leftQuantityDict","rightQuantityDict","addressTextDict","avgDeliveryChargeDict","e_commerce","selectedAddress","target","ADD_BID_TO_CART_REQUEST","createdBid","ADD_BID_TO_CART_RECEIVED","HTTP_CREATE_SUCCESS","addBidToCartAsync","DiscountSchemeDetailHOC","routeParams","useParams","parseInt","DataTable","data","columnNames","accessors","handleChecked","idColumnAccessorName","pageSize","actionIcon","enablePaging","enableSearch","actionMessage","enableSelection","detailPanelFieldName","enabledDetailPanel","headerDicts","i","header","accessor","headerDict","icons","tableIcons","columns","options","selection","search","paging","rowStyle","detailPanel","rowData","icon","displayNone","render","detailPanelFielddName","returnDetailTable","Add","forwardRef","ref","Check","Clear","Delete","DetailPanel","Edit","Export","Filter","FirstPage","LastPage","NextPage","PreviousPage","ResetSearch","Search","SortArrow","ThirdStateCheck","ViewColumn","AddShoppingCartIcon","OrderCheckoutComponent","rowIds","handleOrder","selectedBids","totalDeliveryCharge","charge","totalPrice","totalQuantity","Paper","paragraph","alignContent","Row","checkbox","updateCartComponent","deleteButton","CartPage","notificationMessage","setNotificationMessage","handleNotification","isOpen","bidsInCart","bidReducer","setBids","cloneDeep","GET_BIDSOFCUSTOMER_INCART_REQUEST","GET_BIDSOFCUSTOMER_INCART_RECEIVED","getBidsOfCustomerInCartAsync","selectedRowBidIds","setSelectedRowBidIds","apiMessage","HTTP_DELETE_SUCCESS","HTTP_UPDATE_ORDER_SUCCESS","rows","row","borderBottom","fontSize","createRowFromBid","handleUpdateCart","newQuantity","bidsCopy","bidCopy","updateAction","Checkbox","newSelectedRowIds","deleteAction","DELETE_BID_IN_CART_REQUEST","DELETE_BID_IN_CART_RECEIVED","deleteBidFromCartAsync","newBids","descriptionDict","quantityDict","deliveryDict","ORDER_BIDS_IN_CART_REQUEST","ORDER_BIDS_IN_CART_RECEIVED","orderBidsFromCart","remainingBidsRequired","bidExpiryDate","bidStatus","OrdersPage","GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST","GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED","getPendingOrSuccessfulBids","Product","category","DialogComponent","toggleOpen","content","showPicture","secondaryActionTitle","secondaryAction","Dialog","aria-labelledby","DialogTitle","DialogContent","imageUrl","DialogActions","delete","ProducerDiscountSchemePage","immutableDiscountSchemes","products","uniqBy","setDiscountSchemes","status","setStatus","productName","setProductName","discountSchemesCopy","determineStatusOfScheme","toLowerCase","openProductDialog","setOpenProductDialog","setProduct","productTextDict","productTextComponent","openDeleteDialog","setOpenDeleteDialog","targetDiscountScheme","setTargetDiscountScheme","httpResponseMessage","createRowFromScheme","isDisableDelete","tooltipMessage","find","selectedStatus","Autocomplete","getOptionLabel","option","onInputChange","renderInput","params","TextField","label","DELETE_DISCOUNTSCHEME_REQUEST","deletedDiscountScheme","DELETE_DISCOUNTSCHEME_RECEIVED","isSchemeSuccess","some","hasBidExpired","getProductsAsync","GET_PRODUCTS_REQUEST","GET_PRODUCTS_RECEIVED","DatePickerUncontrolledComponent","control","errors","defaultValue","errorMessage","rules","helperText","DatePickerControlledComponent","utils","DateFnsUtils","disableToolbar","format","guid","KeyboardButtonProps","FORM_NAMES","TextFieldUncontrolledComponent","isFullWidth","adornment","InputProps","startAdornment","InputAdornment","position","DiscountSchemeForm","productReducer","useForm","handleSubmit","getValues","watchProductId","watch","selectedProduct","onSubmit","CREATE_DISCOUNTSCHEME_REQUEST","createdDiscountScheme","CREATE_DISCOUNTSCHEME_RECEIVED","createDiscountSchemeAsync","createDiscountScheme","justify","textAlign","bottom","EmptyGridRow","required","min","ProductForm","mode","productToUpdate","GET_PRODUCT_REQUEST","GET_PRODUCT_RECEIVED","getProductAsync","reset","setValue","openSnackbar","setOpenSnackbar","initializeProduct","apiError","createdProduct","createProductsAsync","UPDATE_PRODUCT_REQUEST","updatedProduct","updateProductAsync","GridRow","update","ProductsPage","targetProduct","setTargetProduct","createRow","DELETE_PRODUCT_REQUEST","deletedProduct","DELETE_PRODUCT_RECEIVED","IdentityUser","passwordHash","LoginForm","openSnackBar","setOpenSnackBar","defaultAuthVM","identityUser","LOGIN_REQUEST","LOGIN_FAILED","LOGIN_SUCCESS","loginAsync","ErrorPage","PrivateRoute","path","requiredClaims","isAuthorized","every","requiredClaim","linkToLoginForm","App","exact","Boolean","window","location","hostname","match","initialState","rootReducer","combineReducers","prevState","newState","CREATE_PRODUCT_REQUEST","CREATE_PRODUCT_RECEIVED","UPDATE_PRODUCT_RECEIVED","setItem","removeItem","store","createStore","applyMiddleware","thunk","ReactDOM","StrictMode","getElementById","navigator","serviceWorker","ready","then","registration","unregister","catch"],"mappings":"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","file":"static/js/main.262c2a86.chunk.js","sourcesContent":["module.exports = __webpack_public_path__ + \"static/media/e_commerce.3acf207a.png\";","function webpackEmptyContext(req) {\n\tvar e = new Error(\"Cannot find module '\" + req + \"'\");\n\te.code = 'MODULE_NOT_FOUND';\n\tthrow e;\n}\nwebpackEmptyContext.keys = function() { return []; };\nwebpackEmptyContext.resolve = webpackEmptyContext;\nmodule.exports = webpackEmptyContext;\nwebpackEmptyContext.id = 384;","export enum ACTIONS { \r\n    GET_DISCOUNTSCHEMES_REQUEST = \"GET_DISCOUNTSCHEMES_REQUEST\",\r\n    GET_DISCOUNTSCHEMES_RECEIVED = \"GET_DISCOUNTSCHEMES_RECEIVED\",\r\n\r\n    GET_DISCOUNTSCHEME_REQUEST = \"GET_DISCOUNTSCHEME_REQUEST\",\r\n    GET_DISCOUNTSCHEME_RECEIVED = \"GET_DISCOUNTSCHEME_RECEIVED\",\r\n\r\n    GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST = \"GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST\",\r\n    GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED = \"GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED\",\r\n\r\n    CREATE_DISCOUNTSCHEME_REQUEST = \"CREATE_DISCOUNTSCHEME_REQUEST\",\r\n    CREATE_DISCOUNTSCHEME_RECEIVED = \"CREATE_DISCOUNTSCHEME_RECEIVED\",\r\n\r\n    DELETE_DISCOUNTSCHEME_REQUEST = \"DELETE_DISCOUNTSCHEME_REQUEST\",\r\n    DELETE_DISCOUNTSCHEME_RECEIVED = \"DELETE_DISCOUNTSCHEME_RECEIVED\",\r\n\r\n    GET_BIDSOFCUSTOMER_INCART_REQUEST = \"GET_BIDSOFCUSTOMER_INCART_REQUEST\",\r\n    GET_BIDSOFCUSTOMER_INCART_RECEIVED = \"GET_BIDSOFCUSTOMER_INCART_RECEIVED\",\r\n\r\n    ADD_BID_TO_CART_REQUEST = \"ADD_BID_TO_CART_REQUEST\",\r\n    ADD_BID_TO_CART_RECEIVED = \"ADD_BID_TO_CART_RECEIVED\",\r\n\r\n    UPDATE_BID_IN_CART_REQUEST = \"UPDATE_BID_IN_CART_REQUEST\",\r\n    UPDATE_BID_IN_CART_RECEIVED = \"UPDATE_BID_IN_CART_RECEIVED\",\r\n\r\n    DELETE_BID_IN_CART_REQUEST = \"DELETE_BID_IN_CART_REQUEST\",\r\n    DELETE_BID_IN_CART_RECEIVED = \"DELETE_BID_IN_CART_RECEIVED\",\r\n\r\n    ERROR = \"ERROR\",\r\n    CLEAR_ERROR = \"CLEAR_ERROR\",\r\n\r\n    ORDER_BIDS_IN_CART_REQUEST = \"ORDER_BIDS_IN_CART_REQUEST\",\r\n    ORDER_BIDS_IN_CART_RECEIVED = \"ORDER_BIDS_IN_CART_RECEIVED\",\r\n\r\n    GET_PRODUCTS_REQUEST = \"GET_PRODUCTS_REQUEST\",\r\n    GET_PRODUCTS_RECEIVED = \"GET_PRODUCTS_RECEIVED\",\r\n\r\n    GET_PRODUCT_REQUEST = \"GET_PRODUCT_REQUEST\",\r\n    GET_PRODUCT_RECEIVED = \"GET_PRODUCT_RECEIVED\",\r\n\r\n\r\n    GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST = \"GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST\",\r\n    GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED = \"GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED\",\r\n\r\n    CREATE_PRODUCT_REQUEST = \"CREATE_PRODUCT_REQUEST\",\r\n    CREATE_PRODUCT_RECEIVED = \"CREATE_PRODUCT_RECEIVED\",\r\n\r\n    DELETE_PRODUCT_REQUEST = \"DELETE_PRODUCT_REQUEST\",\r\n    DELETE_PRODUCT_RECEIVED = \"DELETE_PRODUCT_RECEIVED\",\r\n\r\n    UPDATE_PRODUCT_REQUEST = \"UPDATE_PRODUCT_REQUEST\",\r\n    UPDATE_PRODUCT_RECEIVED = \"UPDATE_PRODUCT_RECEIVED\",\r\n\r\n    LOGIN_REQUEST = \"LOGIN_REQUEST\",\r\n    LOGIN_SUCCESS = \"LOGIN_SUCCESS\",\r\n    LOGIN_FAILED = \"LOGIN_FAILED\",\r\n\r\n    LOGOUT = \"LOGOUT\",\r\n    LOGOUT_SUCCESS = \"LOGOUT_SUCCESS\",\r\n\r\n    HTTP_UPDATE_SUCCESS = \"HTTP_UPDATE_SUCCESS\",\r\n    HTTP_READ_SUCCESS = \"HTTP_READ_SUCCESS\",\r\n    HTTP_CREATE_SUCCESS = \"HTTP_CREATE_SUCCESS\",\r\n    HTTP_DELETE_SUCCESS = \"HTTP_DELETE_SUCCESS\",\r\n\r\n    HTTP_UPDATE_ORDER_SUCCESS = \"HTTP_UPDATE_ORDER_SUCCESS\"\r\n}\r\n\r\n\r\n\r\n\r\n\r\n\r\n","import { Action } from \"redux\";\r\nimport { ApiError } from \"../../models/ApiError\";\r\nimport { ErrorCollection } from \"../../models/ErrorCollection\";\r\nimport { ACTIONS } from \"../actionEnums\";\r\n\r\nexport interface IErrorAction extends Action {\r\n    type: string;\r\n    error: ApiError | Error | ErrorCollection | null;\r\n}\r\n \r\nexport function errorAction(type: string, error: ApiError | Error | ErrorCollection): IErrorAction {\r\n    return {\r\n        type: type,\r\n        error: error,\r\n    }\r\n}\r\n\r\nexport function cleanErrors(): IErrorAction {\r\n    return {\r\n        type: ACTIONS.CLEAR_ERROR,\r\n        error: null\r\n    }\r\n}","import { ACTIONS } from \"../actionEnums\";\r\nimport { ThunkDispatch, ThunkAction } from 'redux-thunk';\r\nimport { DiscountScheme } from \"../../models/DiscountScheme\";\r\nimport { Action } from \"redux\";\r\nimport { IErrorAction, errorAction } from \"../actions/errorAction\";\r\nimport { ApiError } from \"../../models/ApiError\";\r\n\r\nexport interface IDiscountSchemeAction extends Action {\r\n    type: string;\r\n    discountSchemes?: DiscountScheme[] | null;\r\n    discountScheme?: DiscountScheme | null;\r\n    message?: string;\r\n    httpMessage?: string;\r\n}\r\n\r\n\r\nexport function getAllDiscountSchemesWithBidsAsync(): ThunkAction<Promise<void>, {}, {}, IDiscountSchemeAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IDiscountSchemeAction | IErrorAction> ) => {\r\n        dispatch({ type: ACTIONS.GET_DISCOUNTSCHEMES_REQUEST, message: \"GET DiscountSchemes...\"});\r\n        try {            \r\n            const response: Response = await fetch(\"https://localhost:44397/api/discountSchemes\");\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n\r\n            const discountSchemes: DiscountScheme[] = await response.json();\r\n            dispatch({ type: ACTIONS.GET_DISCOUNTSCHEMES_RECEIVED, discountSchemes: discountSchemes, httpMessage: ACTIONS.HTTP_READ_SUCCESS });\r\n        } catch (error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n        \r\n    }\r\n}\r\n\r\nexport function getDiscountSchemeAsync(discountSchemeId: number): ThunkAction<Promise<void>, {}, {}, IDiscountSchemeAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IDiscountSchemeAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.GET_DISCOUNTSCHEME_REQUEST, message: \"GET DiscountScheme with id: \" + discountSchemeId});\r\n        try {            \r\n            const response: Response = await fetch(\"https://localhost:44397/api/discountSchemes/\" + discountSchemeId);\r\n            \r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            const discountScheme: DiscountScheme = await response.json();\r\n            dispatch({ type: ACTIONS.GET_DISCOUNTSCHEME_RECEIVED, discountScheme: discountScheme, httpMessage: ACTIONS.HTTP_READ_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n        \r\n    }\r\n}\r\n\r\nexport function getDiscountSchemesWithBidOfProducer(producerId: number): ThunkAction<Promise<void>, {}, {}, IDiscountSchemeAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IDiscountSchemeAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST, message: \"GET DiscountScheme of producer id: \" + producerId });\r\n        try {\r\n            const response: Response = await fetch(\"https://localhost:44397/api/discountSchemes/producer/\" + producerId);\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            const discountSchemes: DiscountScheme[] = await response.json();\r\n            dispatch({ type: ACTIONS.GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED, discountSchemes: discountSchemes, httpMessage: ACTIONS.HTTP_READ_SUCCESS });\r\n\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n    }\r\n}\r\n\r\nexport function createDiscountSchemeAsync(discountScheme: DiscountScheme): ThunkAction<Promise<void>, {}, {}, IDiscountSchemeAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IDiscountSchemeAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.CREATE_DISCOUNTSCHEME_REQUEST, message: \"Creating Discount Scheme\" });\r\n        try {\r\n            const response: Response = await fetch(\"https://localhost:44397/api/discountSchemes\", {\r\n                method: \"POST\",\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(discountScheme)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            const createdDiscountScheme: DiscountScheme = await response.json();\r\n            dispatch({ type: ACTIONS.CREATE_DISCOUNTSCHEME_RECEIVED, discountScheme: createdDiscountScheme, httpMessage: ACTIONS.HTTP_CREATE_SUCCESS });\r\n\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n    }\r\n}\r\n\r\nexport function deleteDiscountSchemeAsync(discountSchemeId: number): ThunkAction<Promise<void>, {}, {}, IDiscountSchemeAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IDiscountSchemeAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.DELETE_DISCOUNTSCHEME_REQUEST, message: \"Deleting Discount Scheme\" });\r\n        try {\r\n            const response: Response = await fetch(\"https://localhost:44397/api/discountSchemes/\" + discountSchemeId, {\r\n                method: \"DELETE\",\r\n                headers: { 'Content-Type': 'application/json' }\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            const deletedDiscountScheme: DiscountScheme = await response.json();\r\n            dispatch({ type: ACTIONS.DELETE_DISCOUNTSCHEME_RECEIVED, discountScheme: deletedDiscountScheme, httpMessage: ACTIONS.HTTP_DELETE_SUCCESS });\r\n\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n    }\r\n}\r\n","import React from \"react\";\r\nimport Card from '@material-ui/core/Card';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport CardActionArea from '@material-ui/core/CardActionArea';\r\nimport { CardContent, Button, CardActions } from \"@material-ui/core\";\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\n\r\ninterface IProp {\r\n    title: string,\r\n    paras: JSX.Element[] | JSX.Element, // e.g. [<p></p>, <p><p>]\r\n    actionTitle?: string,\r\n    action?: (val: any) => any;\r\n}\r\n\r\nexport function CardComponent({title, paras, actionTitle, action}: IProp) {\r\n    const classes = useStyles(); \r\n\r\n    return (\r\n        <div>\r\n            <Card className={classes.cardWidth}>\r\n                <CardActionArea onClick={action}>\r\n                    <CardMedia \r\n                        component=\"img\"\r\n                        height=\"140\"\r\n                        className={classes.cardHeight}\r\n                        image=\"e_commerce.png\"\r\n                        title=\"https://acowebs.com/impact-ecommerce-society/\"/>\r\n                </CardActionArea>\r\n                <CardContent>\r\n                    <Typography gutterBottom variant=\"h5\" component=\"h2\">\r\n                        {title}\r\n                    </Typography>\r\n                    {paras}\r\n                </CardContent>\r\n                { action != null &&\r\n                    <CardActions>                \r\n                        <Button size=\"medium\" color=\"primary\" onClick={action}>\r\n                            {actionTitle}\r\n                        </Button>\r\n                    </CardActions>  \r\n                }\r\n                  \r\n            </Card>\r\n            \r\n        </div>\r\n        \r\n    )\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    backdrop: {\r\n      zIndex: theme.zIndex.drawer + 1,\r\n      color: \"#fff\"\r\n    },\r\n    cardWidth: {\r\n        maxWidth: 450,\r\n    },\r\n    cardHeight: {\r\n        height: 140,\r\n    },\r\n  })\r\n);","import React, { useEffect, useState } from \"react\";\r\nimport { Snackbar } from \"@material-ui/core\";\r\nimport MuiAlert, { AlertProps } from '@material-ui/lab/Alert';\r\nimport { ApiError } from \"../models/ApiError\";\r\nimport { errorAction } from \"../store/actions/errorAction\";\r\nimport { ACTIONS } from \"../store/actionEnums\";\r\nimport { useDispatch } from \"react-redux\";\r\nimport { Dispatch } from \"redux\";\r\nimport { ErrorCollection } from \"../models/ErrorCollection\";\r\n\r\ninterface IProp {\r\n    autoHideDuration?: number;\r\n    error: ApiError | Error | ErrorCollection | null,\r\n    message: string\r\n}\r\n\r\n// Stateful component\r\n// Parent component does not need to hold the showAlert in its state\r\nexport function ErrorNotification({error, autoHideDuration=6000, message}: IProp): JSX.Element {\r\n    // API Errors received if any\r\n    // To display error notification\r\n    const dispatch: Dispatch<any> = useDispatch(); \r\n    const [openAlert, setOpenAlert] = useState<boolean>(false); \r\n    const handleCloseAlert = () => {\r\n        setOpenAlert(false);\r\n        const cleanUpErrorAction = errorAction(ACTIONS.CLEAR_ERROR, error as ApiError | Error | ErrorCollection );\r\n        dispatch(cleanUpErrorAction);\r\n    }\r\n\r\n    useEffect(()=> {\r\n        if (error) {\r\n            setOpenAlert(true);\r\n        }\r\n    }, [error]);\r\n    return <Snackbar open={openAlert} autoHideDuration={autoHideDuration} onClose={handleCloseAlert}>\r\n    <Alert severity=\"error\" onClose={handleCloseAlert}>{message}</Alert>\r\n</Snackbar>\r\n}\r\n\r\nfunction Alert(props: AlertProps) {\r\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n  }","import React, { useEffect } from \"react\";\r\nimport { Dispatch } from \"redux\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { getAllDiscountSchemesWithBidsAsync } from \"../store/thunks/discountSchemeThunk\";\r\nimport { DiscountScheme } from \"../models/DiscountScheme\"; \r\nimport { RootState } from \"../store/rootReducer\"; \r\nimport Grid from '@material-ui/core/Grid';\r\nimport { CardComponent } from \"../components/CardComponent\"; \r\nimport Typography from '@material-ui/core/Typography';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\r\nimport { ApiError } from \"../models/ApiError\";\r\nimport { ErrorNotification } from \"../components/ErrorNotification\";\r\n \r\nexport function DiscountSchemesPage(): JSX.Element {\r\n    const dispatch: Dispatch<any> = useDispatch();  \r\n    const history = useHistory();   \r\n    const classes = useStyles();\r\n\r\n    let discountSchemes: DiscountScheme[] = useSelector((action: RootState) => action.discountSchemeReducer.discountSchemes as DiscountScheme[]) ?? []; \r\n    console.log(discountSchemes);\r\n\r\n    const error: ApiError = useSelector((action: RootState) => action.errorReducer.error as ApiError) ?? null;\r\n\r\n    useEffect(() => {\r\n        document.title = \"Products\"\r\n        let action = getAllDiscountSchemesWithBidsAsync();\r\n        dispatch(action)\r\n    }, []); \r\n\r\n    let cards: JSX.Element[] = []\r\n    for (let index = 0; index < discountSchemes.length; index ++ ) {\r\n        const ds = discountSchemes[index];\r\n\r\n        let dateString: string = \"\";\r\n        if (ds.expiryDate) {\r\n            let date: Date = new Date(ds.expiryDate.toString());\r\n            dateString = date.toDateString();\r\n        } \r\n\r\n        let title = ds.product?.name ?? \"\";\r\n        let currentBids: number = ds.bids\r\n            .filter(bid => !bid.isInCart)\r\n            .reduce((accum, bid) => accum + bid?.quantity, 0);\r\n\r\n        let textDict = {\r\n            \"Title\": title,\r\n            \"Discounted Price\": \"$\" + ds.discountedPrice,\r\n            \"Remaining Bids Needed\": ds.minOrderQnty - currentBids,\r\n            \"Expiry Date\": dateString\r\n        } \r\n\r\n        let paras: JSX.Element[] = [];\r\n        for (let [key, value] of Object.entries(textDict)) {\r\n            let para: JSX.Element = <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\" align=\"left\" key={key}>\r\n                <b>{key}&nbsp;</b>{value} \r\n            </Typography>\r\n\r\n            if (key === \"Discounted Price\") {\r\n                para = <Typography variant=\"body2\" color=\"textSecondary\" component=\"p\" align=\"left\" key={key}>\r\n                <b>{key}&nbsp;</b> ${ds.discountedPrice} $<del>{ds.product?.originalPrice}</del>\r\n            </Typography>\r\n            }\r\n\r\n            paras.push(para)\r\n        }\r\n                 \r\n        const redirectToDiscountSchemeDetail = () => { history.push(\"/discountScheme/\" + ds.discountSchemeId) };\r\n\r\n        let card: JSX.Element = <Grid item xs={12} sm={4} lg={3} key={index}>\r\n            <CardComponent title={title} paras={paras} actionTitle={\"Add to Cart\"} action={redirectToDiscountSchemeDetail}/>\r\n        </Grid>\r\n        cards.push(card);\r\n    }  \r\n\r\n    return <div>\r\n        {discountSchemes.length > 0 &&\r\n            <Grid className={classes.fullWidth}\r\n                container\r\n                spacing={3}>\r\n                {cards}\r\n            </Grid>     \r\n        }\r\n        <ErrorNotification error={error} message=\"error fetching schemes\" />\r\n    </div>\r\n\r\n} \r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    typo: {\r\n       fontVariant: \"body2\",\r\n       color: \"textSecondary\",\r\n       component: \"p\",\r\n       align: \"left\"\r\n    },\r\n    fullWidth: {\r\n        width: \"100vw\",\r\n        margin: \"auto\",\r\n        paddingLeft: \"100px\",\r\n        paddingRight: \"100px\"\r\n    }\r\n  })\r\n);","export enum Claims {\r\n    PRODUCER = \"PRODUCER\",\r\n    CONSUMER = \"CONSUMER\",\r\n}\r\n\r\n\r\nexport class AuthVM {\r\n    jwt: string = \"\";\r\n    isAuthenticated: boolean | \"UNTOUCHED\" = false;\r\n    id: string = \"\";\r\n    userName: string = \"\";\r\n    email: string = \"\";\r\n    claims: string[] = []\r\n\r\n    constructor(userName=\"\") {\r\n        this.userName = userName;\r\n    }\r\n}\r\n","export enum CLAIMS {\r\n    PRODUCER = \"PRODUCER\",\r\n    CONSUMER = \"CONSUMER\"\r\n}","import React, { Dispatch, Fragment, useContext, useEffect, useState } from 'react';\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles'; \r\nimport 'bootstrap/dist/css/bootstrap.min.css';\r\nimport { NavLink, useHistory } from \"react-router-dom\";\r\nimport Button from '@material-ui/core/Button';\r\nimport { Navbar, Nav, NavDropdown, DropdownButton } from 'react-bootstrap';\r\nimport \"./NavBar.css\";\r\nimport { AuthVM } from '../models/AuthVM';\r\nimport { CLAIMS } from '../enums/Claims';\r\nimport { useDispatch, useSelector } from 'react-redux';\r\nimport { RootState } from '../store/rootReducer';\r\nimport { AuthContext } from './contexts/AuthContext';\r\nimport { logoutSync } from '../store/thunks/authThunk';\r\nimport { ACTIONS } from '../store/actionEnums';\r\n\r\n\r\nexport function NavBar() {\r\n  \r\n  const classes = useStyles();\r\n  const history = useHistory();\r\n  const dispatch: Dispatch<any> = useDispatch(); \r\n\r\n  let authVM: AuthVM = useSelector((action: RootState) => action.authReducer.authVM) ?? new AuthVM(\"ACCOUNT\");\r\n\r\n  let logoutMessage: string = useSelector((action: RootState) => action.authReducer.message) ?? \"\";\r\n\r\n  // When user refresh window, reducer state resets\r\n  // Retrieve again from localstorage\r\n  if (localStorage.getItem(\"authVM\")) {\r\n    authVM = JSON.parse( localStorage.getItem(\"authVM\") as string );\r\n  } \r\n\r\n  const logout = () => {\r\n    const action = logoutSync();\r\n    dispatch(action);\r\n  }\r\n\r\n  useEffect(() => {\r\n    if (logoutMessage === ACTIONS.LOGOUT_SUCCESS) {\r\n      history.push(\"/login\");\r\n    }\r\n  }, [logoutMessage])\r\n\r\n  return (\r\n    <div>\r\n      <Navbar expand=\"lg\" variant=\"dark\" className={classes.blueBg}>\r\n          <Navbar.Brand><NavLink to=\"/\" className={classes.navLink} >BulkApi</NavLink></Navbar.Brand>\r\n          <Navbar.Toggle aria-controls=\"basic-navbar-nav\" />\r\n          <Navbar.Collapse id=\"basic-navbar-nav\">\r\n              <Nav className=\"mr-auto\">\r\n\r\n                {/* Consumer NavBar */}\r\n                { authVM.claims?.includes(CLAIMS.CONSUMER) &&\r\n\r\n                  <Fragment>\r\n                    <Button color=\"inherit\" ><NavLink to=\"/\" className={classes.navLink} >Products</NavLink></Button>\r\n                    <Button color=\"inherit\"><NavLink to=\"/cart\" className={classes.navLink}>Cart</NavLink></Button>\r\n                    <Button color=\"inherit\"><NavLink to=\"/orders\" className={classes.navLink}>Orders</NavLink></Button>\r\n                  </Fragment>\r\n                }\r\n              \r\n                {/* Producer NavBar */}\r\n                { authVM.claims?.includes(CLAIMS.PRODUCER) &&\r\n                  <Fragment>\r\n                    <Button color=\"inherit\"><NavLink to=\"/producer/discountSchemes\" className={classes.navLink} >Schemes</NavLink></Button>\r\n                    <Button color=\"inherit\"><NavLink to=\"/producer/products\" className={classes.navLink} >Products</NavLink></Button>                    \r\n                  </Fragment>\r\n                }\r\n                \r\n              </Nav>\r\n\r\n              {/* Authentication DropDown */}\r\n              <DropdownButton alignRight title={authVM.userName}>\r\n              { authVM.isAuthenticated\r\n                ? <NavDropdown.Item >\r\n                    <Nav.Link as={NavLink} onClick={logout} to=\"/login\" style={{color: \"black\"}}>LOGOUT</Nav.Link>\r\n                  </NavDropdown.Item> \r\n                : <NavDropdown.Item >\r\n                  <Nav.Link as={NavLink} to=\"/login\" style={{color: \"black\"}}>LOGIN</Nav.Link>\r\n                </NavDropdown.Item> \r\n              }\r\n              </DropdownButton>\r\n                  \r\n                       \r\n                \r\n          </Navbar.Collapse>\r\n          \r\n      </Navbar>\r\n      <br/>\r\n    </div>\r\n  );\r\n}\r\n \r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    navLink: {\r\n        color: \"white\",\r\n        textDecoration: \"inherit\",        \r\n    },\r\n    blueBg: {\r\n      backgroundColor: \"#3f51b5\",\r\n      textDecoration: \"inherit\", \r\n    },\r\n    dropDownLink: {\r\n      color: \"black\",\r\n      textDecoration: \"inherit\",\r\n    }\r\n  }),\r\n);\r\n","import { ThunkAction, ThunkDispatch } from \"@reduxjs/toolkit\";\r\nimport { Action } from \"redux\";\r\nimport { ApiError } from \"../../models/ApiError\";\r\nimport { AuthVM } from \"../../models/AuthVM\";\r\nimport { IdentityUser } from \"../../models/IdentityUser\";\r\nimport { ACTIONS } from \"../actionEnums\";\r\nimport { errorAction, IErrorAction } from \"../actions/errorAction\";\r\n\r\nexport interface IAuthAction extends Action {\r\n    type: string;\r\n    identityUser?: IdentityUser | undefined;\r\n    message?: string; // All internal messages and for response messages received on GET request \r\n    authVM?: AuthVM;\r\n    httpMessage?: string; // For API messages\r\n\r\n}\r\n\r\n export function loginAsync(identityUser: IdentityUser): ThunkAction<Promise<void>, {}, {}, IAuthAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IAuthAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.LOGIN_REQUEST, message: \"Attempting login...\"});\r\n\r\n        try {\r\n            const response: Response = await fetch(\"https://localhost:44397/api/auth/signIn\", {\r\n                method: \"POST\",\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(identityUser)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            // If authentication succeeds, server sends authVM. Otherwise, AuthenticationException raised\r\n            let authVM: AuthVM = await response.json();\r\n            console.log(\"IAuthVM\", authVM);\r\n\r\n            if (authVM.isAuthenticated === false) {\r\n                authVM.userName = \"ACCOUNT\";\r\n                dispatch({ type: ACTIONS.LOGIN_FAILED,\r\n                    authVM: authVM,\r\n                    message: response.statusText,  \r\n                    httpMessage: ACTIONS.HTTP_UPDATE_SUCCESS \r\n                });\r\n              return;\r\n            }\r\n\r\n            dispatch({ type: ACTIONS.LOGIN_SUCCESS, \r\n                authVM: authVM,\r\n                message: response.statusText,  \r\n                httpMessage: ACTIONS.HTTP_UPDATE_SUCCESS \r\n            });\r\n        } catch(error) {          \r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }        \r\n        \r\n    }\r\n}\r\n\r\nexport function logoutSync(): IAuthAction {\r\n    let authVM: AuthVM = new AuthVM(\"ACCOUNT\");\r\n    authVM.isAuthenticated = \"UNTOUCHED\";\r\n    return { type: ACTIONS.LOGOUT, message: \"Logout ...\", authVM: authVM}; \r\n}\r\n","import { Product } from \"./Product\";\r\nimport { Bid } from \"./Bid\";\r\n\r\nexport class DiscountScheme {\r\n    discountSchemeId: number = 0;\r\n    minOrderQnty: number = 0;\r\n    discountedPrice: number = 0;\r\n    expiryDate: Date | null = null;\r\n    deliveryCharge: number = 0;\r\n\r\n    productId: number = 0;\r\n    product: Product | null = null;\r\n    bids: Bid[] = [];\r\n\r\n    //Properties of ViewModel\r\n    addressBidCountDict?: Record<string, number> = {}\r\n\r\n}","import React from \"react\";\r\nimport Button from '@material-ui/core/Button';\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\r\nimport AddIcon from '@material-ui/icons/Add';\r\nimport RemoveIcon from \"@material-ui/icons/Remove\";\r\nimport { makeStyles, createStyles, Theme } from '@material-ui/core/styles';\r\n\r\ninterface IProp {\r\n    quantity: number; // quantity is part of useState(0)\r\n    setQuantity: (num: number) => any;  // setQuantity is part of useState(0)\r\n    size?: \"small\" | \"medium\" | \"large\"\r\n    align?: \"alignLeft\" | \"alignCenter\" | \"alignRight\"\r\n}\r\n\r\nexport function CartButtons({quantity, setQuantity, size=\"medium\", align=\"alignLeft\"}: IProp): JSX.Element {\r\n    const classes: Record<string, any> = useStyles();\r\n\r\n    const handleIncrement = () => {\r\n        setQuantity(quantity + 1);\r\n    }\r\n\r\n    const handleDecrement  = () => {\r\n        let newQuantity = quantity - 1\r\n        if (newQuantity < 1)\r\n            return;\r\n        setQuantity(quantity - 1);\r\n    }\r\n\r\n    return <div className={classes[align]}>\r\n        <ButtonGroup color=\"primary\" aria-label=\"outlined primary button group\" size={size}>\r\n            <Button onClick={handleIncrement}><AddIcon/></Button>\r\n            <Button>{quantity}</Button>\r\n            <Button onClick={handleDecrement}><RemoveIcon /></Button>\r\n        </ButtonGroup>\r\n    </div>\r\n\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    alignLeft: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'left',\r\n      '& > *': {\r\n        margin: theme.spacing(1),\r\n      }\r\n    }, \r\n    alignCenter: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'center',\r\n      '& > *': {\r\n        margin: theme.spacing(1),\r\n      }\r\n    },\r\n    alignRight: {\r\n      display: 'flex',\r\n      flexDirection: 'column',\r\n      alignItems: 'right',\r\n      '& > *': {\r\n        margin: theme.spacing(1),\r\n      }\r\n    }\r\n  }),\r\n);\r\n ","import { DiscountScheme } from \"./DiscountScheme\";\r\n\r\nexport class Bid {\r\n    bidId: number = 0;\r\n    isInCart: boolean = false;\r\n    quantity: number = 0;\r\n    bidSuccessDate: Date | null = null;\r\n\r\n    collectionAddress: string = \"\";\r\n\r\n    discountSchemeId: number = 0;\r\n    discountScheme: DiscountScheme | null = null;\r\n\r\n    customerId: number = 0;\r\n\r\n    //View model properties\r\n    currentTotalBids?: number = 0;\r\n    addressBidCountDict?: Record<string, number> = {}\r\n}","import { Action } from \"redux\";\r\nimport { Bid } from \"../../models/Bid\";\r\nimport { ThunkAction, ThunkDispatch } from \"redux-thunk\";\r\nimport { ACTIONS } from \"../actionEnums\";\r\nimport { IErrorAction, errorAction } from \"../actions/errorAction\";\r\nimport { ApiError } from \"../../models/ApiError\";\r\n\r\n\r\nexport interface IBidAction extends Action {\r\n    type: string;\r\n    bid?: Bid | undefined;\r\n    bids?: Bid[] | undefined;\r\n    message?: string; // All internal messages and for response messages received on GET request\r\n    // Messages for create, read, update and delete\r\n    // need to separate messages and responseMessages\r\n    // some components rely on successfuly update response, before sending another get request to get the latest list\r\n    // if not separate, there will be infinite loop when using useEffect(()=>{}, [messages])\r\n    httpMessage?: string // For API messages\r\n}\r\n\r\nexport function addBidToCartAsync(bid: Bid): ThunkAction<Promise<void>, {}, {}, IBidAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IBidAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.ADD_BID_TO_CART_REQUEST, message: \"Making post request to add bid to cart ...\" });\r\n\r\n        try {\r\n            const response: Response = await fetch(\"https://localhost:44397/api/bids/addcart\", {\r\n                method: \"POST\",\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(bid)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            let createdBid: Bid = (await response.json());\r\n            dispatch({ type: ACTIONS.ADD_BID_TO_CART_RECEIVED, bid: createdBid, message: response.statusText,  httpMessage: ACTIONS.HTTP_CREATE_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }        \r\n        \r\n    }\r\n}\r\n\r\nexport function updateBidInCartAsync(bid: Bid): ThunkAction<Promise<void>, {}, {}, IBidAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IBidAction | IErrorAction>) => {\r\n        console.log(\"in thunk. bid to update\", bid.bidId)\r\n        dispatch({ type: ACTIONS.UPDATE_BID_IN_CART_REQUEST, messages: [\"Request to update bid in cart\"] });\r\n\r\n        try {\r\n            const response: Response = await fetch(\"https://localhost:44397/api/bids/updatecart\", {\r\n                method: \"PUT\",\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(bid)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            let updatedBid: Bid = (await response.json());\r\n            dispatch({ type: ACTIONS.UPDATE_BID_IN_CART_RECEIVED, bid: updatedBid, message: response.statusText, httpMessage: ACTIONS.HTTP_UPDATE_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }        \r\n        \r\n    }\r\n}\r\n\r\nexport function getBidsOfCustomerInCartAsync(customerId: number) {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IBidAction | IErrorAction>) => { \r\n        dispatch({ type: ACTIONS.GET_BIDSOFCUSTOMER_INCART_REQUEST, messages: [\"Fetching bids in cart for customer \" + customerId]});\r\n\r\n        try {\r\n            const response: Response = await fetch(\"https://localhost:44397/api/bids/cart/\" + customerId);\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n\r\n            const bids: Bid[] = await response.json();\r\n            dispatch({ type: ACTIONS.GET_BIDSOFCUSTOMER_INCART_RECEIVED, bids: bids, message: response.statusText, httpMessage: ACTIONS.HTTP_READ_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n    }\r\n}\r\n\r\nexport function deleteBidFromCartAsync(bidId: number) {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IBidAction | IErrorAction>) => { \r\n        dispatch({ type: ACTIONS.DELETE_BID_IN_CART_REQUEST, messages: [\"deleting bids in cart with bidId\" + bidId]});\r\n\r\n        try {\r\n            const response: Response = await fetch(\"https://localhost:44397/api/bids/cart/\" + bidId, {\r\n                method: \"DELETE\"\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            dispatch({ type: ACTIONS.DELETE_BID_IN_CART_RECEIVED, message: response.statusText, httpMessage: ACTIONS.HTTP_DELETE_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n    }\r\n}\r\n\r\nexport function orderBidsFromCart(bids: Bid[]) {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IBidAction | IErrorAction>) => { \r\n        dispatch({ type: ACTIONS.ORDER_BIDS_IN_CART_REQUEST, messages: [\"ordering bids in cart \" + bids.toString()]});\r\n        try {\r\n            const response: Response = await fetch(\"https://localhost:44397/api/bids/cart/order\", {\r\n                method: \"PUT\",\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(bids)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n\r\n            dispatch({type: ACTIONS.ORDER_BIDS_IN_CART_RECEIVED, message: response.statusText, httpMessage: ACTIONS.HTTP_UPDATE_ORDER_SUCCESS })\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n    }\r\n}\r\n\r\nexport function getPendingOrSuccessfulBids(customerId: number) {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IBidAction | IErrorAction>) => { \r\n        dispatch({ type: ACTIONS.GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST, messages: [\"getting  PendingOrSuccessfulBids of customer \" + customerId]});\r\n        try {\r\n            const response: Response = await fetch(\"https://localhost:44397/api/bids/orders/\" + 1);\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n\r\n            const bids: Bid[] = await response.json();\r\n            console.log(\"in thunk\", bids);\r\n\r\n            dispatch({type: ACTIONS.GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED, bids: bids, message: response.statusText, httpMessage: ACTIONS.HTTP_READ_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }\r\n    }\r\n}","import React from \"react\";\r\nimport Snackbar from \"@material-ui/core/Snackbar\";\r\nimport MuiAlert, { AlertProps } from \"@material-ui/lab/Alert\";\r\n\r\ninterface IProps { \r\n    open: boolean;  // useState(true)\r\n    setOpen: (val: boolean) => void;    //useState(true)\r\n    message: string | JSX.Element;\r\n    severity: \"error\" | \"warning\" | \"info\" | \"success\",\r\n    cleanUp?: () => any;    // callback function when notification closes;\r\n    autoHideDuration?: number;\r\n}\r\n\r\nexport function SnackbarComponent({open, setOpen, message, severity, cleanUp, autoHideDuration=6000}: IProps): JSX.Element {\r\n\r\n    const handleClose = (reason: string) => { \r\n        setOpen(false); \r\n        if (cleanUp) {\r\n            cleanUp();\r\n        }\r\n    }; \r\n    \r\n    return <Snackbar open={open} autoHideDuration={autoHideDuration} onClose={() => handleClose(\"clickaway\")}>\r\n        <Alert onClose={() => handleClose(\"clickaway\")} severity={severity} >\r\n            {message}\r\n        </Alert>\r\n    </Snackbar>\r\n}\r\n\r\nfunction Alert(props: AlertProps) {\r\n    return <MuiAlert elevation={6} variant=\"filled\" {...props} />;\r\n  }\r\n\r\n","import React from \"react\";\r\nimport { createStyles, makeStyles, Theme } from '@material-ui/core/styles';\r\nimport FormControl from '@material-ui/core/FormControl';\r\nimport InputLabel from '@material-ui/core/InputLabel';\r\nimport Select from '@material-ui/core/Select';\r\nimport MenuItem from '@material-ui/core/MenuItem';\r\nimport { SelectListItem } from \"../models/SelectListItem\";\r\nimport { Control, Controller, DeepMap, FieldError } from \"react-hook-form\";\r\nimport { FormHelperText } from \"@material-ui/core\";\r\n\r\ninterface IPropUncontrolled {\r\n    title: string;\r\n    name: string,\r\n    selectListItems: SelectListItem[] // Record<text, value>,\r\n    errorMessage?: string,\r\n    defaultValue?: string,\r\n    formHelperText?: string\r\n    control: Control<Record<string, any>>,\r\n    errors: DeepMap<Record<string, any>, FieldError>,\r\n    rules: object\r\n}\r\n\r\n// For Select field used in React Hook Forms. React Hook forms are uncontrolled, i.e. no state\r\n// The data for each input element is stored in the DOM, not in the component. \r\n// React hook forms library uses a ref behind the scenes to retrieve the data\r\nexport function SelectUncontrolledComponent({title, selectListItems,\r\n  name, errorMessage=\"\", defaultValue=\"\", control, errors, rules}: IPropUncontrolled): JSX.Element {\r\n\r\n  let isError = errors[name] != null ? true : false;\r\n\r\n  return  <Controller\r\n    name={name}\r\n    defaultValue={defaultValue}\r\n    control={control}\r\n    rules={rules}\r\n    render={props => <SelectControlledComponent title={title} state={props.value} selectListItems={selectListItems} \r\n      handleChange={props.onChange} formHelperText={errorMessage} isError={isError} {...props} />  \r\n    } />\r\n}\r\n\r\ninterface IPropControlled {\r\n  title: string;\r\n  state: any;\r\n  selectListItems: SelectListItem[] // Record<text, value>\r\n  handleChange: (event: React.ChangeEvent<any>) => any | void;\r\n  isError?: boolean;\r\n  formHelperText?: string\r\n}\r\n  \r\n// For controlled forms\r\n// In a controlled component, the form data is handled by the state within the component.\r\nexport function SelectControlledComponent({title, state, selectListItems, handleChange, isError=false, formHelperText=\"\"}: IPropControlled): JSX.Element {\r\n    const classes = useStyles();\r\n\r\n    return  <FormControl className={classes.formControl} error={isError}>\r\n          <InputLabel id=\"demo-simple-select-label\">{title}</InputLabel>\r\n          <Select labelId=\"demo-simple-select-label\"\r\n              autoWidth={true}\r\n              value={state}\r\n              onChange={event => handleChange(event)} > \r\n              <MenuItem value={undefined} divider>\r\n                  <em>None</em>\r\n              </MenuItem>\r\n              {\r\n                selectListItems.map((selectListItem, index) => <MenuItem key={index} value={selectListItem.value}>{selectListItem.text}</MenuItem>)\r\n              }\r\n          </Select>\r\n          { isError &&\r\n            <FormHelperText>{formHelperText}</FormHelperText>\r\n          }\r\n          \r\n    </FormControl>\r\n}\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    formControl: {\r\n      //margin: theme.spacing(1),\r\n      minWidth: 150,\r\n    },\r\n    selectEmpty: {\r\n      marginTop: theme.spacing(2),\r\n    },\r\n  }),\r\n);","export class SelectListItem {\r\n    disabled: boolean = false;\r\n    selected: boolean = false;\r\n    text: string = \"\";\r\n    value: any;\r\n\r\n\r\n    constructor(text = \"\", value: any) {\r\n        this.text = text;\r\n        this.value = value;\r\n    }\r\n}","import React from \"react\";\r\nimport Container from '@material-ui/core/Container';\r\nimport Typography from '@material-ui/core/Typography';\r\n\r\n\r\ninterface IProp {\r\n    textDict: Record<string, any>\r\n    color?: \"inherit\" | \"initial\" | \"textSecondary\" | \"primary\" | \"secondary\" | \"textPrimary\" | \"error\" | undefined\r\n}\r\n\r\nexport function TextComponent({textDict, color=\"textSecondary\"}: IProp): JSX.Element {\r\n    console.log(textDict);\r\n    let paras: JSX.Element[] = [];\r\n    for (let [key, value] of Object.entries(textDict)) {\r\n        let para: JSX.Element = <Typography variant=\"body2\" color={color} component=\"p\" align=\"left\" key={key}>\r\n            <b>{key}&nbsp;</b>{value} \r\n        </Typography>\r\n        paras.push(para)\r\n    }\r\n\r\n    return <Container>\r\n        {paras}\r\n    </Container>\r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Dispatch } from \"redux\";\r\nimport { DiscountScheme } from \"../models/DiscountScheme\";\r\nimport { RootState } from \"../store/rootReducer\";\r\nimport { getDiscountSchemeAsync } from \"../store/thunks/discountSchemeThunk\";\r\nimport Typography from '@material-ui/core/Typography';\r\nimport CardMedia from '@material-ui/core/CardMedia';\r\nimport Container from '@material-ui/core/Container';\r\nimport { CartButtons } from \"../components/CartButtons\";\r\nimport e_commerce from '../images/e_commerce.png';\r\nimport { Bid } from \"../models/Bid\";\r\nimport { addBidToCartAsync, updateBidInCartAsync } from \"../store/thunks/bidThunk\";\r\nimport { SnackbarComponent } from \"../components/SnackbarComponent\"; \r\nimport { SelectControlledComponent } from \"../components/SelectComponents\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport { SelectListItem } from \"../models/SelectListItem\";\r\nimport { TextComponent } from \"../components/TextComponent\";\r\nimport Button from '@material-ui/core/Button';\r\nimport ButtonGroup from '@material-ui/core/ButtonGroup';\r\n\r\nexport interface IProps {\r\n    discountSchemeId: number;\r\n    MODE: \"CREATE\" | \"UPDATE\";\r\n    bidIdToUpdate?: number;\r\n}\r\n\r\nexport function DiscountSchemeDetailPage({discountSchemeId, MODE, bidIdToUpdate=0}: IProps): JSX.Element {\r\n    const dispatch: Dispatch<any> = useDispatch();  \r\n\r\n    // Quantity to add to cart\r\n    const [quantity, setQuantity] = useState(1);    \r\n\r\n    // State to determine whether to show notification\r\n    const [open, setOpen] = useState(false);\r\n  \r\n    // The discountScheme retrieved through a GET request\r\n    useEffect(() => {\r\n        const action = getDiscountSchemeAsync(discountSchemeId);\r\n        dispatch(action);\r\n        \r\n        // Note that you cannot pass values obtained from useSelector to the useEffect dependency array\r\n        // Since you are returning a new object (at a different memory address) from the reducer, \r\n        // useEffect will treat it that vaLue changed when doing shallow comparison\r\n    }, [discountSchemeId]);  \r\n\r\n    let ds: DiscountScheme = useSelector((action: RootState) => action.discountSchemeReducer.discountScheme as DiscountScheme ) ?? new DiscountScheme();      \r\n\r\n    console.log(\"in DiscountSchemeDetailPage\", ds);\r\n\r\n    // Collection Address\r\n    const addressBidCountDict = ds.addressBidCountDict as Record<string, number>;   // { collectionAddress: number of bids} \r\n    const selectListItems: SelectListItem[] = [];\r\n    for (let address in addressBidCountDict) {\r\n        let selectListItem: SelectListItem = new SelectListItem(address, address);\r\n        selectListItems.push(selectListItem);\r\n    }\r\n\r\n    const [address, setAddress] = useState<string>(\"\");\r\n    const handleChangeAddress = (event: React.ChangeEvent<any>) => {\r\n        let selectedAddress: string = event.target.value;\r\n        console.log(selectedAddress);\r\n        setAddress(selectedAddress);\r\n    }\r\n    const numBidsAtAddress: number = addressBidCountDict?.address;\r\n    const avgDeliveryCharge: number = (!numBidsAtAddress) ? ds.deliveryCharge : ds.deliveryCharge / (numBidsAtAddress + 1);\r\n \r\n    // POST bid when user bids for the discountScheme\r\n    const submitBid = () => {\r\n        let bid: Bid = new Bid();\r\n        bid.customerId = 1;\r\n        bid.collectionAddress = address;\r\n        bid.quantity = quantity;\r\n\r\n        let action = null;\r\n        if (MODE === \"CREATE\") {\r\n            bid.discountSchemeId = ds.discountSchemeId;\r\n            action = addBidToCartAsync(bid);\r\n        } else if (MODE === \"UPDATE\") {\r\n            bid.bidId = bidIdToUpdate;\r\n            action = updateBidInCartAsync(bid);\r\n        }\r\n\r\n        dispatch(action);\r\n        setOpen(true);\r\n    };\r\n    \r\n    // The details of the the discountScheme to display\r\n    let dateString: string = \"\";\r\n    if (ds.expiryDate) {\r\n        let date: Date = new Date(ds.expiryDate.toString());\r\n        dateString = date.toDateString();\r\n    }  \r\n\r\n    let currentBids: number = ds.bids\r\n            .filter(bid => !bid.isInCart)\r\n            .reduce((accum, bid) => accum + bid?.quantity, 0);\r\n    \r\n    let leftExpiryDateDict: Record<string, any> = {\r\n        \"Expiry Date\": dateString\r\n    }\r\n    let rightDescriptionDict: Record<string, any> = {\r\n        \"Description\": ds.product?.description,\r\n    }\r\n    let leftPriceDict: Record<string, any> = {\r\n        \"Discounted Price\": \"$\" + ds.discountedPrice,\r\n    }\r\n    let rightPriceDict: Record<string, any> = {\r\n        \"Original Price\": \"$\" + ds.product?.originalPrice ?? \"$\"\r\n    }\r\n    let leftQuantityDict: Record<string, any> = {\r\n        \"Remaining Bids Needed\": ds.minOrderQnty - currentBids,\r\n    }\r\n    let rightQuantityDict: Record<string, any> = {\r\n        \"Min Collective Quantity\": ds.minOrderQnty,\r\n        \"Current Total Bids\": currentBids,\r\n    }\r\n    let addressTextDict: Record<string, any> = {\r\n        \"Delivery Charge\": \"$\" + ds.deliveryCharge,\r\n        \"Current bids at collection point\": numBidsAtAddress,\r\n    }\r\n    let avgDeliveryChargeDict: Record<string, any> = {\r\n        \"Current Average Delivery charge\": \"approx $\" + avgDeliveryCharge\r\n    }    \r\n    return  <Container maxWidth=\"sm\">\r\n        <Typography color=\"primary\" variant=\"h5\" align=\"left\">{ds.product?.name ?? \"\"}</Typography>\r\n        <CardMedia \r\n            component=\"img\"\r\n            image={e_commerce}\r\n            title=\"https://acowebs.com/impact-ecommerce-society/\"/>\r\n        <br/>\r\n        <Grid container>\r\n            <Grid item xs={12}>\r\n                    <TextComponent textDict={rightDescriptionDict}/>\r\n                    <hr/>\r\n                </Grid>\r\n            <Grid item xs={12}>\r\n                <TextComponent textDict={leftExpiryDateDict} color=\"textPrimary\"/>\r\n                <hr/>\r\n            </Grid>           \r\n            <Grid item xs={6}>\r\n                <TextComponent textDict={leftPriceDict} color=\"textPrimary\"/>\r\n                <hr/>\r\n            </Grid>\r\n            <Grid item xs={6}>\r\n                <TextComponent textDict={rightPriceDict}/>  \r\n                <hr/>          \r\n            </Grid>\r\n            <Grid item xs={6}>\r\n                <TextComponent textDict={leftQuantityDict} color=\"textPrimary\"/>            \r\n            </Grid>\r\n            <Grid item xs={6}>\r\n                <TextComponent textDict={rightQuantityDict}/>            \r\n            </Grid>\r\n        </Grid>\r\n        \r\n        <hr/>\r\n        <Grid container>\r\n            <Grid item xs={4}>        \r\n                <SelectControlledComponent title={\"Delivery\"} state={address} selectListItems={selectListItems} handleChange={handleChangeAddress} />\r\n            </Grid>\r\n            <Grid item xs={8}>\r\n                <TextComponent textDict={addressTextDict} />\r\n                <TextComponent textDict={avgDeliveryChargeDict} color=\"textPrimary\" />\r\n            </Grid>\r\n        </Grid>\r\n        <hr/>\r\n       \r\n        <CartButtons quantity={quantity} setQuantity={setQuantity} align={\"alignCenter\"}/>\r\n        <ButtonGroup size={\"medium\"}>            \r\n            <Button  onClick={submitBid} color=\"primary\" variant=\"contained\" disabled={!address || quantity < 1}>Add To Cart</Button>           \r\n          </ButtonGroup>\r\n        <SnackbarComponent open={open} setOpen={setOpen} message={\"Bid successfully created\"} severity={\"success\"}/>\r\n    </Container>\r\n}","import React from \"react\";\r\nimport { DiscountSchemeDetailPage } from \"./DiscountSchemeDetailPage\";\r\nimport { useParams } from \"react-router-dom\";\r\n\r\n// Essentially a HOC\r\nexport function DiscountSchemeDetailHOC(): JSX.Element {\r\n    \r\n    // DiscountScheme Id parse from route parameter\r\n    let routeParams: Record<string, string>  = (useParams()) as Record<string, string>;\r\n    const discountSchemeId: number = parseInt(routeParams[\"discountSchemeId\"]);\r\n\r\n    return <DiscountSchemeDetailPage discountSchemeId={discountSchemeId} MODE=\"CREATE\" />\r\n}","import MaterialTable from 'material-table';\r\nimport React from \"react\"; \r\n\r\nimport { forwardRef } from 'react';\r\n\r\nimport AddBox from '@material-ui/icons/AddBox';\r\nimport ArrowDownward from '@material-ui/icons/ArrowDownward';\r\nimport Check from '@material-ui/icons/Check';\r\nimport ChevronLeft from '@material-ui/icons/ChevronLeft';\r\nimport ChevronRight from '@material-ui/icons/ChevronRight';\r\nimport Clear from '@material-ui/icons/Clear';\r\nimport DeleteOutline from '@material-ui/icons/DeleteOutline';\r\nimport Edit from '@material-ui/icons/Edit';\r\nimport FilterList from '@material-ui/icons/FilterList';\r\nimport FirstPage from '@material-ui/icons/FirstPage';\r\nimport LastPage from '@material-ui/icons/LastPage';\r\nimport Remove from '@material-ui/icons/Remove';\r\nimport SaveAlt from '@material-ui/icons/SaveAlt';\r\nimport Search from '@material-ui/icons/Search';\r\nimport ViewColumn from '@material-ui/icons/ViewColumn';\r\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart';\r\nimport UnfoldMore from \"@material-ui/icons/UnfoldMore\";\r\nimport { makeStyles, createStyles, Theme } from \"@material-ui/core/styles\";\r\n\r\n\r\nimport { Icons } from 'material-table';\r\nimport  { SvgIconTypeMap } from \"@material-ui/core/SvgIcon\";\r\nimport { OverridableComponent } from '@material-ui/core/OverridableComponent';\r\n\r\ninterface IProp {\r\n  title: string,\r\n  data: any[];\r\n  columnNames: any[];\r\n  accessors: string[];\r\n  handleChecked?: (rowIds: number[]) => any;\r\n  idColumnAccessorName?: string; //to hide the id column,\r\n  pageSize?: number;\r\n  actionIcon?: OverridableComponent<SvgIconTypeMap<{}, \"svg\">>;\r\n  enableSearch?: boolean;\r\n  enablePaging?: boolean;\r\n  enableSelection?: boolean;\r\n  actionMessage?: string;\r\n  detailPanelFieldName?: string; //To render the detail panel\r\n  enabledDetailPanel?: boolean;\r\n}\r\n\r\n \r\nexport function DataTable({title, data, columnNames, accessors, handleChecked=defaultHandleChecked, idColumnAccessorName=\"\", pageSize=10, actionIcon,\r\n  enablePaging=false, enableSearch=false, actionMessage=\"Action\", enableSelection=false, detailPanelFieldName=\"\", enabledDetailPanel=false  }: IProp): JSX.Element {\r\n\r\n  let headerDicts: any[] = [];\r\n    for(let i = 0; i < columnNames.length; i++) {\r\n        let header: string = columnNames[i];\r\n        let accessor: string = accessors[i];    \r\n        let headerDict: any = {\r\n            \"title\": header,\r\n            \"field\": accessor,\r\n            \"hidden\": accessor === idColumnAccessorName\r\n        }; \r\n        headerDicts.push(headerDict);\r\n    }\r\n\r\n    const classes = useStyles();\r\n\r\n    return (\r\n      <div> \r\n        <MaterialTable        \r\n          icons={tableIcons}\r\n            title={title}\r\n            columns={headerDicts}\r\n            data={data}        \r\n            options={{\r\n              selection: enableSelection,\r\n              pageSize: pageSize,\r\n              search: enableSearch,\r\n              paging: enablePaging,\r\n              rowStyle:{\r\n                height: \"100px\"\r\n              },            \r\n            }}\r\n            detailPanel={[\r\n              rowData => ({\r\n                disabled: !enabledDetailPanel,\r\n                icon: () => <ChevronRight className={enabledDetailPanel ? classes.display : classes.displayNone } />,\r\n                render: () => returnDetailTable(rowData, detailPanelFieldName)\r\n              })\r\n            ]}\r\n            //rowData => returnDetailTable(rowData, detailPanelFieldName)\r\n            \r\n      />\r\n      </div>\r\n    )\r\n}\r\n\r\n  // There is a bug with Material Table where the table is fully rerendered on parent state update since 1.53.0\r\n  // https://github.com/mbrn/material-table/issues/1265 \r\nfunction returnDetailTable(rowData: any, detailPanelFielddName: string): JSX.Element {\r\n  console.log(rowData);\r\n  return rowData[detailPanelFielddName] as JSX.Element;\r\n}\r\n\r\nconst defaultHandleChecked = (val?: any) => {};\r\n\r\nconst useStyles = makeStyles((theme: Theme) =>\r\n  createStyles({\r\n    displayNone: {\r\n      display: 'none'      \r\n    },\r\n    display: {\r\n      display: \"initial\"\r\n    }\r\n  }),\r\n);\r\n  \r\nconst tableIcons = {\r\n  Add: forwardRef<any, Icons>((props, ref) => <AddBox {...props} ref={ref} />),\r\n  Check: forwardRef<any, Icons>((props, ref) => <Check {...props} ref={ref} />),\r\n  Clear: forwardRef<any, Icons>((props, ref) => <Clear {...props} ref={ref} />),\r\n  Delete: forwardRef<any, Icons>((props, ref) => <DeleteOutline {...props} ref={ref} />),\r\n  DetailPanel: forwardRef<any, Icons>((props, ref) => <ChevronRight {...props} ref={ref} />),\r\n  Edit: forwardRef<any, Icons>((props, ref) => <Edit {...props} ref={ref} />),\r\n  Export: forwardRef<any, Icons>((props, ref) => <SaveAlt {...props} ref={ref} />),\r\n  Filter: forwardRef<any, Icons>((props, ref) => <FilterList {...props} ref={ref} />),\r\n  FirstPage: forwardRef<any, Icons>((props, ref) => <FirstPage {...props} ref={ref} />),\r\n  LastPage: forwardRef<any, Icons>((props, ref) => <LastPage {...props} ref={ref} />),\r\n  NextPage: forwardRef<any, Icons>((props, ref) => <ChevronRight {...props} ref={ref} />),\r\n  PreviousPage: forwardRef<any, Icons>((props, ref) => <ChevronLeft {...props} ref={ref} />),\r\n  ResetSearch: forwardRef<any, Icons>((props, ref) => <Clear {...props} ref={ref} />),\r\n  Search: forwardRef<any, Icons>((props, ref) => <Search {...props} ref={ref} />),\r\n  SortArrow: forwardRef<any, Icons>((props, ref) => <ArrowDownward {...props} ref={ref} />),\r\n  ThirdStateCheck: forwardRef<any, Icons>((props, ref) => <Remove {...props} ref={ref} />),\r\n  ViewColumn: forwardRef<any, Icons>((props, ref) => <ViewColumn {...props} ref={ref} />),\r\n  AddShoppingCartIcon: forwardRef<any, Icons>((props, ref) => <AddShoppingCartIcon {...props} ref={ref} />)\r\n};","import React from \"react\";\r\nimport { Bid } from \"../models/Bid\";\r\nimport Typography from '@material-ui/core/Typography';\r\nimport { Button } from \"@material-ui/core\";\r\nimport Paper from '@material-ui/core/Paper';\r\nimport Grid from '@material-ui/core/Grid';\r\n\r\ninterface IProp {\r\n    bids: Bid[];\r\n    rowIds: number[];\r\n    handleOrder: () => void\r\n}\r\n\r\nexport function OrderCheckoutComponent({bids, rowIds, handleOrder}: IProp) {\r\n\r\n    console.log(\"in orderCheckOut\", bids);\r\n\r\n    const selectedBids: Bid[] = bids.filter(bid =>  rowIds.includes(bid.bidId));\r\n\r\n    const totalDeliveryCharge = selectedBids.map(bid => {\r\n        const addressBidCountDict = bid.addressBidCountDict as Record<string, number>;   // { collectionAddress: number of bids} \r\n        const numBidsAtAddress: number = addressBidCountDict[bid.collectionAddress];\r\n        const deliveryCharge: number = bid?.discountScheme?.deliveryCharge ?? 0;\r\n        const avgDeliveryCharge: number = (!numBidsAtAddress) ? deliveryCharge : deliveryCharge / numBidsAtAddress;\r\n        return avgDeliveryCharge\r\n    }).reduce((accum, charge) => accum + charge, 0);\r\n\r\n    let totalPrice: number = selectedBids\r\n        .reduce((accum, bid) => accum + bid.quantity * (bid.discountScheme?.discountedPrice ?? 0), 0);\r\n\r\n    const totalQuantity: number = selectedBids\r\n        .reduce((accum, bid) => accum + bid.quantity ?? 0, 0);\r\n\r\n    \r\n    \r\n    return <Paper>\r\n        <Grid container spacing={3}>\r\n            <Grid item xs={3}></Grid>\r\n            <Grid item xs={6}>\r\n                <Typography variant={\"body1\"} align={\"center\"} color=\"textSecondary\" paragraph={true}><b>Total Quantity: </b>{totalQuantity}</Typography>\r\n                <Typography variant={\"body1\"} align={\"center\"} color=\"textSecondary\" paragraph={true}><b>Total Price: </b>${totalPrice}</Typography>\r\n                <Typography variant={\"body1\"} align={\"center\"} color=\"textSecondary\" paragraph={true}><b>Total Delivery Charge: </b>${totalDeliveryCharge}</Typography>\r\n                <Typography variant={\"body1\"} align={\"center\"} color=\"secondary\" paragraph={true}><b>Grand Total: </b>${totalDeliveryCharge + totalQuantity}</Typography>\r\n            </Grid>\r\n            <Grid item xs={3} alignContent=\"flex-end\">\r\n                <Button color=\"secondary\" size=\"large\" variant=\"contained\" onClick={handleOrder} disabled={selectedBids.length < 1}>Order Bids</Button>\r\n            </Grid>        \r\n        </Grid> \r\n    </Paper>\r\n    \r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { Bid } from \"../models/Bid\";\r\nimport { RootState } from \"../store/rootReducer\";\r\nimport { deleteBidFromCartAsync, getBidsOfCustomerInCartAsync, orderBidsFromCart, updateBidInCartAsync } from \"../store/thunks/bidThunk\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Dispatch } from \"redux\"; \r\nimport { DataTable } from \"../components/DataTable\";\r\nimport AddShoppingCartIcon from '@material-ui/icons/AddShoppingCart';\r\nimport { CartButtons } from \"../components/CartButtons\";\r\nimport { SnackbarComponent } from \"../components/SnackbarComponent\";\r\nimport { Button, Container } from \"@material-ui/core\";\r\nimport Checkbox from '@material-ui/core/Checkbox';\r\nimport { OrderCheckoutComponent } from \"../components/OrderCheckoutComponent\";\r\nimport { ACTIONS } from \"../store/actionEnums\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SelectListItem } from \"../models/SelectListItem\";\r\nimport { SelectControlledComponent } from \"../components/SelectComponents\";\r\nimport { Grid } from \"@material-ui/core\";\r\nimport { TextComponent } from \"../components/TextComponent\";\r\nimport { cloneDeep } from \"lodash\";\r\n\r\nclass Row {\r\n    bidId: number | undefined;\r\n    checkbox: JSX.Element | undefined;\r\n    name: string | undefined;\r\n    discountedPrice: string | undefined;\r\n    updateCartComponent: JSX.Element | undefined;    \r\n    collectionAddress: JSX.Element | undefined;\r\n    deliveryCharge: JSX.Element | undefined;\r\n    deleteButton: JSX.Element | undefined;\r\n    detailPanel: JSX.Element | undefined;\r\n}\r\n\r\nexport function CartPage(): JSX.Element {\r\n    const history = useHistory();          \r\n    const dispatch: Dispatch<any> = useDispatch(); \r\n\r\n    // State to determine whether to show notification\r\n    const [open, setOpen] = useState(false);\r\n    const [notificationMessage, setNotificationMessage] = useState(\"\");\r\n    const handleNotification = (isOpen: boolean, message: string) => {\r\n        setOpen(isOpen);\r\n        setNotificationMessage(message);\r\n    }    \r\n\r\n    // The Bids received from the GET request\r\n    const bidsInCart: Bid[] = useSelector((action: RootState) => action.bidReducer.bids as Bid[] ) ?? [];  \r\n    const [bids, setBids] = useState<Bid[]>([]);\r\n    useEffect(() => {\r\n        setBids(cloneDeep(bidsInCart));\r\n    }, [bidsInCart.length])\r\n    console.log(\"bids received\", bidsInCart);\r\n\r\n    // For some reason, useState(bidsInCart.map(bid => bid.quantity)) will produce only an empty array\r\n    // React hooks are always one step behind. On next render, the state variable will have a new value.\r\n    useEffect(() => {\r\n        document.title = \"Cart\";\r\n        const customerId = 1;\r\n        const action = getBidsOfCustomerInCartAsync(customerId);\r\n        dispatch(action);        \r\n    }, []); \r\n\r\n    // When the user selects the row (Bid) in the datatable\r\n    const [selectedRowBidIds, setSelectedRowBidIds] = useState<number[]>([]);\r\n    const handleOrder = () => {\r\n        let bidsToOrder: Bid[] = bids.filter(bid => selectedRowBidIds.includes(bid.bidId));\r\n        const action = orderBidsFromCart(bidsToOrder);\r\n        dispatch(action);\r\n    };\r\n\r\n    //Response on update. If update is successful, make another request to get bids in cart\r\n    const apiMessage: string = useSelector( (action: RootState) => action.bidReducer.httpMessage as string ) ?? \"\"; \r\n    useEffect(() => {\r\n        // if user successful update quantity or remove from cart, refresh page\r\n        if (apiMessage.includes(ACTIONS.HTTP_UPDATE_SUCCESS) || apiMessage.includes(ACTIONS.HTTP_DELETE_SUCCESS)) {\r\n            const customerId = 1;\r\n            // const action = getBidsOfCustomerInCartAsync(customerId);\r\n            //dispatch(action); \r\n        }\r\n        // if user successfully makes an order, redirect to orders page\r\n        if (apiMessage.includes(ACTIONS.HTTP_UPDATE_ORDER_SUCCESS)) {\r\n            console.log(apiMessage);\r\n            history.push(\"/orders\");\r\n        }\r\n    }, [apiMessage]);\r\n\r\n    // Convert the Bids to Rows to pass to the DataTable\r\n    const rows: Row[] = bids.map(bid => createRowFromBid(bid));    \r\n\r\n    // To add React components to each row\r\n    for (let i = 0; i < bids.length; i++) {\r\n        let bid: Bid = bids[i];       \r\n        const quantity: number = bid.quantity as number;\r\n\r\n        // Method reference to POST updated id to pass into CartButtons\r\n        const handleUpdateCart = (newQuantity: number, collectionAddress: string) => {\r\n            let bidsCopy: Bid[] = cloneDeep(bidsInCart);    \r\n            let bidCopy = bidsCopy[i];\r\n            bidCopy.quantity = newQuantity;\r\n            bidCopy.collectionAddress = collectionAddress;\r\n            setBids(bidsCopy);\r\n            const updateAction = updateBidInCartAsync(bidCopy);\r\n            dispatch(updateAction);\r\n            handleNotification(true, \"bid added to cart\"); \r\n        }\r\n\r\n        // Method reference to set quantity to pass into CartButtons\r\n        const handleChangeQuantity = (newQuantity: number) => {\r\n            handleUpdateCart(newQuantity, bid.collectionAddress);            \r\n        };\r\n\r\n        const handleChangeAddress = (event: React.ChangeEvent<any>) => {\r\n            let selectedAddress: string = event.target.value;\r\n            handleUpdateCart(bid.quantity, selectedAddress);\r\n        }\r\n\r\n        const toggleCheckedRowId = () => {\r\n            const bidId: number = bid.bidId;\r\n            if (!selectedRowBidIds.includes(bidId)) {\r\n                setSelectedRowBidIds([...selectedRowBidIds, bidId])\r\n            } else {\r\n                let newSelectedRowIds: number[] = selectedRowBidIds.filter(id => id !== bidId);\r\n                setSelectedRowBidIds(newSelectedRowIds);\r\n            }\r\n        }\r\n\r\n        const deleteBid = () => {\r\n            const bidId: number = bid.bidId;\r\n            const deleteAction = deleteBidFromCartAsync(bidId);            \r\n            dispatch(deleteAction);\r\n            handleNotification(true, \"item deleted\");\r\n            let newBids = cloneDeep(bids).filter((bid, index) => index != i);\r\n            console.log(bids, newBids);\r\n            setBids(newBids);\r\n        } \r\n\r\n        let dateString = \"\";\r\n        if (bid.discountScheme?.expiryDate) {\r\n            let date: Date = new Date(bid.discountScheme.expiryDate.toString());\r\n            dateString = date.toDateString();        \r\n        }\r\n\r\n        rows[i].updateCartComponent = <CartButtons quantity={quantity} setQuantity={handleChangeQuantity} size={\"small\"}/>\r\n        rows[i].checkbox = <Checkbox size=\"small\" onChange={toggleCheckedRowId} />\r\n        rows[i].deleteButton = <Button size={\"small\"} variant={\"contained\"} color={\"primary\"} onClick={deleteBid}>Delete</Button>\r\n\r\n        // Collection Address\r\n        const addressBidCountDict = bid.addressBidCountDict as Record<string, number>;   // { collectionAddress: number of bids} \r\n        const selectListItems: SelectListItem[] = [];\r\n        for (let address in addressBidCountDict) {\r\n            let selectListItem: SelectListItem = new SelectListItem(address, address);\r\n            selectListItem.selected = bid.collectionAddress === address;\r\n            selectListItems.push(selectListItem);\r\n        }        \r\n        rows[i].collectionAddress = <SelectControlledComponent title={\"Delivery\"} state={bid.collectionAddress} selectListItems={selectListItems} handleChange={handleChangeAddress} />\r\n\r\n        // Detail Panel\r\n        let descriptionDict: Record<string, any> = {\r\n            \"Description\": bid.discountScheme?.product?.description,\r\n            \"Bid Expiry Date\": dateString\r\n        }  \r\n\r\n        let quantityDict: Record<string, any> = {\r\n            \"Min Order Quantity\": bid.discountScheme?.minOrderQnty,\r\n            \"Current total bids\": bid.currentTotalBids,\r\n            \"Remaining bids required\": bid.discountScheme?.minOrderQnty as number - (bid.currentTotalBids as number)\r\n        }\r\n\r\n        let deliveryDict: Record<string, any> = {\r\n            \"Delivery Charge\": \"$\" + bid.discountScheme?.deliveryCharge\r\n        }\r\n        rows[i].detailPanel = <Grid container>\r\n            <Grid item xs={4}>\r\n                <TextComponent textDict={descriptionDict}/>\r\n            </Grid>\r\n            <Grid item xs={4}>\r\n                <TextComponent textDict={quantityDict}/>\r\n            </Grid>\r\n            <Grid item xs={4}>\r\n                <TextComponent textDict={deliveryDict}/>\r\n            </Grid>\r\n        </Grid>\r\n        \r\n    }\r\n\r\n    let accessors: string[] = Object.keys(new Row());   // accessors allow the DataTable to access the properties of the Row object. \r\n    const detailPanelName: string = \"detailPanel\";  // Remove access to detailPanel property\r\n    accessors = accessors.filter(accessor => accessor !== detailPanelName);\r\n    const columnNames: any[] = [\"BidId\", \"Check Box\", \"Name\", \"Price per Item\", \"Quantity\", \"Collection Address\", \"Average Delivery Charge\", \"Remove\"];\r\n\r\n    return <Container maxWidth=\"xl\">\r\n        <OrderCheckoutComponent bids={bids} rowIds={selectedRowBidIds} handleOrder={handleOrder} />\r\n        <br/>\r\n        <DataTable data={rows} columnNames={columnNames} accessors={accessors} title=\"Cart\" \r\n            idColumnAccessorName={\"bidId\"}             \r\n            actionMessage=\"Make Order\"  actionIcon={AddShoppingCartIcon}  \r\n            enabledDetailPanel={true} detailPanelFieldName={detailPanelName} />\r\n        <SnackbarComponent open={open} setOpen={setOpen} message={notificationMessage} severity={\"success\"}/>        \r\n    </Container>\r\n}\r\n\r\n\r\nfunction createRowFromBid(bid: Bid): Row {   \r\n\r\n    let discountedPrice = bid.discountScheme?.discountedPrice as number;\r\n    let originalPrice = bid.discountScheme?.product?.originalPrice as number;\r\n\r\n    let row: Row = new Row();\r\n    row.bidId = bid.bidId;\r\n    row.discountedPrice = `$${discountedPrice} (Save $${originalPrice - discountedPrice})`;\r\n    row.name = bid.discountScheme?.product?.name;\r\n\r\n    const addressBidCountDict = bid.addressBidCountDict as Record<string, number>; \r\n    const numBidsAtAddress: number = addressBidCountDict[bid.collectionAddress];\r\n    const deliveryCharge: number = bid?.discountScheme?.deliveryCharge ?? 0;\r\n    const avgDeliveryCharge: number = (!numBidsAtAddress) ? deliveryCharge : deliveryCharge / (numBidsAtAddress + 1);\r\n    row.deliveryCharge = <Grid container>\r\n        <Grid item xs={6}>\r\n            <span>{`$${avgDeliveryCharge}`}</span>\r\n        </Grid>\r\n        <Grid item xs={6}>\r\n            <span style={{borderBottom:\"1px solid black\", display:\"block\", fontSize:\"12px\"}}>${deliveryCharge}</span>\r\n            <span style={{fontSize:\"12px\"}}>{numBidsAtAddress} other bids here</span>\r\n        </Grid>\r\n    </Grid>\r\n    \r\n    return row;\r\n}\r\n ","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Dispatch } from \"redux\"; \r\nimport { Bid } from \"../models/Bid\";\r\nimport { RootState } from \"../store/rootReducer\";\r\nimport { getPendingOrSuccessfulBids } from \"../store/thunks/bidThunk\";\r\nimport { Container } from \"@material-ui/core\";\r\nimport { DataTable } from \"../components/DataTable\";\r\n\r\nclass Row {\r\n    name: string | undefined;\r\n    discountedPrice: string | undefined;\r\n    quantity: string | undefined;\r\n    deliveryCharge: string | undefined;\r\n    collectionAddress: string | undefined;\r\n    remainingBidsRequired: number | undefined;\r\n    bidExpiryDate: string | undefined;\r\n    bidStatus: \"SUCCESS\" | \"PENDING\" | \"FAILED\" | undefined\r\n};\r\n\r\nexport function OrdersPage(): JSX.Element {\r\n    document.title = \"Orders\";\r\n    const dispatch: Dispatch<any> = useDispatch();\r\n\r\n    const bids: Bid[] = useSelector((action: RootState) => action.bidReducer.bids as Bid[] ) ?? [];\r\n\r\n    useEffect(() => {\r\n        const customerId: number = 1;\r\n        const action = getPendingOrSuccessfulBids(customerId);\r\n        dispatch(action);\r\n    }, []);\r\n\r\n    const columnNames: string[] = [\"Name\", \"Discounted Price Per Item\", \"Quantity\", \"Delivery Charge\", \"Collection Address\", \"Remaining Bids Required\", \"Bid Expiry Date\", \"Bid Status\"];\r\n    const accessors: string[] = Object.keys(new Row());\r\n    const rows: Row[] = bids.map(bid => createRowFromBid(bid));\r\n\r\n     return <Container maxWidth=\"lg\">\r\n         <DataTable columnNames={columnNames} accessors={accessors} data={rows} title={\"Submitted Bids\"} enablePaging={true} pageSize={5} />\r\n     </Container>\r\n}\r\n\r\nfunction createRowFromBid(bid: Bid): Row {   \r\n\r\n    let discountedPrice: number = bid.discountScheme?.discountedPrice as number;\r\n    let originalPrice: number = bid.discountScheme?.product?.originalPrice as number;\r\n    let minOrderQnty: number = bid.discountScheme?.minOrderQnty as number;\r\n    let currentTotalBids: number = bid.currentTotalBids as number;\r\n    console.log(\"remainingBidsRequired\", minOrderQnty, currentTotalBids, minOrderQnty - currentTotalBids, \"bidId: \" + bid.bidId);\r\n\r\n    let row: Row = new Row();\r\n    row.quantity = bid.quantity + \"\";\r\n    row.collectionAddress = bid.collectionAddress;\r\n    row.discountedPrice = `$${discountedPrice} (Save $${originalPrice - discountedPrice})`;\r\n    row.deliveryCharge = \"$\" + bid.discountScheme?.deliveryCharge;\r\n    row.name = bid.discountScheme?.product?.name;\r\n    row.remainingBidsRequired = minOrderQnty - currentTotalBids;\r\n\r\n    let expiryDate: Date = new Date(bid.discountScheme?.expiryDate as Date);    //json return date as strings\r\n    row.bidExpiryDate = expiryDate.toDateString();\r\n\r\n    if (bid.bidSuccessDate != null) {\r\n        row.bidStatus = \"SUCCESS\";        \r\n    } else if (new Date() > expiryDate) {\r\n        row.bidStatus = \"FAILED\";\r\n    } else {\r\n        row.bidStatus = \"PENDING\";\r\n    }\r\n    \r\n    return row;\r\n}\r\n ","import { DiscountScheme } from \"./DiscountScheme\";\r\n\r\nexport class Product {\r\n    productId: number = 0;\r\n    name: string = \"\";\r\n    category: string = \"\";\r\n    description: string = \"\";\r\n    originalPrice: number = 0;\r\n    producerId: number = 0;\r\n\r\n    discountSchemes: DiscountScheme[] = [];\r\n\r\n}","import React from \"react\";\r\nimport Dialog from '@material-ui/core/Dialog';\r\nimport DialogActions from '@material-ui/core/DialogActions';\r\nimport DialogContent from '@material-ui/core/DialogContent';\r\nimport DialogTitle from '@material-ui/core/DialogTitle';\r\nimport { Button } from \"@material-ui/core\";\r\nimport CardMedia from '@material-ui/core/CardMedia'; \r\nimport imageUrl  from  \"../../src/images/e_commerce.png\";\r\nimport Grid from '@material-ui/core/Grid';\r\nimport Container from '@material-ui/core/Container';\r\n\r\ninterface IProps {\r\n    open: boolean;  //open is part of useState(false)\r\n    toggleOpen: () => void; //toggleOpen is part of useState(false)\r\n    title?: string;\r\n    showPicture?: boolean;\r\n    content?: JSX.Element;  // paragraphs to display, e.g. [<p></p>, <p></p>]\r\n    actionTitle?: string,   //title of button\r\n    action?: (arg?: any) => any; //callback function on button click\r\n    secondaryActionTitle?: string,\r\n    secondaryAction?: (arg?: any) => any;\r\n}\r\n\r\nexport function DialogComponent({open, toggleOpen, title, content, actionTitle, action, showPicture=false, secondaryActionTitle, secondaryAction}: IProps): JSX.Element {\r\n\r\n    return <Dialog open={open} onClose={toggleOpen} aria-labelledby=\"form-dialog-title\" maxWidth=\"sm\" fullWidth>\r\n        <DialogTitle id=\"form-dialog-title\">{title}</DialogTitle>\r\n            <DialogContent>\r\n                { showPicture &&\r\n                    <CardMedia \r\n                        component=\"img\"\r\n                        \r\n                        //height=\"140\"\r\n                        image={imageUrl}\r\n                        title=\"https://acowebs.com/impact-ecommerce-society/\"/>\r\n                } \r\n                <br/>               \r\n                {content}                \r\n            </DialogContent>\r\n\r\n            <Container>\r\n                <Grid container spacing={0}>\r\n                    <Grid item xs={8}></Grid>\r\n                    <Grid item xs={4}>\r\n                    {actionTitle &&\r\n                        <DialogActions>\r\n                            <Button onClick={action} color=\"primary\" variant=\"outlined\">\r\n                                {actionTitle}\r\n                            </Button>\r\n                        </DialogActions>\r\n                    } \r\n                    </Grid>\r\n                </Grid>                       \r\n\r\n                <Grid container spacing={0}>\r\n                    <Grid item xs={4}>\r\n                    {secondaryActionTitle &&\r\n                        <DialogActions>\r\n                            <Button onClick={secondaryAction as () => {}} color=\"secondary\" variant=\"outlined\">\r\n                                {secondaryActionTitle}\r\n                            </Button>\r\n                        </DialogActions>\r\n                    }  \r\n                    </Grid>\r\n                    <Grid item xs={4}></Grid>\r\n                    <Grid item xs={4}>\r\n                        <DialogActions>                \r\n                            <Button onClick={toggleOpen} color=\"primary\" variant=\"outlined\">\r\n                                Close\r\n                            </Button>\r\n                        </DialogActions>\r\n                    </Grid>\r\n                </Grid>\r\n            </Container>\r\n            \r\n            \r\n            \r\n    </Dialog>\r\n\r\n}\r\n","import { Container, Grid } from \"@material-ui/core\";\r\nimport React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Dispatch } from \"redux\"; \r\nimport { DataTable } from \"../components/DataTable\";\r\nimport { DiscountScheme } from \"../models/DiscountScheme\";\r\nimport { RootState } from \"../store/rootReducer\";\r\nimport { deleteDiscountSchemeAsync, getDiscountSchemesWithBidOfProducer } from \"../store/thunks/discountSchemeThunk\";\r\nimport { cloneDeep, uniqBy } from \"lodash\";\r\nimport Button from '@material-ui/core/Button';\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { SelectControlledComponent } from \"../components/SelectComponents\";\r\nimport { SelectListItem } from \"../models/SelectListItem\";\r\nimport { Product } from \"../models/Product\";\r\nimport { DialogComponent } from \"../components/DialogComponent\";\r\nimport { TextComponent } from \"../components/TextComponent\";\r\nimport Autocomplete from '@material-ui/lab/Autocomplete';\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { ACTIONS } from \"../store/actionEnums\";\r\n\r\ntype Status = \"SUCCESS\" | \"PENDING\" | \"FAILED\" | undefined;\r\n\r\nclass Row {\r\n    name: JSX.Element | undefined;\r\n    discountedPrice: JSX.Element | undefined;\r\n    deliveryCharge: string | undefined = \"0\";\r\n    minOrderQnty: number | undefined = 0;\r\n    currentBids: number | undefined = 0;    \r\n    bidExpiryDate: string | undefined  = \"\";\r\n    bidStatus: Status;\r\n    delete: JSX.Element | undefined;\r\n}\r\n\r\nexport function ProducerDiscountSchemePage(): JSX.Element {\r\n\r\n    document.title = \"Schemes\";\r\n    const producerId: number = 2;\r\n    const dispatch: Dispatch<any> = useDispatch();\r\n    const history = useHistory(); \r\n\r\n    // Single source of truth, avoid mutating it\r\n    const immutableDiscountSchemes: DiscountScheme[] = useSelector((action: RootState) => action.discountSchemeReducer.discountSchemes as DiscountScheme[]) ?? [];\r\n    useEffect(() => {\r\n        \r\n        const action = getDiscountSchemesWithBidOfProducer(producerId);\r\n        dispatch(action);\r\n    }, []);\r\n\r\n    // For the AutoComplete Filter\r\n    let products: Product[] = immutableDiscountSchemes.map(ds => ds.product ?? new Product());\r\n    products = uniqBy(products, (product) => product.name);    \r\n\r\n    // DiscountSchemes to dispaly to the data table, subject to filtering\r\n    const [discountSchemes, setDiscountSchemes] = useState<DiscountScheme[]>([]);\r\n    useEffect(() => {\r\n        console.log(immutableDiscountSchemes);\r\n        setDiscountSchemes(immutableDiscountSchemes);        \r\n    }, [immutableDiscountSchemes.length]);\r\n\r\n    const [status, setStatus] = useState<Status>();\r\n    const handleStatusChange = ((event: React.ChangeEvent<any>) => {\r\n        let selectedStatus: Status = event.target.value as Status;\r\n        setStatus(selectedStatus);\r\n    });\r\n\r\n    //Status filtering\r\n    const selectListItems: SelectListItem[] = [\"SUCCESS\", \"PENDING\", \"FAILED\"].map((status) => new SelectListItem(status, status));\r\n    \r\n    // Product name filtering\r\n    const [productName, setProductName] = useState<string>(\"\");\r\n    const handleChangeProductName = (name: string) => {\r\n        console.log(name);\r\n        setProductName(name);\r\n    }\r\n\r\n    useEffect(() => {\r\n        let discountSchemesCopy: DiscountScheme[] = cloneDeep(immutableDiscountSchemes);\r\n        discountSchemesCopy = discountSchemesCopy\r\n            .filter(ds => status ? determineStatusOfScheme(ds) === status : true )\r\n            .filter(ds => productName ? ds.product?.name?.toLowerCase()?.includes(productName.toLowerCase()) : true)\r\n        setDiscountSchemes(discountSchemesCopy);\r\n    }, [status, productName]);\r\n\r\n    // To display the product as a dialog when user clicks on the link\r\n    const [openProductDialog, setOpenProductDialog] = useState<boolean>(false);\r\n    const [product, setProduct] = useState<Product>(new Product());\r\n    let productTextDict: Record<string, any> = {\r\n        \"Name\": product.name,\r\n        \"Original Price\": \"$\" + product.originalPrice,\r\n        \"Category\": product.category,\r\n        \"Description\": product.description        \r\n    }\r\n    let productTextComponent: JSX.Element = <TextComponent textDict={productTextDict} />\r\n\r\n    // To redirect user to create discount Scheme\r\n    const redirectToForm = () => history.push(\"/producer/discountSchemes/create\");   \r\n\r\n    // To create rows for the data table\r\n    const rows: Row[] = [];\r\n\r\n    // When user clicks delete in the opened product dialog, close it, then open another and confirm delete\r\n    const [openDeleteDialog, setOpenDeleteDialog] = useState<boolean>(false); \r\n    const [targetDiscountScheme, setTargetDiscountScheme] = useState<DiscountScheme>(new DiscountScheme());\r\n    const deleteProduct = () => {\r\n        if (targetDiscountScheme.bids.length > 0) {\r\n            return;\r\n        }\r\n        console.log(\"discountSchemeId\", targetDiscountScheme.discountSchemeId);\r\n        const deleteAction = deleteDiscountSchemeAsync(targetDiscountScheme.discountSchemeId);\r\n        dispatch(deleteAction);\r\n        setOpenDeleteDialog(false);\r\n    } \r\n\r\n    let httpResponseMessage: string = useSelector((action: RootState) => action.discountSchemeReducer.httpMessage as string) ?? \"\";\r\n    console.log(\"in ProductPage\", httpResponseMessage);\r\n    useEffect(() => {\r\n        if (httpResponseMessage.includes(ACTIONS.HTTP_DELETE_SUCCESS)) {\r\n            \r\n            const action = getDiscountSchemesWithBidOfProducer(producerId);\r\n            dispatch(action);\r\n        }\r\n    }, [httpResponseMessage]);\r\n\r\n    // Set the rows for the datatable\r\n    for (let ds of discountSchemes) {\r\n        let row: Row = createRowFromScheme(ds);\r\n        const onNameClick = () => {\r\n            let product: Product = discountSchemes\r\n                .map(ds => ds.product)\r\n                .find(product => product?.productId === ds.productId) ?? new Product();\r\n            setProduct(product);\r\n\r\n            setOpenProductDialog(!openProductDialog);\r\n        };\r\n        const onDeleteClick = () => {\r\n            setTargetDiscountScheme(ds);\r\n            setOpenDeleteDialog(true);\r\n        }\r\n\r\n        // Disallow deleting of schemes which have bids\r\n        const isDisableDelete: boolean = ds.bids.length > 0;\r\n        let tooltipMessage: string = isDisableDelete ? \"Cannot delete scheme as it has dependent bids\" : \"\";\r\n\r\n        row.name = <Button onClick={onNameClick} size=\"small\" variant=\"outlined\">{ds.product?.name}</Button> ;\r\n        row.delete = <div className=\"tooltip__div-visible\">\r\n            <Button size=\"small\" variant=\"outlined\" color=\"secondary\" disabled={isDisableDelete}\r\n                onClick={onDeleteClick}>Delete\r\n                    <span className=\"tooltiptext\">{tooltipMessage}</span>\r\n                </Button>\r\n        </div> ;\r\n        rows.push(row);\r\n    }\r\n\r\n    \r\n    const columnNames: string[] = [\"Name\", \"Discounted Price\", \"Delivery Charge\",  \"Min Order Qnty\", \"Current Bids\",\"Expiry Date\", \"Bid Status\", \"Delete\"];\r\n    const accessors: string[] = Object.keys(new Row());        \r\n\r\n    return <Container maxWidth=\"lg\">\r\n        <Grid container>\r\n            <Grid item xs={2}>\r\n                <SelectControlledComponent title=\"Status\" state={status} selectListItems={selectListItems} handleChange={handleStatusChange}  />\r\n            </Grid> \r\n            <Grid item xs={3}>\r\n            <Autocomplete\r\n                id=\"combo-box-demo\"\r\n                options={products}\r\n                getOptionLabel={(option: Product) => option.name ?? \"\"}\r\n                style={{ width: 300 }}\r\n                onInputChange={(event, value) => handleChangeProductName(value)}\r\n                renderInput={(params) => <TextField {...params} label=\"Products\" variant=\"outlined\" />}\r\n            />\r\n            </Grid>\r\n            <Grid item xs={5}></Grid>     \r\n            <Grid item xs={2}>\r\n                <Button onClick={redirectToForm} variant=\"contained\" color=\"primary\">\r\n                    Create Scheme\r\n                </Button>\r\n            </Grid>        \r\n        </Grid>\r\n        <br/>\r\n        <DataTable columnNames={columnNames} accessors={accessors} data={rows} title={\"Discount Schemes\"} enablePaging={true} pageSize={5} />\r\n        \r\n        <DialogComponent open={openProductDialog} toggleOpen={() => setOpenProductDialog(!openProductDialog)} \r\n            content={productTextComponent} showPicture />\r\n        <DialogComponent open={openDeleteDialog} toggleOpen={() => setOpenDeleteDialog(!openDeleteDialog)} content={<p>Confirm Delete?</p>}\r\n            secondaryAction={deleteProduct} secondaryActionTitle=\"Delete Product\"/>\r\n    </Container>\r\n}\r\n\r\nfunction createRowFromScheme(ds: DiscountScheme): Row {\r\n    let row: Row = new Row();\r\n    if (ds == null) {\r\n        return row;\r\n    }\r\n    \r\n    const discountedPrice = ds.discountedPrice;\r\n    const originalPrice = ds.product?.originalPrice;\r\n    row.discountedPrice = <span>${discountedPrice} <del>${originalPrice}</del></span>\r\n\r\n    const expiryDate: Date = new Date(ds.expiryDate as Date);\r\n    row.bidExpiryDate = expiryDate.toDateString();\r\n    row.deliveryCharge = \"$\" + ds.deliveryCharge;\r\n    row.currentBids =  ds.bids\r\n        .filter(bid => !bid.isInCart)\r\n        .reduce((accum, bid) => accum + bid.quantity, 0);\r\n\r\n    row.minOrderQnty = ds.minOrderQnty;\r\n    row.bidStatus = determineStatusOfScheme(ds);\r\n\r\n    return row;    \r\n}\r\n\r\nfunction determineStatusOfScheme(ds: DiscountScheme): Status {\r\n    const expiryDate: Date = new Date(ds.expiryDate as Date);\r\n\r\n    const isSchemeSuccess: boolean = ds.bids.some(bid => bid.bidSuccessDate != null);\r\n    const hasBidExpired: boolean = expiryDate < new Date();\r\n\r\n    if (isSchemeSuccess) {\r\n        return \"SUCCESS\"\r\n    } else if (!isSchemeSuccess && hasBidExpired ) {\r\n        return \"FAILED\";\r\n    } else {\r\n        return \"PENDING\";\r\n    }\r\n}","import { Action } from \"redux\";\r\nimport { Product } from \"../../models/Product\";\r\nimport { ThunkAction, ThunkDispatch } from \"redux-thunk\";\r\nimport { ACTIONS } from \"../actionEnums\";\r\nimport { IErrorAction, errorAction } from \"../actions/errorAction\";\r\nimport { ApiError } from \"../../models/ApiError\";\r\n\r\nexport interface IProductAction extends Action {\r\n    type: string;\r\n    product?: Product | undefined;\r\n    products?: Product[] | undefined;\r\n    message?: string;  \r\n    httpMessage?: string // For API messages\r\n}\r\n\r\nexport function getProductsAsync(producerId: number): ThunkAction<Promise<void>, {}, {}, IProductAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IProductAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.GET_PRODUCTS_REQUEST, message: \"Getting products of producer ...\" });\r\n\r\n        try {\r\n            const response: Response = await fetch(\"https://localhost:44397/api/products/producer/\" + producerId);\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            let products: Product[] = (await response.json());\r\n            dispatch({ type: ACTIONS.GET_PRODUCTS_RECEIVED, products: products, message: response.statusText,  httpMessage: ACTIONS.HTTP_READ_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }        \r\n        \r\n    }\r\n}\r\n\r\nexport function getProductAsync(productId: number): ThunkAction<Promise<void>, {}, {}, IProductAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IProductAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.GET_PRODUCT_REQUEST, message: \"Getting products of producer ...\" });\r\n\r\n        try {\r\n            const response: Response = await fetch(\"https://localhost:44397/api/products/\" + productId);\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            let product: Product = (await response.json());\r\n            console.log(\"In productThunk\", product)\r\n            dispatch({ type: ACTIONS.GET_PRODUCT_RECEIVED, product: product, message: response.statusText,  httpMessage: ACTIONS.HTTP_READ_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }        \r\n        \r\n    }\r\n}\r\n\r\nexport function createProductsAsync(product: Product): ThunkAction<Promise<void>, {}, {}, IProductAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IProductAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.GET_PRODUCTS_REQUEST, message: \"Creating product ...\" });\r\n\r\n        try {\r\n            const response: Response = await fetch(\"https://localhost:44397/api/products/\", {\r\n                method: \"POST\",\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(product)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                console.log(\"apiError in createProductAsync\", apiError);\r\n                throw apiError;\r\n            }\r\n            \r\n            let createdProduct: Product = (await response.json());\r\n            dispatch({ type: ACTIONS.GET_PRODUCTS_RECEIVED, product: createdProduct, message: response.statusText,  httpMessage: ACTIONS.HTTP_CREATE_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }        \r\n        \r\n    }\r\n}\r\n\r\nexport function updateProductAsync(productId: number, product: Product): ThunkAction<Promise<void>, {}, {}, IProductAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IProductAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.UPDATE_PRODUCT_REQUEST, message: \"Updating product ...\" });\r\n\r\n        try {\r\n            const response: Response = await fetch(\"https://localhost:44397/api/products/\" + productId, {\r\n                method: \"PUT\",\r\n                headers: { 'Content-Type': 'application/json' },\r\n                body: JSON.stringify(product)\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            let updatedProduct: Product = (await response.json());\r\n            console.log(\"updatedProduct\", updatedProduct);\r\n            dispatch({ type: ACTIONS.GET_PRODUCTS_RECEIVED, product: updatedProduct, message: response.statusText,  httpMessage: ACTIONS.HTTP_UPDATE_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }        \r\n        \r\n    }\r\n}\r\n\r\nexport function deleteProductAsync(productId: number): ThunkAction<Promise<void>, {}, {}, IProductAction | IErrorAction> {\r\n    return async (dispatch: ThunkDispatch<{}, {}, IProductAction | IErrorAction>) => {\r\n        dispatch({ type: ACTIONS.DELETE_PRODUCT_REQUEST, message: \"Deleting product ...\" });\r\n\r\n        try {\r\n            const response: Response = await fetch(\"https://localhost:44397/api/products/\" + productId, {\r\n                method: \"DELETE\"\r\n            });\r\n\r\n            if (!response.ok) {\r\n                let apiError: ApiError = await response.json();\r\n                throw apiError;\r\n            }\r\n            \r\n            let deletedProduct: Product = (await response.json());\r\n            console.log(\"deletedProduct\", deletedProduct);\r\n            dispatch({ type: ACTIONS.DELETE_PRODUCT_RECEIVED, product: deletedProduct, message: response.statusText,  httpMessage: ACTIONS.HTTP_DELETE_SUCCESS });\r\n        } catch(error) {\r\n            dispatch(errorAction(ACTIONS.ERROR, error));\r\n        }        \r\n        \r\n    }\r\n}\r\n","import React from \"react\";\r\nimport DateFnsUtils from '@date-io/date-fns';\r\nimport { MuiPickersUtilsProvider, KeyboardDatePicker} from '@material-ui/pickers';\r\nimport { v4 as guid } from 'uuid';\r\nimport { Control, Controller, DeepMap, FieldError } from \"react-hook-form\";\r\n\r\ninterface IPropUncontrolled {\r\n    label: string,\r\n    name: string,\r\n    errorMessage?: string,\r\n    defaultValue?: string,\r\n    control: Control<Record<string, any>>,\r\n    errors: DeepMap<Record<string, any>, FieldError>,\r\n    rules?: object\r\n}\r\n\r\nexport function DatePickerUncontrolledComponent({ control, errors, label, name, defaultValue=\"\", errorMessage=\"\", rules={}}: IPropUncontrolled): JSX.Element {\r\n    let isError: boolean = errors[name] != null;\r\n    let helperText: string = isError ? errorMessage : \"\";\r\n    return <Controller\r\n        name={name}\r\n        defaultValue={defaultValue}\r\n        control={control}\r\n        rules={rules}\r\n        render={props => <DatePickerControlledComponent {...props} label={label} error={isError} helperText={helperText} />} // props contains: onChange, onBlur and value\r\n    />  \r\n}\r\n\r\ninterface IPropControlled {\r\n    onChange: () => void;\r\n    label: string;\r\n    value: Date;\r\n    error?: boolean;\r\n    helperText?: string\r\n}\r\n\r\nexport function DatePickerControlledComponent({label, onChange, value, error=false, helperText=\"\"}: IPropControlled): JSX.Element {\r\n\r\n    if (!value) {\r\n        value = new Date();\r\n    }\r\n    return <MuiPickersUtilsProvider utils={DateFnsUtils}>\r\n        <KeyboardDatePicker\r\n            error={error}\r\n            helperText={helperText}\r\n            disableToolbar\r\n            variant=\"inline\"\r\n            format=\"dd/MM/yyyy\"\r\n            margin=\"normal\"\r\n            id={guid()}\r\n            label={label}\r\n            value={value }\r\n            onChange={onChange}\r\n            KeyboardButtonProps={{\r\n                'aria-label': 'change date',\r\n            }} />\r\n    </MuiPickersUtilsProvider>\r\n}","import React, { useEffect } from \"react\";\r\nimport { Container, Grid, TextField } from \"@material-ui/core\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Dispatch } from \"redux\"; \r\nimport { Product } from \"../models/Product\";\r\nimport { RootState } from \"../store/rootReducer\";\r\nimport { getProductsAsync } from \"../store/thunks/productThunk\";\r\nimport { SelectListItem } from \"../models/SelectListItem\";\r\nimport { DatePickerUncontrolledComponent } from \"../components/DatePickerComponent\";\r\nimport { useForm, Controller } from \"react-hook-form\";\r\nimport { TextFieldUncontrolledComponent } from \"../components/TextFieldComponents\";\r\nimport Button from '@material-ui/core/Button';\r\nimport { DiscountScheme } from \"../models/DiscountScheme\";\r\nimport { TextComponent } from \"../components/TextComponent\";\r\nimport { createDiscountSchemeAsync } from \"../store/thunks/discountSchemeThunk\";\r\nimport { ACTIONS } from \"../store/actionEnums\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Autocomplete } from \"@material-ui/lab\";\r\n\r\nenum FORM_NAMES {\r\n    productId = \"productId\",\r\n    discountedPrice = \"discountedPrice\",\r\n    minOrderQnty = \"minOrderQnty\",\r\n    deliveryCharge = \"deliveryCharge\",\r\n    expiryDate = \"expiryDate\"\r\n}\r\n\r\nexport function DiscountSchemeForm(): JSX.Element {\r\n    document.title = \"Create Discount Scheme\";\r\n\r\n    const dispatch: Dispatch<any> = useDispatch(); \r\n    const history = useHistory();  \r\n\r\n    const products: Product[] = useSelector((action: RootState) => action.productReducer.products as Product[] ) ?? [];  \r\n\r\n    let selectListItems: SelectListItem[] = products.map(product => new SelectListItem(product.name, product.productId));\r\n\r\n    useEffect(() => {\r\n        const producerId: number = 2;\r\n        const action = getProductsAsync(producerId);\r\n        dispatch(action);\r\n    }, []);  \r\n\r\n    // React hook form - uncontrolled state that uses useRef behind the scenes\r\n    const { errors, handleSubmit, control, getValues, watch } = useForm();    \r\n\r\n    const watchProductId: number = watch(FORM_NAMES.productId, 0);\r\n    const selectedProduct: Product = products.find(product => product.productId === watchProductId) ?? new Product();\r\n    const productTextDict: Record<string, any> = {\r\n        \"Original Price\": \"$\" + selectedProduct.originalPrice,\r\n        \"Description\": selectedProduct.description\r\n    }\r\n    console.log(\"watchProductId\", watchProductId);    \r\n\r\n    const onSubmit = (data: any) => {\r\n        //console.log(data, errors);\r\n        const {productId, discountedPrice, minOrderQnty, deliveryCharge, expiryDate} = getValues([FORM_NAMES.productId, FORM_NAMES.discountedPrice, \r\n            FORM_NAMES.minOrderQnty, FORM_NAMES.deliveryCharge, FORM_NAMES.expiryDate]);\r\n        const discountScheme: DiscountScheme = createDiscountScheme(productId, minOrderQnty, discountedPrice, expiryDate, deliveryCharge);\r\n        const action = createDiscountSchemeAsync(discountScheme);\r\n        dispatch(action);\r\n    }   \r\n\r\n    // If create is successful, redirect\r\n    const apiMessage: string = useSelector( (action: RootState) => action.discountSchemeReducer.httpMessage as string ) ?? \"\"; \r\n    useEffect(() => {\r\n        if (apiMessage.includes(ACTIONS.HTTP_CREATE_SUCCESS)) {\r\n            history.push(\"/producer/discountSchemes\");\r\n        }\r\n    }, [apiMessage]);\r\n\r\n    // Redirect to product form if user decides to create new product\r\n    const redirectToProductForm = () => history.push(\"/producer/product/\" + \"0\");\r\n\r\n    return <Container maxWidth=\"md\">\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n            \r\n            <Grid container justify=\"flex-start\">\r\n                <Grid item xs={4}>\r\n                    <Controller                     \r\n                        control={control}\r\n                        name={FORM_NAMES.productId}                \r\n                        rules={{\"required\": true }}\r\n                        render={({onChange}: any) =>  <Autocomplete\r\n                                id=\"combo-box-demo\"\r\n                                options={products}\r\n                                getOptionLabel={(option: Product) => option.name ?? \"\"}\r\n                                style={{ width: 300 }} \r\n                                onChange={(event: any, data) => onChange((data as Product).productId)}                                \r\n                                renderInput={(params) => <TextField {...params} label=\"Products\" variant=\"outlined\" />}  \r\n                                />\r\n                        }\r\n                    />\r\n                    {errors[\"productId\"] &&\r\n                        <p style={{fontSize: \"14px\", color: \"red\", textAlign: \"left\"}}>Product is required</p>                                            \r\n                    }\r\n                \r\n                    {/* <SelectUncontrolledComponent title={\"Choose Product\"} selectListItems={selectListItems} name={FORM_NAMES.productId} errorMessage=\"Scheme is required\"\r\n                        control={control} errors={errors} rules={{required: true}} /> */}\r\n                </Grid>                \r\n                <Grid item xs={3} alignItems=\"flex-end\">\r\n                    <Button onClick={redirectToProductForm} variant=\"outlined\" size=\"small\" style={{bottom: \"-30%\"}} >Or create one</Button>\r\n                </Grid>\r\n                <EmptyGridRow />\r\n\r\n                { watchProductId > 0 &&\r\n                    <Grid item xs={12}>\r\n                        <TextComponent textDict={productTextDict}  color={\"textSecondary\"} />\r\n                    </Grid>\r\n                }\r\n                <EmptyGridRow />\r\n\r\n                <Grid item xs={12}>\r\n                    <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.discountedPrice} label={\"Discounted Price\"} errorMessage={\"Discounted Price is required\"} \r\n                        rules={{required: true, min: 1}} adornment={\"$\"} />\r\n                </Grid>\r\n                <EmptyGridRow />\r\n\r\n                <Grid item xs={12}>\r\n                    <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.minOrderQnty} label={\"Minimum order quantity\"} errorMessage={\"Minimum order quantity is required\"} \r\n                        rules={{required: true, min: 1}} />\r\n                </Grid>\r\n                <EmptyGridRow />\r\n\r\n                <Grid item xs={12}>\r\n                    <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.deliveryCharge} label={\"Delivery Charge\"} errorMessage={\"Delivery Charge is required\"} \r\n                        rules={{required: true, min: 1}} adornment={\"$\"} />        \r\n                </Grid>\r\n                <EmptyGridRow />\r\n\r\n                <Grid item xs={2}>\r\n                    <DatePickerUncontrolledComponent label={\"Expiry Date\"} name={FORM_NAMES.expiryDate} \r\n                        control={control} errors={errors} rules={{required: true}} errorMessage={\"Expiry Date is required\"} />\r\n                </Grid>\r\n                <EmptyGridRow />\r\n\r\n                <Grid item xs={12}>\r\n                    <Button variant=\"contained\" color=\"primary\" type=\"submit\">\r\n                        Submit\r\n                    </Button> \r\n                </Grid>\r\n                <EmptyGridRow />\r\n\r\n            </Grid>            \r\n                        \r\n        </form>\r\n    </Container>\r\n}\r\n\r\nfunction createDiscountScheme(productId: number, minOrderQnty: number, discountedPrice: number, expiryDate: Date, deliveryCharge: number): DiscountScheme {\r\n    let discountScheme: DiscountScheme = new DiscountScheme();\r\n    discountScheme.productId = productId;\r\n    discountScheme.minOrderQnty = minOrderQnty;\r\n    discountScheme.discountedPrice = discountedPrice;\r\n    discountScheme.expiryDate = expiryDate;\r\n    discountScheme.deliveryCharge = deliveryCharge;\r\n\r\n    return discountScheme;\r\n}\r\n\r\nfunction EmptyGridRow(): JSX.Element {\r\n    return <Grid item xs={12}><br/></Grid>;\r\n}\r\n","import React, { useEffect } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Dispatch } from \"redux\"; \r\nimport { useHistory, useParams } from \"react-router-dom\";\r\nimport { Container, Grid } from \"@material-ui/core\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { TextFieldUncontrolledComponent } from \"../components/TextFieldComponents\";\r\nimport { Product } from \"../models/Product\";\r\nimport { createProductsAsync, getProductAsync, updateProductAsync } from \"../store/thunks/productThunk\";\r\nimport { RootState } from \"../store/rootReducer\";\r\nimport Button from '@material-ui/core/Button';\r\nimport { ACTIONS } from \"../store/actionEnums\";\r\nimport { useState } from \"react\";\r\nimport { SnackbarComponent } from \"../components/SnackbarComponent\";\r\n\r\nenum FORM_NAMES {\r\n    productId = \"productId\",\r\n    name = \"name\",\r\n    category = \"category\",\r\n    description = \"description\",\r\n    originalPrice = \"originalPrice\"\r\n}\r\n\r\ntype FORM_DATA = {\r\n    \"productId\" : number,\r\n    \"name\": string;\r\n    \"category\": string;\r\n    \"description\": string;\r\n    \"originalPrice\": number;\r\n}\r\n\r\n\r\n// User can either Create or Update the product\r\ntype MODE = \"CREATE\" | \"UPDATE\";\r\n\r\nexport function ProductForm(): JSX.Element {\r\n    document.title = \"Product Form\";\r\n    const dispatch: Dispatch<any> = useDispatch();\r\n    const history = useHistory();\r\n\r\n    // If creating, route param is set to 0. If update, route param is set to existing productId\r\n    let routeParams: Record<string, string>  = (useParams()) as Record<string, string>;    \r\n    const productId: number = parseInt(routeParams[\"productId\"]); \r\n    const mode: MODE = productId === 0 ? \"CREATE\" : \"UPDATE\";\r\n\r\n    let productToUpdate: Product = useSelector((action: RootState) => action.productReducer.product as Product ) ?? new Product();\r\n\r\n    useEffect(() => {\r\n        if (mode === \"UPDATE\") {\r\n            const action = getProductAsync(productId);\r\n            dispatch(action);\r\n        }   \r\n    }, [productId]);   \r\n\r\n    const { errors, handleSubmit, control, getValues, reset, setValue } = useForm<FORM_DATA>(); \r\n\r\n    useEffect(() => {\r\n        if (mode === \"UPDATE\") {\r\n            setValue(FORM_NAMES.productId, productToUpdate.productId);\r\n            setValue(FORM_NAMES.name, productToUpdate.name);\r\n            setValue(FORM_NAMES.category, productToUpdate.category);\r\n            setValue(FORM_NAMES.description, productToUpdate.description);\r\n            setValue(FORM_NAMES.originalPrice, productToUpdate.originalPrice);\r\n        }\r\n    }, [JSON.stringify(productToUpdate)])\r\n    \r\n    \r\n\r\n    const onSubmit = (data: any) => {\r\n\r\n        const {productId, name, category, description, originalPrice} = data;        \r\n        //getValues([FORM_NAMES.productId, FORM_NAMES.name, FORM_NAMES.category, FORM_NAMES.description, FORM_NAMES.originalPrice]);\r\n        const product = initializeProduct(productId, name, category, description, originalPrice);\r\n        console.log(\"submitting product\", product);\r\n        if (mode === \"CREATE\") {\r\n            const action = createProductsAsync(product);\r\n            dispatch(action);\r\n            reset({});\r\n        } else if (mode === \"UPDATE\") {\r\n            product.producerId = productToUpdate.producerId;\r\n            const action = updateProductAsync(productId, product);\r\n            dispatch(action);\r\n            //reset(product);\r\n        }                \r\n    };\r\n    \r\n    const [openSnackbar, setOpenSnackbar] = useState<boolean>(false);\r\n    const apiMessage: string = useSelector( (action: RootState) => action.productReducer.httpMessage as string ) ?? \"\"; \r\n    useEffect(() => {\r\n        if (apiMessage.includes(ACTIONS.HTTP_CREATE_SUCCESS) || apiMessage.includes(ACTIONS.HTTP_UPDATE_SUCCESS)) {\r\n            setOpenSnackbar(true);\r\n        }        \r\n    }, [apiMessage]);\r\n\r\n    return <Container maxWidth=\"md\">\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n            <GridRow display=\"none\" component={\r\n                <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.productId} label={\"Product Id\"} \r\n                    rules={{required: false}}  />\r\n            }/>\r\n            \r\n            <GridRow component={\r\n                <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.name} label={\"Name\"} \r\n                    rules={{required: true}} errorMessage=\"Name is required\" />\r\n            }/>\r\n\r\n            <GridRow component={\r\n                <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.originalPrice} label={\"Original Price\"} \r\n                    rules={{required: true, min: 1}} adornment={\"$\"} errorMessage=\"Original Price is required\" />\r\n            } />\r\n\r\n            <GridRow component={\r\n                <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.category} label={\"Category\"} \r\n                    rules={{required: false}} />\r\n            }/>\r\n\r\n            <GridRow component={\r\n                <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.description} label={\"Description\"} \r\n                    rules={{required: false}}  />\r\n            }/>                          \r\n\r\n            <Button variant=\"contained\" color=\"primary\" type=\"submit\">\r\n                Submit\r\n            </Button> \r\n\r\n        </form>\r\n        <SnackbarComponent open={openSnackbar} setOpen={setOpenSnackbar} severity={\"success\"} message={mode + \" is successful!\"}/>\r\n    </Container>\r\n}\r\n\r\ninterface IRowProp {\r\n    component: JSX.Element,\r\n    display?: \"initial\" | \"none\"\r\n}\r\nfunction GridRow({component, display=\"initial\"}: IRowProp): JSX.Element {\r\n    return <div>\r\n        <Grid item xs={12} style={{display: display}}>\r\n            {component}\r\n        </Grid>\r\n        <Grid item xs={12}><br/></Grid>\r\n    </div>;\r\n}\r\n\r\nfunction initializeProduct(productId: number, name: string, category: string, description: string, originalPrice: number): Product {\r\n    let product: Product = new Product();\r\n    product.productId = productId > 0 ? productId : 0;  //When creating product, productId is set to null from react hook form\r\n    product.name = name;\r\n    product.category = category;\r\n    product.description = description;\r\n    product.originalPrice = originalPrice;\r\n    product.producerId = 2;\r\n    return product;\r\n}\r\n ","import React from \"react\";\r\nimport TextField from '@material-ui/core/TextField';\r\nimport { Controller, Control, DeepMap, FieldError } from \"react-hook-form\";\r\nimport InputAdornment from '@material-ui/core/InputAdornment';\r\n\r\ninterface IProp {\r\n    label: string,\r\n    name: string,\r\n    errorMessage?: string,\r\n    defaultValue?: string,\r\n    control: Control<Record<string, any>>,\r\n    errors: DeepMap<Record<string, any>, FieldError>,\r\n    rules: object,\r\n    isFullWidth?: boolean,\r\n    adornment?: string | null,\r\n    variant?: \"outlined\" | \"filled\" | \"standard\",\r\n    type?: \"text\" | \"number\" | \"password\"\r\n}\r\n\r\nexport function TextFieldUncontrolledComponent({ label, name, defaultValue=\"\", \r\n    isFullWidth=false, variant=\"standard\", type=\"text\",\r\n    adornment=null,\r\n    control, errors, \r\n    errorMessage=\"\", rules={}}: IProp): JSX.Element {\r\n    console.log(\"errors\", errors);\r\n    let isError: boolean = errors[name] != null;\r\n    let helperText: string = isError ? errorMessage : \"\";\r\n\r\n    return <div>\r\n        <Controller\r\n            name={name}\r\n            defaultValue={defaultValue}\r\n            control={control}\r\n            rules={rules}\r\n            render={props => <TextField {...props} label={label} error={isError} helperText={helperText} \r\n                fullWidth={isFullWidth} variant={variant} type={type}\r\n                InputProps={{\r\n                    startAdornment: adornment ? <InputAdornment position=\"start\">{adornment}</InputAdornment> : null\r\n                }}\r\n            />} \r\n        />  \r\n    </div> \r\n}","import React, { useEffect, useState } from \"react\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { Product } from \"../models/Product\";\r\nimport { RootState } from \"../store/rootReducer\";\r\nimport { deleteProductAsync, getProductsAsync } from \"../store/thunks/productThunk\";\r\nimport { Dispatch } from \"redux\"; \r\nimport { useHistory } from \"react-router-dom\";\r\nimport Button from '@material-ui/core/Button';\r\nimport { Container, Grid } from \"@material-ui/core\";\r\nimport { DialogComponent } from \"../components/DialogComponent\";\r\nimport { DataTable } from \"../components/DataTable\";\r\nimport \"./toolTip.css\";\r\nimport { ACTIONS } from \"../store/actionEnums\";\r\n\r\n\r\nclass Row {\r\n    name: string | undefined;\r\n    originalPrice: number | undefined;\r\n    category: string | undefined;\r\n    description: string | undefined;\r\n    update: JSX.Element | undefined;\r\n    delete: JSX.Element | undefined;\r\n}\r\n\r\nexport function ProductsPage(): JSX.Element {\r\n    document.title = \"Products\";\r\n    const dispatch: Dispatch<any> = useDispatch();\r\n    const history = useHistory(); \r\n    const producerId = 2;\r\n\r\n    const products: Product[] = useSelector((action: RootState) => action.productReducer.products as Product[]) ?? [];\r\n    useEffect(() => {\r\n        \r\n        const action = getProductsAsync(producerId);\r\n        dispatch(action);        \r\n    }, []);\r\n\r\n    const columnNames: string[] = [\"Name\", \"Original Price\", \"Category\",  \"Description\", \"Update\",\"Delete\"];\r\n    const accessors: string[] = Object.keys(new Row());\r\n    const rows: Row[] = [];\r\n\r\n    // When user clicks delete in the opened product dialog, confirm delete\r\n    const [openDeleteDialog, setOpenDeleteDialog] = useState<boolean>(false); \r\n\r\n    const [targetProduct, setTargetProduct] = useState<Product>(new Product());\r\n    const deleteProduct = () => {\r\n        console.log(\"productId\", targetProduct.productId);\r\n        if (targetProduct.discountSchemes.length > 0) {\r\n            return;\r\n        }\r\n        const action = deleteProductAsync(targetProduct.productId);\r\n        dispatch(action);\r\n        setOpenDeleteDialog(false);\r\n    } \r\n\r\n    let httpResponseMessage: string = useSelector((action: RootState) => action.productReducer.httpMessage as string);\r\n    useEffect(() => {\r\n        if (httpResponseMessage.includes(ACTIONS.HTTP_DELETE_SUCCESS)) {\r\n            console.log(\"in productsPage\", httpResponseMessage);\r\n            const action = getProductsAsync(producerId);\r\n            dispatch(action);\r\n        }\r\n    }, [httpResponseMessage]); \r\n\r\n    for (let i = 0; i < products.length; i++) {\r\n        let product: Product = products[i];\r\n        let row: Row = createRow(product);\r\n\r\n        const updateProduct = () => history.push(\"/producer/product/\" + product.productId);\r\n        const onDeleteClick = () => {\r\n            setOpenDeleteDialog(true);\r\n            setTargetProduct(product);\r\n        }\r\n\r\n        // If product already has schemes, disallow delete\r\n        const isDisableDelete: boolean = product.discountSchemes.length > 0;\r\n        let tooltipMessage: string = isDisableDelete ? \"Cannot delete product as it has dependent discount schemes\" : \"\";\r\n\r\n        row.update = <Button size=\"small\" variant=\"outlined\" onClick={updateProduct}>Update</Button>\r\n        row.delete = <div className=\"tooltip__div-visible\">\r\n            <Button color=\"secondary\" size=\"small\" variant=\"outlined\"  \r\n                disabled={isDisableDelete} \r\n                onClick={onDeleteClick}>Delete\r\n                <span className=\"tooltiptext\">{tooltipMessage}</span>\r\n            </Button> \r\n        </div> \r\n        rows.push(row);\r\n    }    \r\n\r\n    const redirectToProductForm = () => history.push(\"/producer/product/\" + 0);\r\n\r\n    return <Container>\r\n        <Grid container>\r\n            <Grid item xs={10}></Grid>\r\n            <Grid item xs={2}>\r\n                <Button variant=\"outlined\" onClick={redirectToProductForm}>Create Product</Button>\r\n            </Grid>\r\n        </Grid>\r\n        <Grid item xs={12}><br/></Grid>\r\n        <DataTable columnNames={columnNames} accessors={accessors} data={rows} title={\"Products\"} enablePaging={true} pageSize={5} />\r\n        <DialogComponent open={openDeleteDialog} toggleOpen={() => setOpenDeleteDialog(!openDeleteDialog)} content={<p>Confirm Delete?</p>}\r\n            secondaryAction={deleteProduct} secondaryActionTitle=\"Delete Product\"/>\r\n    </Container>\r\n}\r\n\r\nfunction createRow(product: Product): Row {\r\n    let row: Row = new Row();\r\n    row.name = product.name;\r\n    row.originalPrice = product.originalPrice;\r\n    row.category = product.category;\r\n    row.description = product.description;\r\n    return row;\r\n}","export class IdentityUser {\r\n    userName: string = \"\";\r\n    passwordHash: string = \"\";\r\n}","import React, { useContext, useEffect, useState } from \"react\";\r\nimport { Button, Container, Grid } from \"@material-ui/core\";\r\nimport { useForm } from \"react-hook-form\";\r\nimport { TextFieldUncontrolledComponent } from \"../components/TextFieldComponents\";\r\nimport { IdentityUser } from \"../models/IdentityUser\";\r\nimport { loginAsync } from \"../store/thunks/authThunk\";\r\nimport { useDispatch, useSelector } from \"react-redux\";\r\nimport { useHistory } from \"react-router-dom\";\r\nimport { Dispatch } from \"redux\"; \r\nimport { AuthVM } from \"../models/AuthVM\";\r\nimport { RootState } from \"../store/rootReducer\";\r\nimport { SnackbarComponent } from \"../components/SnackbarComponent\"; \r\n\r\nenum FORM_NAMES {\r\n    userName = \"userName\",\r\n    passwordHash = \"passwordHash\"\r\n}\r\n\r\ntype FORM_DATA = {\r\n    \"userName\" : string,\r\n    \"passwordHash\": string;\r\n}\r\n\r\n\r\nexport function LoginForm(): JSX.Element {\r\n    document.title = \"Login\";\r\n    const dispatch: Dispatch<any> = useDispatch();\r\n    const history = useHistory();\r\n\r\n    let [openSnackBar, setOpenSnackBar] = useState<boolean>(false);\r\n\r\n    let defaultAuthVM = new AuthVM();\r\n    defaultAuthVM.isAuthenticated = \"UNTOUCHED\";\r\n\r\n    let authVM: AuthVM = useSelector((action: RootState) => action.authReducer.authVM) ?? defaultAuthVM;\r\n\r\n    useEffect(() => { \r\n        if (authVM.isAuthenticated === \"UNTOUCHED\") {\r\n            return;\r\n        }\r\n\r\n        if (authVM.isAuthenticated) {\r\n            history.push(\"\");\r\n        } else {\r\n            setOpenSnackBar(true);\r\n        }\r\n    }, [authVM.isAuthenticated]);\r\n  \r\n\r\n    const { errors, handleSubmit, control } = useForm<FORM_DATA>(); \r\n\r\n    const onSubmit = (data: FORM_DATA) => {\r\n        console.log(data);\r\n        let identityUser: IdentityUser = new IdentityUser();\r\n        identityUser.userName = data.userName;\r\n        identityUser.passwordHash = data.passwordHash;\r\n\r\n        const action = loginAsync(identityUser);\r\n        dispatch(action);\r\n\r\n    }\r\n\r\n    return <Container>\r\n        <form onSubmit={handleSubmit(onSubmit)}>\r\n            <GridRow component={\r\n                <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.userName} label={\"UserName\"} \r\n                    variant=\"outlined\"\r\n                    rules={{required: true}} errorMessage=\"Name is required\" />\r\n            }/>\r\n            \r\n            <GridRow component={\r\n                <TextFieldUncontrolledComponent isFullWidth={true} control={control} errors={errors} name={FORM_NAMES.passwordHash} label={\"Password\"} \r\n                    variant=\"outlined\" type=\"password\"\r\n                    rules={{required: true}} errorMessage=\"Password is required\" />\r\n            }/>\r\n                        \r\n\r\n            <Button variant=\"contained\" color=\"primary\" type=\"submit\">\r\n                Submit\r\n            </Button> \r\n\r\n        </form>\r\n        <SnackbarComponent open={openSnackBar} setOpen={setOpenSnackBar} message=\"Authentication failed\" severity=\"error\"/>\r\n    </Container>\r\n}\r\n\r\ninterface IRowProp {\r\n    component: JSX.Element,\r\n    display?: \"initial\" | \"none\"\r\n}\r\n\r\nfunction GridRow({component, display=\"initial\"}: IRowProp): JSX.Element {\r\n    return <div>\r\n        <Grid item xs={12}>\r\n            {component}\r\n        </Grid>\r\n        <Grid item xs={12}><br/></Grid>\r\n    </div>;\r\n}","import { Container } from \"@material-ui/core\";\r\nimport React from \"react\";\r\n\r\nexport function ErrorPage(): JSX.Element {\r\n    return <Container>\r\n        <h2>An error occured</h2>\r\n    </Container>\r\n}","import { Container } from \"@material-ui/core\";\r\nimport React, { Fragment, FunctionComponent, useEffect, useState } from \"react\";\r\nimport { useSelector } from \"react-redux\";\r\nimport { NavLink, Route, useHistory } from 'react-router-dom';\r\nimport { ErrorPage } from \"../containers/ErrorPage\";\r\nimport { AuthVM } from \"../models/AuthVM\";\r\nimport { RootState } from \"../store/rootReducer\";\r\nimport { SnackbarComponent } from \"./SnackbarComponent\";\r\n\r\ninterface IProp {\r\n    component: FunctionComponent;\r\n    path: string;\r\n    requiredClaims?: string[];\r\n}\r\n\r\nexport function PrivateRoute({component, path, requiredClaims=[]}: IProp): JSX.Element {    \r\n\r\n    let authVM: AuthVM = new AuthVM();\r\n\r\n    if (localStorage.getItem(\"authVM\")) {\r\n        authVM = JSON.parse(localStorage.getItem(\"authVM\") as string);\r\n    }\r\n     \r\n    let isAuthenticated: boolean = authVM.isAuthenticated === true ? true : false;\r\n    let claims: string[] = authVM.claims;\r\n    let history = useHistory();\r\n\r\n    if (!isAuthenticated) {\r\n        console.log(\"not authenticated\");\r\n        history.push(\"/login\");\r\n    }\r\n\r\n    let [openSnackBar, setOpenSnackBar] = useState<boolean>(false);\r\n\r\n    let isAuthorized: boolean = requiredClaims.every(requiredClaim => claims.includes(requiredClaim));\r\n\r\n    let linkToLoginForm: JSX.Element = <Fragment>\r\n        <span>Not Authorized </span>\r\n        <NavLink to=\"/login\" style={{color: \"white\"}}><b>Click here to login</b></NavLink>\r\n    </Fragment> \r\n\r\n    useEffect(() => {\r\n        if (!isAuthorized) {\r\n            console.log(\"not authorized\");\r\n            setOpenSnackBar(true);\r\n            return;\r\n            // history.push(\"/login\");\r\n        }\r\n    }, [isAuthorized]);\r\n\r\n    \r\n\r\n    return <Fragment>\r\n        {  isAuthorized\r\n            ? <Route path={path} component= { component } />\r\n            : <ErrorPage />\r\n        }        \r\n        <SnackbarComponent open={openSnackBar} setOpen={setOpenSnackBar} message={linkToLoginForm} severity=\"warning\" autoHideDuration={10000}/>\r\n    </Fragment>\r\n     \r\n}","import React, { useState } from 'react';\r\nimport './App.css';\r\nimport { DiscountSchemesPage } from './containers/DiscountSchemesPage';\r\nimport { NavBar } from './components/NavBar';\r\nimport { Route } from 'react-router-dom';\r\nimport { Switch, BrowserRouter as Router } from 'react-router-dom';\r\nimport { DiscountSchemeDetailHOC } from './containers/DiscountSchemeDetailHOC';\r\nimport { CartPage } from './containers/CartPage';\r\nimport { OrdersPage } from './containers/OrdersPage';\r\nimport { ProducerDiscountSchemePage } from './containers/ProducerDiscountSchemePage';\r\nimport { DiscountSchemeForm } from './containers/DiscountSchemeForm';\r\nimport { ProductForm } from './containers/ProductForm';\r\nimport { ProductsPage } from './containers/ProductsPage';\r\nimport { LoginForm } from './containers/LoginForm';\r\nimport { PrivateRoute } from './components/PrivateRoute';\r\nimport { AuthContext } from './components/contexts/AuthContext';\r\nimport { AuthVM, Claims } from './models/AuthVM';\r\n\r\nfunction App() {\r\n\r\n  return (\r\n      <div className=\"App\">\r\n        <Router>\r\n          <NavBar/>\r\n          <Switch>\r\n            {/* Public Paths */}\r\n            <Route path=\"/login\" component={ LoginForm } />\r\n            <Route exact path=\"/\" component={ DiscountSchemesPage } />\r\n\r\n            {/* Consumer paths */}\r\n            <PrivateRoute path=\"/discountScheme/:discountSchemeId\" component= { DiscountSchemeDetailHOC } requiredClaims={[Claims.CONSUMER]} />\r\n            <PrivateRoute path=\"/cart\" component= { CartPage } requiredClaims={[Claims.CONSUMER]} />\r\n            <PrivateRoute path=\"/orders\" component= { OrdersPage } requiredClaims={[Claims.CONSUMER]} />\r\n\r\n            {/* Producer paths */}\r\n            <PrivateRoute path=\"/producer/products\" component = { ProductsPage } requiredClaims={[Claims.PRODUCER]} />\r\n            <PrivateRoute path=\"/producer/product/:productId\" component = { ProductForm } requiredClaims={[Claims.PRODUCER]} />            \r\n            <PrivateRoute path=\"/producer/discountSchemes/create\" component = { DiscountSchemeForm } requiredClaims={[Claims.PRODUCER]} />\r\n            <PrivateRoute path=\"/producer/discountSchemes\" component = { ProducerDiscountSchemePage } requiredClaims={[Claims.PRODUCER]} />\r\n          </Switch>\r\n        </Router> \r\n      </div>    \r\n  );\r\n}\r\n\r\nexport default App;\r\n","// This optional code is used to register a service worker.\r\n// register() is not called by default.\r\n\r\n// This lets the app load faster on subsequent visits in production, and gives\r\n// it offline capabilities. However, it also means that developers (and users)\r\n// will only see deployed updates on subsequent visits to a page, after all the\r\n// existing tabs open on the page have been closed, since previously cached\r\n// resources are updated in the background.\r\n\r\n// To learn more about the benefits of this model and instructions on how to\r\n// opt-in, read https://bit.ly/CRA-PWA\r\n\r\nconst isLocalhost = Boolean(\r\n  window.location.hostname === 'localhost' ||\r\n    // [::1] is the IPv6 localhost address.\r\n    window.location.hostname === '[::1]' ||\r\n    // 127.0.0.0/8 are considered localhost for IPv4.\r\n    window.location.hostname.match(\r\n      /^127(?:\\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/\r\n    )\r\n);\r\n\r\ntype Config = {\r\n  onSuccess?: (registration: ServiceWorkerRegistration) => void;\r\n  onUpdate?: (registration: ServiceWorkerRegistration) => void;\r\n};\r\n\r\nexport function register(config?: Config) {\r\n  if (process.env.NODE_ENV === 'production' && 'serviceWorker' in navigator) {\r\n    // The URL constructor is available in all browsers that support SW.\r\n    const publicUrl = new URL(\r\n      process.env.PUBLIC_URL,\r\n      window.location.href\r\n    );\r\n    if (publicUrl.origin !== window.location.origin) {\r\n      // Our service worker won't work if PUBLIC_URL is on a different origin\r\n      // from what our page is served on. This might happen if a CDN is used to\r\n      // serve assets; see https://github.com/facebook/create-react-app/issues/2374\r\n      return;\r\n    }\r\n\r\n    window.addEventListener('load', () => {\r\n      const swUrl = `${process.env.PUBLIC_URL}/service-worker.js`;\r\n\r\n      if (isLocalhost) {\r\n        // This is running on localhost. Let's check if a service worker still exists or not.\r\n        checkValidServiceWorker(swUrl, config);\r\n\r\n        // Add some additional logging to localhost, pointing developers to the\r\n        // service worker/PWA documentation.\r\n        navigator.serviceWorker.ready.then(() => {\r\n          console.log(\r\n            'This web app is being served cache-first by a service ' +\r\n              'worker. To learn more, visit https://bit.ly/CRA-PWA'\r\n          );\r\n        });\r\n      } else {\r\n        // Is not localhost. Just register service worker\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    });\r\n  }\r\n}\r\n\r\nfunction registerValidSW(swUrl: string, config?: Config) {\r\n  navigator.serviceWorker\r\n    .register(swUrl)\r\n    .then(registration => {\r\n      registration.onupdatefound = () => {\r\n        const installingWorker = registration.installing;\r\n        if (installingWorker == null) {\r\n          return;\r\n        }\r\n        installingWorker.onstatechange = () => {\r\n          if (installingWorker.state === 'installed') {\r\n            if (navigator.serviceWorker.controller) {\r\n              // At this point, the updated precached content has been fetched,\r\n              // but the previous service worker will still serve the older\r\n              // content until all client tabs are closed.\r\n              console.log(\r\n                'New content is available and will be used when all ' +\r\n                  'tabs for this page are closed. See https://bit.ly/CRA-PWA.'\r\n              );\r\n\r\n              // Execute callback\r\n              if (config && config.onUpdate) {\r\n                config.onUpdate(registration);\r\n              }\r\n            } else {\r\n              // At this point, everything has been precached.\r\n              // It's the perfect time to display a\r\n              // \"Content is cached for offline use.\" message.\r\n              console.log('Content is cached for offline use.');\r\n\r\n              // Execute callback\r\n              if (config && config.onSuccess) {\r\n                config.onSuccess(registration);\r\n              }\r\n            }\r\n          }\r\n        };\r\n      };\r\n    })\r\n    .catch(error => {\r\n      console.error('Error during service worker registration:', error);\r\n    });\r\n}\r\n\r\nfunction checkValidServiceWorker(swUrl: string, config?: Config) {\r\n  // Check if the service worker can be found. If it can't reload the page.\r\n  fetch(swUrl, {\r\n    headers: { 'Service-Worker': 'script' }\r\n  })\r\n    .then(response => {\r\n      // Ensure service worker exists, and that we really are getting a JS file.\r\n      const contentType = response.headers.get('content-type');\r\n      if (\r\n        response.status === 404 ||\r\n        (contentType != null && contentType.indexOf('javascript') === -1)\r\n      ) {\r\n        // No service worker found. Probably a different app. Reload the page.\r\n        navigator.serviceWorker.ready.then(registration => {\r\n          registration.unregister().then(() => {\r\n            window.location.reload();\r\n          });\r\n        });\r\n      } else {\r\n        // Service worker found. Proceed as normal.\r\n        registerValidSW(swUrl, config);\r\n      }\r\n    })\r\n    .catch(() => {\r\n      console.log(\r\n        'No internet connection found. App is running in offline mode.'\r\n      );\r\n    });\r\n}\r\n\r\nexport function unregister() {\r\n  if ('serviceWorker' in navigator) {\r\n    navigator.serviceWorker.ready\r\n      .then(registration => {\r\n        registration.unregister();\r\n      })\r\n      .catch(error => {\r\n        console.error(error.message);\r\n      });\r\n  }\r\n}\r\n","import { ACTIONS } from \"../actionEnums\";\r\nimport {cloneDeep} from 'lodash';\r\nimport { DiscountScheme } from \"../../models/DiscountScheme\";\r\nimport { IDiscountSchemeAction } from \"../thunks/discountSchemeThunk\";\r\n\r\nconst initialState : IDiscountSchemeAction = {\r\n    type: \"\",\r\n    discountSchemes: null\r\n}\r\n\r\nexport default function discountSchemeReducer(prevState = initialState, action: IDiscountSchemeAction): IDiscountSchemeAction {\r\n    let newState: IDiscountSchemeAction = cloneDeep(prevState);\r\n    newState.type = action.type;\r\n    newState.message = `${action.message} ${(new Date())}`;\r\n    newState.httpMessage = `${action.httpMessage} ${new Date()}`;\r\n    console.log(\"in discountSchemeReducer\", newState.httpMessage);\r\n\r\n    switch(action.type) {        \r\n        case(ACTIONS.GET_DISCOUNTSCHEMES_REQUEST):\r\n            console.log(action.message);\r\n            return newState;\r\n        case(ACTIONS.GET_DISCOUNTSCHEMES_RECEIVED):\r\n            console.log(\"GET_DISCOUNTSCHEMES_RECEIVED\");\r\n            let discountSchemes: DiscountScheme[] = action.discountSchemes as DiscountScheme[];\r\n            newState.discountSchemes = discountSchemes;\r\n            return newState;\r\n        case(ACTIONS.GET_DISCOUNTSCHEME_REQUEST):\r\n            console.log(action.message);\r\n            return newState;\r\n        case(ACTIONS.GET_DISCOUNTSCHEME_RECEIVED):\r\n            console.log(\"ACTIONS.GET_DISCOUNTSCHEME_RECEIVED\")\r\n            const discountScheme: DiscountScheme = action.discountScheme as DiscountScheme;\r\n            newState.discountScheme = discountScheme;\r\n            return newState;\r\n        case(ACTIONS.GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST):\r\n            console.log(action.message);\r\n            return newState;\r\n        case(ACTIONS.GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED):\r\n            console.log(action.discountSchemes);\r\n            newState.discountSchemes = action.discountSchemes as DiscountScheme[];\r\n            return newState;\r\n        case(ACTIONS.CREATE_DISCOUNTSCHEME_REQUEST):\r\n            console.log(action.message);           \r\n            return newState;\r\n        case(ACTIONS.CREATE_DISCOUNTSCHEME_RECEIVED):\r\n            newState.discountScheme = action.discountScheme as DiscountScheme;\r\n            return newState;\r\n        case(ACTIONS.DELETE_DISCOUNTSCHEME_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.DELETE_DISCOUNTSCHEME_RECEIVED):\r\n            newState.discountScheme = action.discountScheme;\r\n            return newState;\r\n        default:\r\n            return prevState;\r\n    }\r\n    \r\n}","import { IBidAction } from \"../thunks/bidThunk\";\r\nimport { cloneDeep } from \"lodash\";\r\nimport { ACTIONS } from \"../actionEnums\";\r\n\r\nconst initialState : IBidAction = {\r\n    type: \"\",\r\n    bid: undefined,\r\n    bids: undefined,\r\n    message: \"Initial Message\",\r\n    httpMessage: \"Initial Response Message\",        \r\n}\r\n\r\nexport default function bidReducer(prevState = initialState, action: IBidAction): IBidAction {\r\n    let newState: IBidAction = cloneDeep(prevState);\r\n    \r\n    newState.type = action.type;\r\n    newState.message = `${action.message} ${(new Date())}`;\r\n    newState.httpMessage = `${action.httpMessage} + ${new Date()}`;\r\n\r\n    //console.log(\"in bidReducer. Latest message\", newState.message);\r\n    //console.log(\"in bidReducer. Latest api message\", newState.httpMessage);\r\n \r\n    switch(action.type) {    \r\n        case(ACTIONS.ADD_BID_TO_CART_REQUEST):\r\n            return newState;    \r\n        case(ACTIONS.ADD_BID_TO_CART_RECEIVED): \r\n            newState.bid = action.bid;\r\n            return newState;\r\n        case(ACTIONS.GET_BIDSOFCUSTOMER_INCART_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.GET_BIDSOFCUSTOMER_INCART_RECEIVED):\r\n            newState.bids = action.bids;\r\n            console.log(newState.bids);\r\n            return newState;\r\n        case(ACTIONS.ADD_BID_TO_CART_REQUEST):\r\n            return newState;    \r\n        case(ACTIONS.UPDATE_BID_IN_CART_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.UPDATE_BID_IN_CART_RECEIVED):\r\n            return newState;\r\n        case(ACTIONS.DELETE_BID_IN_CART_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.DELETE_BID_IN_CART_RECEIVED):\r\n            return newState;\r\n        case(ACTIONS.ORDER_BIDS_IN_CART_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.ORDER_BIDS_IN_CART_RECEIVED):\r\n            return newState;\r\n        case(ACTIONS.GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED):\r\n            newState.bids = action.bids;\r\n            return newState;\r\n        default:\r\n            return prevState;\r\n    }\r\n    \r\n}","import { IProductAction } from \"../thunks/productThunk\";\r\nimport { cloneDeep } from \"lodash\";\r\nimport { ACTIONS } from \"../actionEnums\";\r\n\r\nconst initialState: IProductAction = {\r\n    type: \"\",\r\n    product: undefined,\r\n    products: undefined,\r\n    message: \"\",\r\n    httpMessage: \"\" // For API messages\r\n}\r\n\r\nexport default function productReducer(prevState = initialState, action: IProductAction): IProductAction {\r\n\r\n    let newState: IProductAction = cloneDeep(prevState);\r\n    \r\n    newState.type = action.type;\r\n    newState.message = `${action.message} ${(new Date())}`;\r\n    newState.httpMessage = `${action.httpMessage} + ${new Date()}`;\r\n\r\n    console.log(\"in productReducer. Latest message\", newState.message);\r\n    console.log(\"in productReducer. Latest api message\", newState.httpMessage);\r\n\r\n    switch(action.type) {\r\n        case(ACTIONS.GET_PRODUCTS_REQUEST):\r\n            return newState;\r\n        case (ACTIONS.GET_PRODUCTS_RECEIVED):\r\n            newState.products = action.products;\r\n            return newState;\r\n        case(ACTIONS.CREATE_PRODUCT_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.CREATE_PRODUCT_RECEIVED):\r\n            newState.product = action.product;\r\n            return newState;\r\n        case(ACTIONS.GET_PRODUCT_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.GET_PRODUCT_RECEIVED):\r\n            newState.product = action.product;\r\n            return newState;\r\n        case(ACTIONS.UPDATE_PRODUCT_RECEIVED):\r\n            return newState;\r\n        case(ACTIONS.UPDATE_PRODUCT_REQUEST):\r\n            console.log(\"received updatedProduct\", action.product);\r\n            newState.product = action.product;\r\n            return newState;\r\n        case(ACTIONS.DELETE_PRODUCT_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.DELETE_PRODUCT_RECEIVED):\r\n            newState.product = action.product;\r\n            return newState;\r\n        default:\r\n            return prevState;\r\n    }\r\n\r\n}","import { IErrorAction } from \"../actions/errorAction\";\r\nimport { ACTIONS } from \"../actionEnums\";\r\n\r\nconst initialState : IErrorAction = {\r\n    type: \"\",\r\n    error: null\r\n}\r\n\r\nexport default function errorReducer(prevState = initialState, action: IErrorAction): IErrorAction {\r\n    const { type, error } = action;\r\n    // Must make sure to clear all errors before redirecting, otherwise errors will persist even at the next component\r\n    if (type === ACTIONS.CLEAR_ERROR) {\r\n        return initialState;\r\n    } else if (error) {\r\n        console.log(\"error received in errorReducer:\", error);\r\n        //When you go to a new component, you want the previous errors to disappear\r\n        return {\r\n            type: type,\r\n            error: action.error\r\n        }         \r\n    }\r\n\r\n    //For any start and finished actions that don't have errors we return the current state.\r\n    return prevState; \r\n}","import { cloneDeep } from \"lodash\";\r\nimport { useContext } from \"react\";\r\nimport { AuthContext } from \"../../components/contexts/AuthContext\";\r\nimport { AuthVM } from \"../../models/AuthVM\";\r\nimport { ACTIONS } from \"../actionEnums\";\r\nimport { IAuthAction } from \"../thunks/authThunk\";\r\n\r\nconst initialState : IAuthAction = {\r\n    type: \"\",\r\n    identityUser: undefined,\r\n    message: \"Initial Message\",\r\n    httpMessage: \"Initial Response Message\",   \r\n    authVM: undefined     \r\n}\r\n\r\nexport default function authReducer(prevState = initialState, action: IAuthAction): IAuthAction {\r\n\r\n    let newState: IAuthAction = cloneDeep(prevState);\r\n    \r\n    newState.authVM = cloneDeep(action.authVM);\r\n    newState.type = action.type;\r\n    newState.message = `${action.message} ${(new Date())}`;\r\n    newState.httpMessage = `${action.httpMessage} + ${new Date()}`;\r\n \r\n    switch(action.type) {    \r\n        case(ACTIONS.LOGIN_REQUEST):\r\n            return newState;\r\n        case(ACTIONS.LOGIN_SUCCESS): \r\n            localStorage.setItem(\"authVM\", JSON.stringify(action.authVM)); \r\n            return newState;\r\n        case(ACTIONS.LOGIN_FAILED):\r\n            return newState;\r\n        case(ACTIONS.LOGOUT):\r\n            localStorage.removeItem(\"authVM\");\r\n            newState.message = ACTIONS.LOGOUT_SUCCESS;\r\n            return newState;\r\n        default:\r\n            return prevState;            \r\n    }\r\n\r\n}","import { combineReducers } from 'redux';\r\nimport discountSchemeReducer from './reducers/discountSchemeReducer';\r\nimport bidReducer from './reducers/bidReducer';\r\nimport productReducer from './reducers/productReducer';\r\nimport errorReducer from './reducers/errorReducer';\r\nimport authReducer from './reducers/authReducer';\r\n\r\n\r\nexport const rootReducer = combineReducers({    \r\n    discountSchemeReducer,\r\n    bidReducer,\r\n    productReducer,\r\n    authReducer,\r\n    errorReducer\r\n});\r\n\r\nexport type RootState = ReturnType<typeof rootReducer>","import React from 'react';\r\nimport ReactDOM from 'react-dom';\r\nimport './index.css';\r\nimport App from './App';\r\nimport * as serviceWorker from './serviceWorker';\r\nimport {createStore, applyMiddleware} from 'redux';\r\nimport thunk from 'redux-thunk';\r\nimport { Provider } from 'react-redux';\r\nimport { rootReducer } from './store/rootReducer';\r\n\r\nconst store = createStore(rootReducer, applyMiddleware(thunk));\r\n\r\nReactDOM.render(\r\n  <Provider store={store} > \r\n    <React.StrictMode>\r\n        <App />\r\n      </React.StrictMode>\r\n  </Provider> , document.getElementById('root')\r\n);\r\n\r\n// If you want your app to work offline and load faster, you can change\r\n// unregister() to register() below. Note this comes with some pitfalls.\r\n// Learn more about service workers: https://bit.ly/CRA-PWA\r\nserviceWorker.unregister();\r\n"],"sourceRoot":""}