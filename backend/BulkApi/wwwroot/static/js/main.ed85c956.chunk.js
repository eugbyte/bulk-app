(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{259:function(e,t,n){e.exports=n.p+"static/media/e_commerce.3acf207a.png"},435:function(e,t,n){e.exports=n(513)},440:function(e,t,n){},441:function(e,t,n){},507:function(e,t,n){},509:function(e,t,n){},513:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),i=n(18),o=n.n(i),s=(n(440),n(441),n(20)),u=n(17),l=n(14),d=n.n(l),E=n(28);function m(e,t){return{type:e,error:t}}!function(e){e.GET_DISCOUNTSCHEMES_REQUEST="GET_DISCOUNTSCHEMES_REQUEST",e.GET_DISCOUNTSCHEMES_RECEIVED="GET_DISCOUNTSCHEMES_RECEIVED",e.GET_DISCOUNTSCHEME_REQUEST="GET_DISCOUNTSCHEME_REQUEST",e.GET_DISCOUNTSCHEME_RECEIVED="GET_DISCOUNTSCHEME_RECEIVED",e.GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST="GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST",e.GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED="GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED",e.CREATE_DISCOUNTSCHEME_REQUEST="CREATE_DISCOUNTSCHEME_REQUEST",e.CREATE_DISCOUNTSCHEME_RECEIVED="CREATE_DISCOUNTSCHEME_RECEIVED",e.DELETE_DISCOUNTSCHEME_REQUEST="DELETE_DISCOUNTSCHEME_REQUEST",e.DELETE_DISCOUNTSCHEME_RECEIVED="DELETE_DISCOUNTSCHEME_RECEIVED",e.GET_BIDSOFCUSTOMER_INCART_REQUEST="GET_BIDSOFCUSTOMER_INCART_REQUEST",e.GET_BIDSOFCUSTOMER_INCART_RECEIVED="GET_BIDSOFCUSTOMER_INCART_RECEIVED",e.ADD_BID_TO_CART_REQUEST="ADD_BID_TO_CART_REQUEST",e.ADD_BID_TO_CART_RECEIVED="ADD_BID_TO_CART_RECEIVED",e.UPDATE_BID_IN_CART_REQUEST="UPDATE_BID_IN_CART_REQUEST",e.UPDATE_BID_IN_CART_RECEIVED="UPDATE_BID_IN_CART_RECEIVED",e.DELETE_BID_IN_CART_REQUEST="DELETE_BID_IN_CART_REQUEST",e.DELETE_BID_IN_CART_RECEIVED="DELETE_BID_IN_CART_RECEIVED",e.ERROR="ERROR",e.CLEAR_ERROR="CLEAR_ERROR",e.ORDER_BIDS_IN_CART_REQUEST="ORDER_BIDS_IN_CART_REQUEST",e.ORDER_BIDS_IN_CART_RECEIVED="ORDER_BIDS_IN_CART_RECEIVED",e.GET_PRODUCTS_REQUEST="GET_PRODUCTS_REQUEST",e.GET_PRODUCTS_RECEIVED="GET_PRODUCTS_RECEIVED",e.GET_PRODUCT_REQUEST="GET_PRODUCT_REQUEST",e.GET_PRODUCT_RECEIVED="GET_PRODUCT_RECEIVED",e.GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST="GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST",e.GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED="GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED",e.CREATE_PRODUCT_REQUEST="CREATE_PRODUCT_REQUEST",e.CREATE_PRODUCT_RECEIVED="CREATE_PRODUCT_RECEIVED",e.DELETE_PRODUCT_REQUEST="DELETE_PRODUCT_REQUEST",e.DELETE_PRODUCT_RECEIVED="DELETE_PRODUCT_RECEIVED",e.UPDATE_PRODUCT_REQUEST="UPDATE_PRODUCT_REQUEST",e.UPDATE_PRODUCT_RECEIVED="UPDATE_PRODUCT_RECEIVED",e.LOGIN_REQUEST="LOGIN_REQUEST",e.LOGIN_SUCCESS="LOGIN_SUCCESS",e.LOGIN_FAILED="LOGIN_FAILED",e.LOGOUT="LOGOUT",e.LOGOUT_SUCCESS="LOGOUT_SUCCESS",e.HTTP_UPDATE_SUCCESS="HTTP_UPDATE_SUCCESS",e.HTTP_READ_SUCCESS="HTTP_READ_SUCCESS",e.HTTP_CREATE_SUCCESS="HTTP_CREATE_SUCCESS",e.HTTP_DELETE_SUCCESS="HTTP_DELETE_SUCCESS",e.HTTP_UPDATE_ORDER_SUCCESS="HTTP_UPDATE_ORDER_SUCCESS"}(r||(r={}));var p=n(35),h=n(403),f=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,null,[{key:"getAuthHeader",value:function(){var e=localStorage.getItem("authVM");if(e){var t=JSON.parse(e).jwt,n=new Headers;return n.append("Authorization","Bearer ".concat(t)),n.append("Content-Type","application/json"),n}}},{key:"getJWT",value:function(){if(!localStorage.getItem("authVM"))return"";var e=JSON.parse(localStorage.getItem("authVM")).jwt;return"Bearer ".concat(e)}},{key:"getApiUrl",value:function(){return"https://localhost:44397/api/"}}]),e}();function v(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST,message:"GET DiscountScheme of producer id: "+e}),t.prev=1,t.next=4,fetch(f.getApiUrl()+"discountSchemes/producer/"+e,{headers:f.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED,discountSchemes:c,httpMessage:r.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}var S=n(550),C=n(543),O=n(546),T=n(545),D=n(547),_=n(548),g=n(247),R=n(90),b=n(194),y=n(305);function U(e){var t=e.title,n=e.paras,r=e.actionTitle,a=e.action,i=I();return c.a.createElement("div",null,c.a.createElement(C.a,{className:i.cardWidth},c.a.createElement(T.a,{onClick:a},c.a.createElement(O.a,{component:"img",height:"140",className:i.cardHeight,image:"e_commerce.png",title:"https://acowebs.com/impact-ecommerce-society/"})),c.a.createElement(D.a,null,c.a.createElement(R.a,{gutterBottom:!0,variant:"h5",component:"h2"},t),n),null!=a&&c.a.createElement(_.a,null,c.a.createElement(g.a,{size:"medium",color:"primary",onClick:a},r))))}var I=Object(b.a)((function(e){return Object(y.a)({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},cardWidth:{maxWidth:450},cardHeight:{height:140}})})),x=n(37),j=n(549),P=n(566);function A(e){var t=e.error,n=e.autoHideDuration,i=void 0===n?6e3:n,o=e.message,l=Object(u.c)(),d=Object(a.useState)(!1),E=Object(s.a)(d,2),p=E[0],h=E[1],f=function(){h(!1);var e=m(r.CLEAR_ERROR,t);l(e)};return Object(a.useEffect)((function(){t&&h(!0)}),[t]),c.a.createElement(j.a,{open:p,autoHideDuration:i,onClose:f},c.a.createElement(N,{severity:"error",onClose:f},o))}function N(e){return c.a.createElement(P.a,Object.assign({elevation:6,variant:"filled"},e))}function w(){var e,t,n=Object(u.c)(),i=Object(x.f)(),o=M(),l=null!==(e=Object(u.d)((function(e){return e.discountSchemeReducer.discountSchemes})))&&void 0!==e?e:[],p=null!==(t=Object(u.d)((function(e){return e.errorReducer.error})))&&void 0!==t?t:null;Object(a.useEffect)((function(){document.title="Products";var e=function(){var e=Object(E.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:r.GET_DISCOUNTSCHEMES_REQUEST,message:"GET DiscountSchemes..."}),e.prev=1,e.next=4,fetch(f.getApiUrl()+"discountSchemes",{headers:f.getAuthHeader()});case 4:if((n=e.sent).ok){e.next=10;break}return e.next=8,n.json();case 8:throw e.sent;case 10:return e.next=12,n.json();case 12:a=e.sent,t({type:r.GET_DISCOUNTSCHEMES_RECEIVED,discountSchemes:a,httpMessage:r.HTTP_READ_SUCCESS}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),t(m(r.ERROR,e.t0));case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}();n(e)}),[n]);for(var h=[],v=function(e){var t,n,r=l[e],a="";r.expiryDate&&(a=new Date(r.expiryDate.toString()).toDateString());for(var o=null!==(t=null===(n=r.product)||void 0===n?void 0:n.name)&&void 0!==t?t:"",u=r.bids.filter((function(e){return!e.isInCart})).reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.quantity)}),0),d={Title:o,"Discounted Price":"$"+r.discountedPrice,"Remaining Bids Needed":r.minOrderQnty-u,"Expiry Date":a},E=[],m=0,p=Object.entries(d);m<p.length;m++){var f,v=Object(s.a)(p[m],2),C=v[0],O=v[1],T=c.a.createElement(R.a,{variant:"body2",color:"textSecondary",component:"p",align:"left",key:C},c.a.createElement("b",null,C,"\xa0"),O);if("Discounted Price"===C)T=c.a.createElement(R.a,{variant:"body2",color:"textSecondary",component:"p",align:"left",key:C},c.a.createElement("b",null,C,"\xa0")," $",r.discountedPrice," $",c.a.createElement("del",null,null===(f=r.product)||void 0===f?void 0:f.originalPrice));E.push(T)}var D=c.a.createElement(S.a,{item:!0,xs:12,sm:4,lg:3,key:e},c.a.createElement(U,{title:o,paras:E,actionTitle:"Add to Cart",action:function(){i.push("/discountScheme/"+r.discountSchemeId)}}));h.push(D)},C=0;C<l.length;C++)v(C);return c.a.createElement("div",null,l.length>0&&c.a.createElement(S.a,{className:o.fullWidth,container:!0,spacing:3},h),c.a.createElement(A,{error:p,message:"error fetching schemes"}))}var M=Object(b.a)((function(e){return Object(y.a)({typo:{fontVariant:"body2",color:"textSecondary",component:"p",align:"left"},fullWidth:{width:"100vw",margin:"auto",paddingLeft:"100px",paddingRight:"100px"}})})),k=n(34),H=n(42);function L(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.UPDATE_BID_IN_CART_REQUEST,messages:"Request to update bid in cart"}),t.prev=1,t.next=4,fetch(f.getApiUrl()+"bids/updatecart",{method:"PUT",headers:f.getAuthHeader(),body:JSON.stringify(e)});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.UPDATE_BID_IN_CART_RECEIVED,bid:c,message:a.statusText,httpMessage:r.HTTP_UPDATE_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}var G=n(306),Q=n.n(G),B=n(406),V=n.n(B),q=n(416),F=n.n(q),W=n(407),$=n.n(W),z=n(414),J=n.n(z),K=n(274),X=n.n(K),Y=n(315),Z=n.n(Y),ee=n(408),te=n.n(ee),ne=n(409),re=n.n(ne),ae=n(411),ce=n.n(ae),ie=n(412),oe=n.n(ie),se=n(413),ue=n.n(se),le=n(257),de=n.n(le),Ee=n(410),me=n.n(Ee),pe=n(415),he=n.n(pe),fe=n(417),ve=n.n(fe),Se=n(258),Ce=n.n(Se);function Oe(e){for(var t=e.title,n=e.data,r=e.columnNames,a=e.accessors,i=(e.handleChecked,e.idColumnAccessorName),o=void 0===i?"":i,s=e.pageSize,u=void 0===s?10:s,l=(e.actionIcon,e.enablePaging),d=void 0!==l&&l,E=e.enableSearch,m=void 0!==E&&E,p=(e.actionMessage,e.enableSelection),h=void 0!==p&&p,f=e.detailPanelFieldName,v=void 0===f?"":f,S=e.enabledDetailPanel,C=void 0!==S&&S,O=[],T=0;T<r.length;T++){var D=r[T],_=a[T],g={title:D,field:_,hidden:_===o};O.push(g)}var R=Te();return c.a.createElement("div",null,c.a.createElement(Q.a,{icons:De,title:t,columns:O,data:n,options:{selection:h,pageSize:u,search:m,paging:d,rowStyle:{height:"100px"}},detailPanel:[function(e){return{disabled:!C,icon:function(){return c.a.createElement(X.a,{className:C?R.display:R.displayNone})},render:function(){return function(e,t){return e[t]}(e,v)}}}]}))}var Te=Object(b.a)((function(e){return Object(y.a)({displayNone:{display:"none"},display:{display:"initial"}})})),De={Add:Object(a.forwardRef)((function(e,t){return c.a.createElement(V.a,Object.assign({},e,{ref:t}))})),Check:Object(a.forwardRef)((function(e,t){return c.a.createElement($.a,Object.assign({},e,{ref:t}))})),Clear:Object(a.forwardRef)((function(e,t){return c.a.createElement(Z.a,Object.assign({},e,{ref:t}))})),Delete:Object(a.forwardRef)((function(e,t){return c.a.createElement(te.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(a.forwardRef)((function(e,t){return c.a.createElement(X.a,Object.assign({},e,{ref:t}))})),Edit:Object(a.forwardRef)((function(e,t){return c.a.createElement(re.a,Object.assign({},e,{ref:t}))})),Export:Object(a.forwardRef)((function(e,t){return c.a.createElement(me.a,Object.assign({},e,{ref:t}))})),Filter:Object(a.forwardRef)((function(e,t){return c.a.createElement(ce.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(a.forwardRef)((function(e,t){return c.a.createElement(oe.a,Object.assign({},e,{ref:t}))})),LastPage:Object(a.forwardRef)((function(e,t){return c.a.createElement(ue.a,Object.assign({},e,{ref:t}))})),NextPage:Object(a.forwardRef)((function(e,t){return c.a.createElement(X.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(a.forwardRef)((function(e,t){return c.a.createElement(J.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(a.forwardRef)((function(e,t){return c.a.createElement(Z.a,Object.assign({},e,{ref:t}))})),Search:Object(a.forwardRef)((function(e,t){return c.a.createElement(he.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(a.forwardRef)((function(e,t){return c.a.createElement(F.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(a.forwardRef)((function(e,t){return c.a.createElement(de.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(a.forwardRef)((function(e,t){return c.a.createElement(ve.a,Object.assign({},e,{ref:t}))})),AddShoppingCartIcon:Object(a.forwardRef)((function(e,t){return c.a.createElement(Ce.a,Object.assign({},e,{ref:t}))}))},_e=n(559),ge=n(418),Re=n.n(ge);function be(e){var t=e.quantity,n=e.setQuantity,r=e.size,a=void 0===r?"medium":r,i=e.align,o=void 0===i?"alignLeft":i,s=ye();return c.a.createElement("div",{className:s[o]},c.a.createElement(_e.a,{color:"primary","aria-label":"outlined primary button group",size:a},c.a.createElement(g.a,{onClick:function(){n(t+1)}},c.a.createElement(Re.a,null)),c.a.createElement(g.a,null,t),c.a.createElement(g.a,{onClick:function(){t-1<1||n(t-1)}},c.a.createElement(de.a,null))))}var ye=Object(b.a)((function(e){return Object(y.a)({alignLeft:{display:"flex",flexDirection:"column",alignItems:"left","& > *":{margin:e.spacing(1)}},alignCenter:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{margin:e.spacing(1)}},alignRight:{display:"flex",flexDirection:"column",alignItems:"right","& > *":{margin:e.spacing(1)}}})}));function Ue(e){var t=e.open,n=e.setOpen,r=e.message,a=e.severity,i=e.cleanUp,o=e.autoHideDuration,s=void 0===o?6e3:o,u=function(e){n(!1),i&&i()};return c.a.createElement(j.a,{open:t,autoHideDuration:s,onClose:function(){return u()}},c.a.createElement(Ie,{onClose:function(){return u()},severity:a},r))}function Ie(e){return c.a.createElement(P.a,Object.assign({elevation:6,variant:"filled"},e))}var xe=n(560),je=n(397),Pe=n(162);function Ae(e){var t=e.bids,n=e.rowIds,r=e.handleOrder,a=t.filter((function(e){return n.includes(e.bidId)})),i=a.map((function(e){var t,n,r=e.addressBidCountDict[e.collectionAddress],a=null!==(t=null===e||void 0===e||null===(n=e.discountScheme)||void 0===n?void 0:n.deliveryCharge)&&void 0!==t?t:0;return r?a/r:a})).reduce((function(e,t){return e+t}),0),o=a.reduce((function(e,t){var n,r;return e+t.quantity*(null!==(n=null===(r=t.discountScheme)||void 0===r?void 0:r.discountedPrice)&&void 0!==n?n:0)}),0),s=a.reduce((function(e,t){var n;return null!==(n=e+t.quantity)&&void 0!==n?n:0}),0);return c.a.createElement(Pe.a,null,c.a.createElement(S.a,{container:!0,spacing:3},c.a.createElement(S.a,{item:!0,xs:3}),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement(R.a,{variant:"body1",align:"center",color:"textSecondary",paragraph:!0},c.a.createElement("b",null,"Total Quantity: "),s),c.a.createElement(R.a,{variant:"body1",align:"center",color:"textSecondary",paragraph:!0},c.a.createElement("b",null,"Total Price: "),"$",o),c.a.createElement(R.a,{variant:"body1",align:"center",color:"textSecondary",paragraph:!0},c.a.createElement("b",null,"Total Delivery Charge: "),"$",i),c.a.createElement(R.a,{variant:"body1",align:"center",color:"secondary",paragraph:!0},c.a.createElement("b",null,"Grand Total: "),"$",i+s)),c.a.createElement(S.a,{item:!0,xs:3,alignContent:"flex-end"},c.a.createElement(g.a,{color:"secondary",size:"large",variant:"contained",onClick:r,disabled:a.length<1},"Order Bids"))))}var Ne=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;Object(p.a)(this,e),this.disabled=!1,this.selected=!1,this.text="",this.value=void 0,this.text=t,this.value=n},we=n(308),Me=n(309),ke=n(311),He=n(372),Le=n(74),Ge=n(310);function Qe(e){var t=e.title,n=e.state,r=e.selectListItems,a=e.handleChange,i=e.isError,o=void 0!==i&&i,s=e.formHelperText,u=void 0===s?"":s,l=Be();return c.a.createElement(we.a,{className:l.formControl,error:o},c.a.createElement(Me.a,{id:"demo-simple-select-label"},t),c.a.createElement(ke.a,{labelId:"demo-simple-select-label",autoWidth:!0,value:n,onChange:function(e){return a(e)}},c.a.createElement(He.a,{value:void 0,divider:!0},c.a.createElement("em",null,"None")),r.map((function(e,t){return c.a.createElement(He.a,{key:t,value:e.value},e.text)}))),o&&c.a.createElement(Ge.a,null,u))}var Be=Object(b.a)((function(e){return Object(y.a)({formControl:{minWidth:150},selectEmpty:{marginTop:e.spacing(2)}})}));function Ve(e){for(var t=e.textDict,n=e.color,r=void 0===n?"textSecondary":n,a=[],i=0,o=Object.entries(t);i<o.length;i++){var u=Object(s.a)(o[i],2),l=u[0],d=u[1],E=c.a.createElement(R.a,{variant:"body2",color:r,component:"p",align:"left",key:l},c.a.createElement("b",null,l,"\xa0"),d);a.push(E)}return c.a.createElement(xe.a,null,a)}var qe=n(61),Fe=function e(){Object(p.a)(this,e),this.bidId=void 0,this.checkbox=void 0,this.name=void 0,this.discountedPrice=void 0,this.updateCartComponent=void 0,this.collectionAddress=void 0,this.deliveryCharge=void 0,this.deleteButton=void 0,this.detailPanel=void 0};function We(){var e,t,n=Object(x.f)(),i=Object(u.c)(),o=Object(a.useState)(!1),l=Object(s.a)(o,2),p=l[0],h=l[1],v=Object(a.useState)(""),C=Object(s.a)(v,2),O=C[0],T=C[1],D=function(e,t){h(e),T(t)},_=null!==(e=Object(u.d)((function(e){return e.bidReducer.bids})))&&void 0!==e?e:[],R=Object(a.useState)([]),b=Object(s.a)(R,2),y=b[0],U=b[1];Object(a.useEffect)((function(){U(Object(qe.cloneDeep)(_))}),[_.length,JSON.stringify(_)]),Object(a.useEffect)((function(){document.title="Cart";var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.GET_BIDSOFCUSTOMER_INCART_REQUEST,messages:"Fetching bids in cart for customer "+e}),t.prev=1,t.next=4,fetch(f.getApiUrl()+"bids/cart/"+e,{headers:f.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.GET_BIDSOFCUSTOMER_INCART_RECEIVED,bids:c,message:a.statusText,httpMessage:r.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(1);i(e)}),[i]);var I=Object(a.useState)([]),j=Object(s.a)(I,2),P=j[0],A=j[1],N=null!==(t=Object(u.d)((function(e){return e.bidReducer.httpMessage})))&&void 0!==t?t:"";Object(a.useEffect)((function(){N.includes(r.HTTP_UPDATE_ORDER_SUCCESS)&&n.push("/orders")}),[N,n]);for(var w=y.map((function(e){return function(e){var t,n,r,a,i,o,s,u=null===(t=e.discountScheme)||void 0===t?void 0:t.discountedPrice,l=null===(n=e.discountScheme)||void 0===n||null===(r=n.product)||void 0===r?void 0:r.originalPrice,d=new Fe;d.bidId=e.bidId,d.discountedPrice="$".concat(u," (Save $").concat(l-u,")"),d.name=null===(a=e.discountScheme)||void 0===a||null===(i=a.product)||void 0===i?void 0:i.name;var E=e.addressBidCountDict[e.collectionAddress],m=null!==(o=null===e||void 0===e||null===(s=e.discountScheme)||void 0===s?void 0:s.deliveryCharge)&&void 0!==o?o:0,p=E?m/(E+1):m;return d.deliveryCharge=c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement("span",null,"$".concat(p))),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement("span",{style:{borderBottom:"1px solid black",display:"block",fontSize:"12px"}},"$",m),c.a.createElement("span",{style:{fontSize:"12px"}},E," other bids here"))),d}(e)})),M=function(e){var t,n,a,o,s,u,l=y[e],p=l.quantity,h=function(t,n){var r=Object(qe.cloneDeep)(_),a=r[e];a.quantity=t,a.collectionAddress=n,U(r);var c=L(a);i(c),D(!0,"bid added to cart")},v="";(null===(t=l.discountScheme)||void 0===t?void 0:t.expiryDate)&&(v=new Date(l.discountScheme.expiryDate.toString()).toDateString());w[e].updateCartComponent=c.a.createElement(be,{quantity:p,setQuantity:function(e){h(e,l.collectionAddress)},size:"small"}),w[e].checkbox=c.a.createElement(je.a,{size:"small",onChange:function(){var e=l.bidId;if(P.includes(e)){var t=P.filter((function(t){return t!==e}));A(t)}else A([].concat(Object(H.a)(P),[e]))}}),w[e].deleteButton=c.a.createElement(g.a,{size:"small",variant:"contained",color:"primary",onClick:function(){var t=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.DELETE_BID_IN_CART_REQUEST,messages:"deleting bids in cart with bidId"+e}),t.prev=1,t.next=4,fetch(f.getApiUrl()+"bids/cart/"+e,{method:"DELETE",headers:f.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:n({type:r.DELETE_BID_IN_CART_RECEIVED,message:a.statusText,httpMessage:r.HTTP_DELETE_SUCCESS}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()}(l.bidId);i(t),D(!0,"item deleted");var n=Object(qe.cloneDeep)(y).filter((function(t,n){return n!==e}));U(n)}},"Delete");var C=l.addressBidCountDict,O=[];for(var T in C){var R=new Ne(T,T);R.selected=l.collectionAddress===T,O.push(R)}w[e].collectionAddress=c.a.createElement(Qe,{title:"Delivery",state:l.collectionAddress+"",selectListItems:O,handleChange:function(e){var t=e.target.value;h(l.quantity,t)}});var b={Description:null===(n=l.discountScheme)||void 0===n||null===(a=n.product)||void 0===a?void 0:a.description,"Bid Expiry Date":v},I={"Min Order Quantity":null===(o=l.discountScheme)||void 0===o?void 0:o.minOrderQnty,"Current total bids":l.currentTotalBids,"Remaining bids required":(null===(s=l.discountScheme)||void 0===s?void 0:s.minOrderQnty)-l.currentTotalBids},x={"Delivery Charge":"$"+(null===(u=l.discountScheme)||void 0===u?void 0:u.deliveryCharge)};w[e].detailPanel=c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(Ve,{textDict:b})),c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(Ve,{textDict:I})),c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(Ve,{textDict:x})))},k=0;k<y.length;k++)M(k);var G=Object.keys(new Fe);G=G.filter((function(e){return"detailPanel"!==e}));return c.a.createElement(xe.a,{maxWidth:"xl"},c.a.createElement(Ae,{bids:y,rowIds:P,handleOrder:function(){var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.ORDER_BIDS_IN_CART_REQUEST,messages:"ordering bids in cart "+e.toString()}),t.prev=1,t.next=4,fetch(f.getApiUrl()+"bids/cart/order",{method:"PUT",headers:f.getAuthHeader(),body:JSON.stringify(e)});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:n({type:r.ORDER_BIDS_IN_CART_RECEIVED,message:a.statusText,httpMessage:r.HTTP_UPDATE_ORDER_SUCCESS}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()}(y.filter((function(e){return P.includes(e.bidId)})));i(e)}}),c.a.createElement("br",null),c.a.createElement(Oe,{data:w,columnNames:["BidId","Check Box","Name","Price per Item","Quantity","Collection Address","Average Delivery Charge","Remove"],accessors:G,title:"Cart",idColumnAccessorName:"bidId",actionMessage:"Make Order",actionIcon:Ce.a,enabledDetailPanel:!0,detailPanelFieldName:"detailPanel"}),c.a.createElement(Ue,{open:p,setOpen:h,message:O,severity:"success"}))}var $e=function e(){Object(p.a)(this,e),this.name=void 0,this.discountedPrice=void 0,this.quantity=void 0,this.deliveryCharge=void 0,this.collectionAddress=void 0,this.remainingBidsRequired=void 0,this.bidExpiryDate=void 0,this.bidStatus=void 0};function ze(){var e;document.title="Orders";var t=Object(u.c)(),n=null!==(e=Object(u.d)((function(e){return e.bidReducer.bids})))&&void 0!==e?e:[];Object(a.useEffect)((function(){var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST,messages:"getting  PendingOrSuccessfulBids of customer "+e}),t.prev=1,t.next=4,fetch(f.getApiUrl()+"bids/orders/1",{headers:f.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED,bids:c,message:a.statusText,httpMessage:r.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(1);t(e)}),[t]);var i=Object.keys(new $e),o=n.map((function(e){return function(e){var t,n,r,a,c,i,o,s,u=null===(t=e.discountScheme)||void 0===t?void 0:t.discountedPrice,l=null===(n=e.discountScheme)||void 0===n||null===(r=n.product)||void 0===r?void 0:r.originalPrice,d=null===(a=e.discountScheme)||void 0===a?void 0:a.minOrderQnty,E=e.currentTotalBids,m=new $e;m.quantity=e.quantity+"",m.collectionAddress=e.collectionAddress,m.discountedPrice="$".concat(u," (Save $").concat(l-u,")"),m.deliveryCharge="$"+(null===(c=e.discountScheme)||void 0===c?void 0:c.deliveryCharge),m.name=null===(i=e.discountScheme)||void 0===i||null===(o=i.product)||void 0===o?void 0:o.name,m.remainingBidsRequired=d-E;var p=new Date(null===(s=e.discountScheme)||void 0===s?void 0:s.expiryDate);m.bidExpiryDate=p.toDateString(),null!=e.bidSuccessDate?m.bidStatus="SUCCESS":new Date>p?m.bidStatus="FAILED":m.bidStatus="PENDING";return m}(e)}));return c.a.createElement(xe.a,{maxWidth:"lg"},c.a.createElement(Oe,{columnNames:["Name","Discounted Price Per Item","Quantity","Delivery Charge","Collection Address","Remaining Bids Required","Bid Expiry Date","Bid Status"],accessors:i,data:o,title:"Submitted Bids",enablePaging:!0,pageSize:5}))}var Je=n(85),Ke=function e(){Object(p.a)(this,e),this.discountSchemeId=0,this.minOrderQnty=0,this.discountedPrice=0,this.expiryDate=null,this.deliveryCharge=0,this.productId=0,this.product=null,this.bids=[],this.addressBidCountDict={}},Xe=function e(){Object(p.a)(this,e),this.productId=0,this.name="",this.category="",this.description="",this.originalPrice=0,this.producerId=0,this.discountSchemes=[]},Ye=n(554),Ze=n(556),et=n(555),tt=n(561),nt=n(259),rt=n.n(nt);function at(e){var t=e.open,n=e.toggleOpen,r=e.title,a=e.content,i=e.actionTitle,o=e.action,s=e.showPicture,u=void 0!==s&&s,l=e.secondaryActionTitle,d=e.secondaryAction;return c.a.createElement(Ye.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-title",maxWidth:"sm",fullWidth:!0},c.a.createElement(tt.a,{id:"form-dialog-title"},r),c.a.createElement(et.a,null,u&&c.a.createElement(O.a,{component:"img",image:rt.a,title:"https://acowebs.com/impact-ecommerce-society/"}),c.a.createElement("br",null),a),c.a.createElement(xe.a,null,c.a.createElement(S.a,{container:!0,spacing:0},c.a.createElement(S.a,{item:!0,xs:8}),c.a.createElement(S.a,{item:!0,xs:4},i&&c.a.createElement(Ze.a,null,c.a.createElement(g.a,{onClick:o,color:"primary",variant:"outlined"},i)))),c.a.createElement(S.a,{container:!0,spacing:0},c.a.createElement(S.a,{item:!0,xs:4},l&&c.a.createElement(Ze.a,null,c.a.createElement(g.a,{onClick:d,color:"secondary",variant:"outlined"},l))),c.a.createElement(S.a,{item:!0,xs:4}),c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(Ze.a,null,c.a.createElement(g.a,{onClick:n,color:"primary",variant:"outlined"},"Close"))))))}var ct=n(569),it=n(383),ot=function e(){Object(p.a)(this,e),this.name=void 0,this.discountedPrice=void 0,this.deliveryCharge="0",this.minOrderQnty=0,this.currentBids=0,this.bidExpiryDate="",this.bidStatus=void 0,this.delete=void 0};function st(){var e,t;document.title="Schemes";var n=Object(u.c)(),i=Object(x.f)(),o=null!==(e=Object(u.d)((function(e){return e.discountSchemeReducer.discountSchemes})))&&void 0!==e?e:[];Object(a.useEffect)((function(){var e=v(2);n(e)}),[n]);var l=o.map((function(e){var t;return null!==(t=e.product)&&void 0!==t?t:new Xe}));l=Object(qe.uniqBy)(l,(function(e){return e.name}));var p=Object(a.useState)([]),h=Object(s.a)(p,2),C=h[0],O=h[1];Object(a.useEffect)((function(){O(o)}),[o.length,o]);var T=Object(a.useState)(),D=Object(s.a)(T,2),_=D[0],R=D[1],b=["SUCCESS","PENDING","FAILED"].map((function(e){return new Ne(e,e)})),y=Object(a.useState)(""),U=Object(s.a)(y,2),I=U[0],j=U[1];Object(a.useEffect)((function(){var e=Object(qe.cloneDeep)(o);e=e.filter((function(e){return!_||ut(e)===_})).filter((function(e){var t,n,r;return!I||(null===(t=e.product)||void 0===t||null===(n=t.name)||void 0===n||null===(r=n.toLowerCase())||void 0===r?void 0:r.includes(I.toLowerCase()))})),O(e)}),[_,I,o]);var P=Object(a.useState)(!1),A=Object(s.a)(P,2),N=A[0],w=A[1],M=Object(a.useState)(new Xe),k=Object(s.a)(M,2),H=k[0],L=k[1],G={Name:H.name,"Original Price":"$"+H.originalPrice,Category:H.category,Description:H.description},Q=c.a.createElement(Ve,{textDict:G}),B=[],V=Object(a.useState)(!1),q=Object(s.a)(V,2),F=q[0],W=q[1],$=Object(a.useState)(new Ke),z=Object(s.a)($,2),J=z[0],K=z[1],X=null!==(t=Object(u.d)((function(e){return e.discountSchemeReducer.httpMessage})))&&void 0!==t?t:"";Object(a.useEffect)((function(){if(X.includes(r.HTTP_DELETE_SUCCESS)){var e=v(2);n(e)}}),[X,n]);var Y,Z=Object(Je.a)(C);try{var ee=function(){var e,t=Y.value,n=function(e){var t,n=new ot;if(null==e)return n;var r=e.discountedPrice,a=null===(t=e.product)||void 0===t?void 0:t.originalPrice;n.discountedPrice=c.a.createElement("span",null,"$",r," ",c.a.createElement("del",null,"$",a));var i=new Date(e.expiryDate);return n.bidExpiryDate=i.toDateString(),n.deliveryCharge="$"+e.deliveryCharge,n.currentBids=e.bids.filter((function(e){return!e.isInCart})).reduce((function(e,t){return e+t.quantity}),0),n.minOrderQnty=e.minOrderQnty,n.bidStatus=ut(e),n}(t),r=t.bids.length>0,a=r?"Cannot delete scheme as it has dependent bids":"";n.name=c.a.createElement(g.a,{onClick:function(){var e,n=null!==(e=C.map((function(e){return e.product})).find((function(e){return(null===e||void 0===e?void 0:e.productId)===t.productId})))&&void 0!==e?e:new Xe;L(n),w(!N)},size:"small",variant:"outlined"},null===(e=t.product)||void 0===e?void 0:e.name),n.delete=c.a.createElement("div",{className:"tooltip__div-visible"},c.a.createElement(g.a,{size:"small",variant:"outlined",color:"secondary",disabled:r,onClick:function(){K(t),W(!0)}},"Delete",c.a.createElement("span",{className:"tooltiptext"},a))),B.push(n)};for(Z.s();!(Y=Z.n()).done;)ee()}catch(ne){Z.e(ne)}finally{Z.f()}var te=Object.keys(new ot);return c.a.createElement(xe.a,{maxWidth:"lg"},c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:2},c.a.createElement(Qe,{title:"Status",state:_,selectListItems:b,handleChange:function(e){var t=e.target.value;R(t)}})),c.a.createElement(S.a,{item:!0,xs:3},c.a.createElement(ct.a,{id:"combo-box-demo",options:l,getOptionLabel:function(e){var t;return null!==(t=e.name)&&void 0!==t?t:""},style:{width:300},onInputChange:function(e,t){j(t)},renderInput:function(e){return c.a.createElement(it.a,Object.assign({},e,{label:"Products",variant:"outlined"}))}})),c.a.createElement(S.a,{item:!0,xs:5}),c.a.createElement(S.a,{item:!0,xs:2},c.a.createElement(g.a,{onClick:function(){return i.push("/producer/discountSchemes/create")},variant:"contained",color:"primary"},"Create Scheme"))),c.a.createElement("br",null),c.a.createElement(Oe,{columnNames:["Name","Discounted Price","Delivery Charge","Min Order Qnty","Current Bids","Expiry Date","Bid Status","Delete"],accessors:te,data:B,title:"Discount Schemes",enablePaging:!0,pageSize:5}),c.a.createElement(at,{open:N,toggleOpen:function(){return w(!N)},content:Q,showPicture:!0}),c.a.createElement(at,{open:F,toggleOpen:function(){return W(!F)},content:c.a.createElement("p",null,"Confirm Delete?"),secondaryAction:function(){if(!(J.bids.length>0)){var e,t=(e=J.discountSchemeId,function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.DELETE_DISCOUNTSCHEME_REQUEST,message:"Deleting Discount Scheme"}),t.prev=1,t.next=4,fetch(f.getApiUrl()+"discountSchemes/"+e,{method:"DELETE",headers:f.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.DELETE_DISCOUNTSCHEME_RECEIVED,discountScheme:c,httpMessage:r.HTTP_DELETE_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}());n(t),W(!1)}},secondaryActionTitle:"Delete Product"}))}function ut(e){var t=new Date(e.expiryDate),n=e.bids.some((function(e){return null!=e.bidSuccessDate})),r=t<new Date;return n?"SUCCESS":!n&&r?"FAILED":"PENDING"}function lt(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.GET_PRODUCTS_REQUEST,message:"Getting products of producer ..."}),t.prev=1,t.next=4,fetch(f.getApiUrl()+"products/producer/"+e,{headers:f.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.GET_PRODUCTS_RECEIVED,products:c,message:a.statusText,httpMessage:r.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}var dt=n(238),Et=n(187),mt=n(570),pt=n(419);function ht(e){var t=e.control,n=e.errors,r=e.label,a=e.name,i=e.defaultValue,o=void 0===i?"":i,s=e.errorMessage,u=void 0===s?"":s,l=e.rules,d=void 0===l?{}:l,E=null!=n[a],m=E?u:"";return c.a.createElement(Le.a,{name:a,defaultValue:o,control:t,rules:d,render:function(e){return c.a.createElement(ft,Object.assign({},e,{label:r,error:E,helperText:m}))}})}function ft(e){var t=e.label,n=e.onChange,r=e.value,a=e.error,i=void 0!==a&&a,o=e.helperText,s=void 0===o?"":o;return r||(r=new Date),c.a.createElement(Et.b,{utils:dt.default},c.a.createElement(mt.b,{error:i,helperText:s,disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:Object(pt.v4)(),label:t,value:r,onBlur:null,onFocus:null,onChange:n}))}var vt,St,Ct=n(386);function Ot(e){var t=e.label,n=e.name,r=e.defaultValue,a=void 0===r?"":r,i=e.isFullWidth,o=void 0!==i&&i,s=e.variant,u=void 0===s?"standard":s,l=e.type,d=void 0===l?"text":l,E=e.adornment,m=void 0===E?null:E,p=e.control,h=e.errors,f=e.errorMessage,v=void 0===f?"":f,S=e.rules,C=void 0===S?{}:S,O=null!=h[n],T=O?v:"";return c.a.createElement("div",null,c.a.createElement(Le.a,{name:n,defaultValue:a,control:p,rules:C,render:function(e){return c.a.createElement(it.a,Object.assign({},e,{label:t,error:O,helperText:T,fullWidth:o,variant:u,type:d,InputProps:{startAdornment:m?c.a.createElement(Ct.a,{position:"start"},m):null}}))}}))}function Tt(){var e,t,n;document.title="Create Discount Scheme";var i=Object(u.c)(),o=Object(x.f)(),s=null!==(e=Object(u.d)((function(e){return e.productReducer.products})))&&void 0!==e?e:[];Object(a.useEffect)((function(){var e=lt(2);i(e)}),[i]);var l=Object(Le.b)(),p=l.errors,h=l.handleSubmit,v=l.control,C=l.getValues,O=(0,l.watch)(vt.productId,0),T=null!==(t=s.find((function(e){return e.productId===O})))&&void 0!==t?t:new Xe,D={"Original Price":"$"+T.originalPrice,Description:T.description},_=null!==(n=Object(u.d)((function(e){return e.discountSchemeReducer.httpMessage})))&&void 0!==n?n:"";Object(a.useEffect)((function(){_.includes(r.HTTP_CREATE_SUCCESS)&&o.push("/producer/discountSchemes")}),[_,o]);return c.a.createElement(xe.a,{maxWidth:"md"},c.a.createElement("form",{onSubmit:h((function(e){var t=C([vt.productId,vt.discountedPrice,vt.minOrderQnty,vt.deliveryCharge,vt.expiryDate]),n=t.productId,a=t.discountedPrice,c=t.minOrderQnty,o=t.deliveryCharge,s=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.CREATE_DISCOUNTSCHEME_REQUEST,message:"Creating Discount Scheme"}),t.prev=1,t.next=4,fetch(f.getApiUrl()+"discountSchemes",{method:"POST",headers:f.getAuthHeader(),body:JSON.stringify(e)});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.CREATE_DISCOUNTSCHEME_RECEIVED,discountScheme:c,httpMessage:r.HTTP_CREATE_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(function(e,t,n,r,a){var c=new Ke;return c.productId=e,c.minOrderQnty=t,c.discountedPrice=n,c.expiryDate=r,c.deliveryCharge=a,c}(n,c,a,t.expiryDate,o));i(s)}))},c.a.createElement(S.a,{container:!0,justify:"flex-start"},c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(Le.a,{control:v,name:vt.productId,rules:{required:!0},render:function(e){var t=e.onChange;return c.a.createElement(ct.a,{id:"combo-box-demo",options:s,getOptionLabel:function(e){var t;return null!==(t=e.name)&&void 0!==t?t:""},style:{width:300},onChange:function(e,n){return t(n.productId)},renderInput:function(e){return c.a.createElement(it.a,Object.assign({},e,{label:"Products",variant:"outlined"}))}})}}),p.productId&&c.a.createElement("p",{style:{fontSize:"14px",color:"red",textAlign:"left"}},"Product is required")),c.a.createElement(S.a,{item:!0,xs:3,alignItems:"flex-end"},c.a.createElement(g.a,{onClick:function(){return o.push("/producer/product/0")},variant:"outlined",size:"small",style:{bottom:"-30%"}},"Or create one")),c.a.createElement(Dt,null),O>0&&c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(Ve,{textDict:D,color:"textSecondary"})),c.a.createElement(Dt,null),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(Ot,{isFullWidth:!0,control:v,errors:p,name:vt.discountedPrice,label:"Discounted Price",errorMessage:"Discounted Price is required",rules:{required:!0,min:1},adornment:"$"})),c.a.createElement(Dt,null),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(Ot,{isFullWidth:!0,control:v,errors:p,name:vt.minOrderQnty,label:"Minimum order quantity",errorMessage:"Minimum order quantity is required",rules:{required:!0,min:1}})),c.a.createElement(Dt,null),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(Ot,{isFullWidth:!0,control:v,errors:p,name:vt.deliveryCharge,label:"Delivery Charge",errorMessage:"Delivery Charge is required",rules:{required:!0,min:1},adornment:"$"})),c.a.createElement(Dt,null),c.a.createElement(S.a,{item:!0,xs:2},c.a.createElement(ht,{label:"Expiry Date",name:vt.expiryDate,control:v,errors:p,rules:{required:!0},errorMessage:"Expiry Date is required"})),c.a.createElement(Dt,null),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(g.a,{variant:"contained",color:"primary",type:"submit"},"Submit")),c.a.createElement(Dt,null))))}function Dt(){return c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement("br",null))}function _t(){var e,t;document.title="Product Form";var n=Object(u.c)(),i=Object(x.g)(),o=parseInt(i.productId),l=0===o?"CREATE":"UPDATE",p=null!==(e=Object(u.d)((function(e){return e.productReducer.product})))&&void 0!==e?e:new Xe;Object(a.useEffect)((function(){if("UPDATE"===l){var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.GET_PRODUCT_REQUEST,message:"Getting products of producer ..."}),t.prev=1,t.next=4,fetch(f.getApiUrl()+"products/"+e,{headers:f.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.GET_PRODUCT_RECEIVED,product:c,message:a.statusText,httpMessage:r.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(o);n(e)}}),[o,n,l]);var h=Object(Le.b)(),v=h.errors,S=h.handleSubmit,C=h.control,O=h.reset,T=h.setValue;Object(a.useEffect)((function(){"UPDATE"===l&&(T(St.productId,p.productId),T(St.name,p.name),T(St.category,p.category),T(St.description,p.description),T(St.originalPrice,p.originalPrice))}),[JSON.stringify(p),l,T]);var D=Object(a.useState)(!1),_=Object(s.a)(D,2),R=_[0],b=_[1],y=null!==(t=Object(u.d)((function(e){return e.productReducer.httpMessage})))&&void 0!==t?t:"";return Object(a.useEffect)((function(){(y.includes(r.HTTP_CREATE_SUCCESS)||y.includes(r.HTTP_UPDATE_SUCCESS))&&b(!0)}),[y]),c.a.createElement(xe.a,{maxWidth:"md"},c.a.createElement("form",{onSubmit:S((function(e){var t=e.productId,a=function(e,t,n,r,a){var c=new Xe;return c.productId=e>0?e:0,c.name=t,c.category=n,c.description=r,c.originalPrice=a,c.producerId=2,c}(t,e.name,e.category,e.description,e.originalPrice);if("CREATE"===l){var c=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.GET_PRODUCTS_REQUEST,message:"Creating product ..."}),t.prev=1,t.next=4,fetch(f.getApiUrl()+"products/",{method:"POST",headers:f.getAuthHeader(),body:JSON.stringify(e)});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.GET_PRODUCTS_RECEIVED,product:c,message:a.statusText,httpMessage:r.HTTP_CREATE_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(a);n(c),O({})}else if("UPDATE"===l){a.producerId=p.producerId;var i=function(e,t){return function(){var n=Object(E.a)(d.a.mark((function n(a){var c,i;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:r.UPDATE_PRODUCT_REQUEST,message:"Updating product ..."}),n.prev=1,n.next=4,fetch(f.getApiUrl()+"products/"+e,{method:"PUT",headers:f.getAuthHeader(),body:JSON.stringify(t)});case 4:if((c=n.sent).ok){n.next=10;break}return n.next=8,c.json();case 8:throw n.sent;case 10:return n.next=12,c.json();case 12:i=n.sent,a({type:r.GET_PRODUCTS_RECEIVED,product:i,message:c.statusText,httpMessage:r.HTTP_UPDATE_SUCCESS}),n.next=19;break;case 16:n.prev=16,n.t0=n.catch(1),a(m(r.ERROR,n.t0));case 19:case"end":return n.stop()}}),n,null,[[1,16]])})));return function(e){return n.apply(this,arguments)}}()}(t,a);n(i)}}))},c.a.createElement(gt,{display:"none",component:c.a.createElement(Ot,{isFullWidth:!0,control:C,errors:v,name:St.productId,label:"Product Id",rules:{required:!1}})}),c.a.createElement(gt,{component:c.a.createElement(Ot,{isFullWidth:!0,control:C,errors:v,name:St.name,label:"Name",rules:{required:!0},errorMessage:"Name is required"})}),c.a.createElement(gt,{component:c.a.createElement(Ot,{isFullWidth:!0,control:C,errors:v,name:St.originalPrice,label:"Original Price",rules:{required:!0,min:1},adornment:"$",errorMessage:"Original Price is required"})}),c.a.createElement(gt,{component:c.a.createElement(Ot,{isFullWidth:!0,control:C,errors:v,name:St.category,label:"Category",rules:{required:!1}})}),c.a.createElement(gt,{component:c.a.createElement(Ot,{isFullWidth:!0,control:C,errors:v,name:St.description,label:"Description",rules:{required:!1}})}),c.a.createElement(g.a,{variant:"contained",color:"primary",type:"submit"},"Submit")),c.a.createElement(Ue,{open:R,setOpen:b,severity:"success",message:l+" is successful!"}))}function gt(e){var t=e.component,n=e.display,r=void 0===n?"initial":n;return c.a.createElement("div",null,c.a.createElement(S.a,{item:!0,xs:12,style:{display:r}},t),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement("br",null)))}!function(e){e.productId="productId",e.discountedPrice="discountedPrice",e.minOrderQnty="minOrderQnty",e.deliveryCharge="deliveryCharge",e.expiryDate="expiryDate"}(vt||(vt={})),function(e){e.productId="productId",e.name="name",e.category="category",e.description="description",e.originalPrice="originalPrice"}(St||(St={}));n(507);var Rt=function e(){Object(p.a)(this,e),this.name=void 0,this.originalPrice=void 0,this.category=void 0,this.description=void 0,this.update=void 0,this.delete=void 0};function bt(){var e;document.title="Products";var t=Object(u.c)(),n=Object(x.f)(),i=null!==(e=Object(u.d)((function(e){return e.productReducer.products})))&&void 0!==e?e:[];Object(a.useEffect)((function(){var e=lt(2);t(e)}),[t]);var o=Object.keys(new Rt),l=[],p=Object(a.useState)(!1),h=Object(s.a)(p,2),v=h[0],C=h[1],O=Object(a.useState)(new Xe),T=Object(s.a)(O,2),D=T[0],_=T[1],R=Object(u.d)((function(e){return e.productReducer.httpMessage}));Object(a.useEffect)((function(){if(R.includes(r.HTTP_DELETE_SUCCESS)){var e=lt(2);t(e)}}),[R,t]);for(var b=function(e){var t=i[e],r=function(e){var t=new Rt;return t.name=e.name,t.originalPrice="$"+e.originalPrice,t.category=e.category,t.description=e.description,t}(t),a=t.discountSchemes.length>0,o=a?"Cannot delete product as it has dependent discount schemes":"";r.update=c.a.createElement(g.a,{size:"small",variant:"outlined",onClick:function(){return n.push("/producer/product/"+t.productId)}},"Update"),r.delete=c.a.createElement("div",{className:"tooltip__div-visible"},c.a.createElement(g.a,{color:"secondary",size:"small",variant:"outlined",disabled:a,onClick:function(){C(!0),_(t)}},"Delete",c.a.createElement("span",{className:"tooltiptext"},o))),l.push(r)},y=0;y<i.length;y++)b(y);return c.a.createElement(xe.a,null,c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:10}),c.a.createElement(S.a,{item:!0,xs:2},c.a.createElement(g.a,{variant:"contained",onClick:function(){return n.push("/producer/product/0")},color:"primary"},"Create Product"))),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement("br",null)),c.a.createElement(Oe,{columnNames:["Name","Original Price","Category","Description","Update","Delete"],accessors:o,data:l,title:"Products",enablePaging:!0,pageSize:5}),c.a.createElement(at,{open:v,toggleOpen:function(){return C(!v)},content:c.a.createElement("p",null,"Confirm Delete?"),secondaryAction:function(){if(!(D.discountSchemes.length>0)){var e,n=(e=D.productId,function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.DELETE_PRODUCT_REQUEST,message:"Deleting product ..."}),t.prev=1,t.next=4,fetch(f.getApiUrl()+"products/"+e,{method:"DELETE",headers:f.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.DELETE_PRODUCT_RECEIVED,product:c,message:a.statusText,httpMessage:r.HTTP_DELETE_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}());t(n),C(!1)}},secondaryActionTitle:"Delete Product"}))}var yt,Ut=function e(){Object(p.a)(this,e),this.userName="",this.passwordHash=""};!function(e){e.PRODUCER="PRODUCER",e.CONSUMER="CONSUMER"}(yt||(yt={}));var It,xt=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(p.a)(this,e),this.jwt="",this.isAuthenticated=!1,this.id="",this.userName="",this.email="",this.claims=[],this.userName=t};function jt(){var e;document.title="Login";var t=Object(u.c)(),n=Object(x.f)(),i=Object(a.useState)(!1),o=Object(s.a)(i,2),l=o[0],p=o[1],h=new xt;h.isAuthenticated="UNTOUCHED";var v=null!==(e=Object(u.d)((function(e){return e.authReducer.authVM})))&&void 0!==e?e:h;Object(a.useEffect)((function(){"UNTOUCHED"!==v.isAuthenticated&&(v.isAuthenticated?n.push(""):p(!0))}),[v.isAuthenticated,n]);var S=Object(Le.b)(),C=S.errors,O=S.handleSubmit,T=S.control;return c.a.createElement(xe.a,null,c.a.createElement("form",{onSubmit:O((function(e){var n=new Ut;n.userName=e.userName,n.passwordHash=e.passwordHash;var a=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.LOGIN_REQUEST,message:"Attempting login..."}),t.prev=1,t.next=4,fetch(f.getApiUrl()+"auth/signIn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:if(c=t.sent,console.log("IAuthVM",c),!1!==c.isAuthenticated){t.next=18;break}return c.userName="ACCOUNT",n({type:r.LOGIN_FAILED,authVM:c,message:a.statusText,httpMessage:r.HTTP_UPDATE_SUCCESS}),t.abrupt("return");case 18:n({type:r.LOGIN_SUCCESS,authVM:c,message:a.statusText,httpMessage:r.HTTP_UPDATE_SUCCESS}),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 24:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(e){return t.apply(this,arguments)}}()}(n);t(a)}))},c.a.createElement(Pt,{component:c.a.createElement(Ot,{isFullWidth:!0,control:T,errors:C,name:It.userName,label:"UserName",variant:"outlined",rules:{required:!0},errorMessage:"Name is required"})}),c.a.createElement(Pt,{component:c.a.createElement(Ot,{isFullWidth:!0,control:T,errors:C,name:It.passwordHash,label:"Password",variant:"outlined",type:"password",rules:{required:!0},errorMessage:"Password is required"})}),c.a.createElement(g.a,{variant:"contained",color:"primary",type:"submit"},"Submit")),c.a.createElement(Ue,{open:l,setOpen:p,message:"Authentication failed",severity:"error"}))}function Pt(e){var t=e.component;e.display;return c.a.createElement("div",null,c.a.createElement(S.a,{item:!0,xs:12},t),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement("br",null)))}function At(){return c.a.createElement(xe.a,null,c.a.createElement("h2",null,"An error occured"))}function Nt(e){var t=e.component,n=e.path,r=e.requiredClaims,i=void 0===r?[]:r,o=new xt;localStorage.getItem("authVM")&&(o=JSON.parse(localStorage.getItem("authVM")));var u=!0===o.isAuthenticated,l=o.claims,d=Object(x.f)();u||d.push("/login");var E=Object(a.useState)(!1),m=Object(s.a)(E,2),p=m[0],h=m[1],f=i.every((function(e){return l.includes(e)})),v=c.a.createElement(a.Fragment,null,c.a.createElement("span",null,"Not Authorized "),c.a.createElement(k.b,{to:"/login",style:{color:"white"}},c.a.createElement("b",null,"Click here to login")));return Object(a.useEffect)((function(){f||h(!0)}),[f]),c.a.createElement(a.Fragment,null,f?c.a.createElement(x.a,{path:n,component:t}):c.a.createElement(At,null),c.a.createElement(Ue,{open:p,setOpen:h,message:v,severity:"warning",autoHideDuration:1e4}))}!function(e){e.userName="userName",e.passwordHash="passwordHash"}(It||(It={}));n(508);var wt,Mt=n(565),kt=n(568),Ht=n(563),Lt=n(564);n(509);function Gt(){var e,t,n,i,o=Qt(),s=Object(x.f)(),l=Object(u.c)(),d=null!==(e=Object(u.d)((function(e){return e.authReducer.authVM})))&&void 0!==e?e:new xt("ACCOUNT"),E=null!==(t=Object(u.d)((function(e){return e.authReducer.message})))&&void 0!==t?t:"";localStorage.getItem("authVM")&&(d=JSON.parse(localStorage.getItem("authVM")));return Object(a.useEffect)((function(){E===r.LOGOUT_SUCCESS&&s.push("/login")}),[E,s]),c.a.createElement("div",null,c.a.createElement(Mt.a,{expand:"lg",variant:"dark",className:o.blueBg},c.a.createElement(Mt.a.Brand,null,c.a.createElement(k.b,{to:"/",className:o.navLink},"BulkApi")),c.a.createElement(Mt.a.Toggle,{"aria-controls":"basic-navbar-nav"}),c.a.createElement(Mt.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(kt.a,{className:"mr-auto"},(null===(n=d.claims)||void 0===n?void 0:n.includes(wt.CONSUMER))&&c.a.createElement(a.Fragment,null,c.a.createElement(g.a,{color:"inherit"},c.a.createElement(k.b,{to:"/",className:o.navLink},"Products")),c.a.createElement(g.a,{color:"inherit"},c.a.createElement(k.b,{to:"/cart",className:o.navLink},"Cart")),c.a.createElement(g.a,{color:"inherit"},c.a.createElement(k.b,{to:"/orders",className:o.navLink},"Orders"))),(null===(i=d.claims)||void 0===i?void 0:i.includes(wt.PRODUCER))&&c.a.createElement(a.Fragment,null,c.a.createElement(g.a,{color:"inherit"},c.a.createElement(k.b,{to:"/producer/discountSchemes",className:o.navLink},"Schemes")),c.a.createElement(g.a,{color:"inherit"},c.a.createElement(k.b,{to:"/producer/products",className:o.navLink},"Products")))),c.a.createElement(Ht.a,{alignRight:!0,title:d.userName},d.isAuthenticated?c.a.createElement(Lt.a.Item,null,c.a.createElement(kt.a.Link,{as:k.b,onClick:function(){var e=function(){var e=new xt("ACCOUNT");return e.isAuthenticated="UNTOUCHED",{type:r.LOGOUT,message:"Logout ...",authVM:e}}();l(e)},to:"/login",style:{color:"black"}},"LOGOUT")):c.a.createElement(Lt.a.Item,null,c.a.createElement(kt.a.Link,{as:k.b,to:"/login",style:{color:"black"}},"LOGIN"))))),c.a.createElement("br",null))}!function(e){e.PRODUCER="PRODUCER",e.CONSUMER="CONSUMER"}(wt||(wt={}));var Qt=Object(b.a)((function(e){return Object(y.a)({navLink:{color:"white",textDecoration:"inherit"},blueBg:{backgroundColor:"#3f51b5",textDecoration:"inherit"},dropDownLink:{color:"black",textDecoration:"inherit"}})})),Bt=function e(){Object(p.a)(this,e),this.bidId=0,this.isInCart=!1,this.quantity=0,this.bidSuccessDate=null,this.collectionAddress="",this.discountSchemeId=0,this.discountScheme=null,this.customerId=0,this.currentTotalBids=0,this.addressBidCountDict={}};function Vt(e){var t,n,i,o,l,p,h=e.discountSchemeId,v=e.MODE,C=e.bidIdToUpdate,T=void 0===C?0:C,D=Object(u.c)(),_=Object(a.useState)(1),b=Object(s.a)(_,2),y=b[0],U=b[1],I=Object(a.useState)(!1),x=Object(s.a)(I,2),j=x[0],P=x[1];Object(a.useEffect)((function(){var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.GET_DISCOUNTSCHEME_REQUEST,message:"GET DiscountScheme with id: "+e}),t.prev=1,t.next=4,fetch(f.getApiUrl()+"discountSchemes/"+e,{headers:f.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.GET_DISCOUNTSCHEME_RECEIVED,discountScheme:c,httpMessage:r.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(h);D(e)}),[h,D]);var A=null!==(t=Object(u.d)((function(e){return e.discountSchemeReducer.discountScheme})))&&void 0!==t?t:new Ke,N=A.addressBidCountDict,w=[];for(var M in N){var k=new Ne(M,M);w.push(k)}var H=Object(a.useState)(""),G=Object(s.a)(H,2),Q=G[0],B=G[1],V=null===N||void 0===N?void 0:N.address,q=V?A.deliveryCharge/(V+1):A.deliveryCharge,F="";A.expiryDate&&(F=new Date(A.expiryDate.toString()).toDateString());var W=A.bids.filter((function(e){return!e.isInCart})).reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.quantity)}),0),$={"Expiry Date":F},z={Description:null===(n=A.product)||void 0===n?void 0:n.description},J={"Discounted Price":"$"+A.discountedPrice},K={"Original Price":null!==(i="$"+(null===(o=A.product)||void 0===o?void 0:o.originalPrice))&&void 0!==i?i:"$"},X={"Remaining Bids Needed":A.minOrderQnty-W},Y={"Min Collective Quantity":A.minOrderQnty,"Current Total Bids":W},Z={"Delivery Charge":"$"+A.deliveryCharge,"Current bids at collection point":V},ee={"Current Average Delivery charge":"approx $"+q};return c.a.createElement(xe.a,{maxWidth:"sm"},c.a.createElement(R.a,{color:"primary",variant:"h5",align:"left"},null!==(l=null===(p=A.product)||void 0===p?void 0:p.name)&&void 0!==l?l:""),c.a.createElement(O.a,{component:"img",image:rt.a,title:"https://acowebs.com/impact-ecommerce-society/"}),c.a.createElement("br",null),c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(Ve,{textDict:z}),c.a.createElement("hr",null)),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(Ve,{textDict:$,color:"textPrimary"}),c.a.createElement("hr",null)),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement(Ve,{textDict:J,color:"textPrimary"}),c.a.createElement("hr",null)),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement(Ve,{textDict:K}),c.a.createElement("hr",null)),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement(Ve,{textDict:X,color:"textPrimary"})),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement(Ve,{textDict:Y}))),c.a.createElement("hr",null),c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(Qe,{title:"Delivery",state:Q,selectListItems:w,handleChange:function(e){var t=e.target.value;B(t)}})),c.a.createElement(S.a,{item:!0,xs:8},c.a.createElement(Ve,{textDict:Z}),c.a.createElement(Ve,{textDict:ee,color:"textPrimary"}))),c.a.createElement("hr",null),c.a.createElement(be,{quantity:y,setQuantity:U,align:"alignCenter"}),c.a.createElement(_e.a,{size:"medium"},c.a.createElement(g.a,{onClick:function(){var e=new Bt;e.customerId=1,e.collectionAddress=Q,e.quantity=y;var t=null;"CREATE"===v?(e.discountSchemeId=A.discountSchemeId,t=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.ADD_BID_TO_CART_REQUEST,message:"Making post request to add bid to cart ..."}),t.prev=1,t.next=4,fetch(f.getApiUrl()+"bids/addcart",{method:"POST",headers:f.getAuthHeader(),body:JSON.stringify(e)});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.ADD_BID_TO_CART_RECEIVED,bid:c,message:a.statusText,httpMessage:r.HTTP_CREATE_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(e)):"UPDATE"===v&&(e.bidId=T,t=L(e)),D(t),P(!0)},color:"primary",variant:"contained",disabled:!Q||y<1},"Add To Cart")),c.a.createElement(Ue,{open:j,setOpen:P,message:"Bid successfully created",severity:"success"}))}function qt(){var e=Object(x.g)(),t=parseInt(e.discountSchemeId);return c.a.createElement(Vt,{discountSchemeId:t,MODE:"CREATE"})}var Ft=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(k.a,null,c.a.createElement(Gt,null),c.a.createElement(x.c,null,c.a.createElement(x.a,{exact:!0,path:"/",component:w}),c.a.createElement(x.a,{path:"/login",component:jt}),c.a.createElement(Nt,{path:"/discountScheme/:discountSchemeId",component:qt,requiredClaims:[yt.CONSUMER]}),c.a.createElement(Nt,{path:"/cart",component:We,requiredClaims:[yt.CONSUMER]}),c.a.createElement(Nt,{path:"/orders",component:ze,requiredClaims:[yt.CONSUMER]}),c.a.createElement(Nt,{path:"/producer/products",component:bt,requiredClaims:[yt.PRODUCER]}),c.a.createElement(Nt,{path:"/producer/product/:productId",component:_t,requiredClaims:[yt.PRODUCER]}),c.a.createElement(Nt,{path:"/producer/discountSchemes/create",component:Tt,requiredClaims:[yt.PRODUCER]}),c.a.createElement(Nt,{path:"/producer/discountSchemes",component:st,requiredClaims:[yt.PRODUCER]}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Wt=n(75),$t=n(422),zt={type:"",discountSchemes:null};var Jt={type:"",bid:void 0,bids:void 0,message:"Initial Message",httpMessage:"Initial Response Message"};var Kt={type:"",product:void 0,products:void 0,message:"",httpMessage:""};var Xt={type:"",error:null};var Yt={type:"",identityUser:void 0,message:"Initial Message",httpMessage:"Initial Response Message",authVM:void 0};var Zt=Object(Wt.c)({discountSchemeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0,n=Object(qe.cloneDeep)(e);switch(n.type=t.type,n.message="".concat(t.message," ").concat(new Date),n.httpMessage="".concat(t.httpMessage," ").concat(new Date),t.type){case r.GET_DISCOUNTSCHEMES_REQUEST:return n;case r.GET_DISCOUNTSCHEMES_RECEIVED:var a=t.discountSchemes;return n.discountSchemes=a,n;case r.GET_DISCOUNTSCHEME_REQUEST:return n;case r.GET_DISCOUNTSCHEME_RECEIVED:var c=t.discountScheme;return n.discountScheme=c,n;case r.GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST:return n;case r.GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED:return n.discountSchemes=t.discountSchemes,n;case r.CREATE_DISCOUNTSCHEME_REQUEST:return n;case r.CREATE_DISCOUNTSCHEME_RECEIVED:return n.discountScheme=t.discountScheme,n;case r.DELETE_DISCOUNTSCHEME_REQUEST:return n;case r.DELETE_DISCOUNTSCHEME_RECEIVED:return n.discountScheme=t.discountScheme,n;default:return e}},bidReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0,n=Object(qe.cloneDeep)(e);switch(n.type=t.type,n.message="".concat(t.message," ").concat(new Date),n.httpMessage="".concat(t.httpMessage," + ").concat(new Date),t.type){case r.ADD_BID_TO_CART_REQUEST:return n;case r.ADD_BID_TO_CART_RECEIVED:return n.bid=t.bid,n;case r.GET_BIDSOFCUSTOMER_INCART_REQUEST:return n;case r.GET_BIDSOFCUSTOMER_INCART_RECEIVED:return n.bids=t.bids,n;case r.UPDATE_BID_IN_CART_REQUEST:case r.UPDATE_BID_IN_CART_RECEIVED:case r.DELETE_BID_IN_CART_REQUEST:case r.DELETE_BID_IN_CART_RECEIVED:case r.ORDER_BIDS_IN_CART_REQUEST:case r.ORDER_BIDS_IN_CART_RECEIVED:case r.GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST:return n;case r.GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED:return n.bids=t.bids,n;default:return e}},productReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0,n=Object(qe.cloneDeep)(e);switch(n.type=t.type,n.message="".concat(t.message," ").concat(new Date),n.httpMessage="".concat(t.httpMessage," + ").concat(new Date),t.type){case r.GET_PRODUCTS_REQUEST:return n;case r.GET_PRODUCTS_RECEIVED:return n.products=t.products,n;case r.CREATE_PRODUCT_REQUEST:return n;case r.CREATE_PRODUCT_RECEIVED:return n.product=t.product,n;case r.GET_PRODUCT_REQUEST:return n;case r.GET_PRODUCT_RECEIVED:return n.product=t.product,n;case r.UPDATE_PRODUCT_RECEIVED:return n;case r.UPDATE_PRODUCT_REQUEST:return n.product=t.product,n;case r.DELETE_PRODUCT_REQUEST:return n;case r.DELETE_PRODUCT_RECEIVED:return n.product=t.product,n;default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0,n=Object(qe.cloneDeep)(e);switch(n.authVM=Object(qe.cloneDeep)(t.authVM),n.type=t.type,n.message="".concat(t.message," ").concat(new Date),n.httpMessage="".concat(t.httpMessage," + ").concat(new Date),t.type){case r.LOGIN_REQUEST:return n;case r.LOGIN_SUCCESS:return localStorage.setItem("authVM",JSON.stringify(t.authVM)),n;case r.LOGIN_FAILED:return n;case r.LOGOUT:return localStorage.removeItem("authVM"),n.message=r.LOGOUT_SUCCESS,n;default:return e}},errorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.error;return n===r.CLEAR_ERROR?Xt:a?(console.log("error received in errorReducer:",a),{type:n,error:t.error}):e}}),en=Object(Wt.e)(Zt,Object(Wt.a)($t.a));o.a.render(c.a.createElement(u.a,{store:en},c.a.createElement(c.a.StrictMode,null,c.a.createElement(Ft,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[435,1,2]]]);
//# sourceMappingURL=main.ed85c956.chunk.js.map