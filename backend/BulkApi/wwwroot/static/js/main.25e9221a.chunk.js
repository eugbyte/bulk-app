(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{249:function(e,t,n){e.exports=n.p+"static/media/e_commerce.3acf207a.png"},384:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=384},429:function(e,t,n){e.exports=n(507)},434:function(e,t,n){},435:function(e,t,n){},501:function(e,t,n){},503:function(e,t,n){},507:function(e,t,n){"use strict";n.r(t);var r,a=n(0),c=n.n(a),i=n(20),o=n.n(i),s=(n(434),n(435),n(21)),l=n(19),u=n(15),d=n.n(u),E=n(28);function m(e,t){return{type:e,error:t}}!function(e){e.GET_DISCOUNTSCHEMES_REQUEST="GET_DISCOUNTSCHEMES_REQUEST",e.GET_DISCOUNTSCHEMES_RECEIVED="GET_DISCOUNTSCHEMES_RECEIVED",e.GET_DISCOUNTSCHEME_REQUEST="GET_DISCOUNTSCHEME_REQUEST",e.GET_DISCOUNTSCHEME_RECEIVED="GET_DISCOUNTSCHEME_RECEIVED",e.GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST="GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST",e.GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED="GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED",e.CREATE_DISCOUNTSCHEME_REQUEST="CREATE_DISCOUNTSCHEME_REQUEST",e.CREATE_DISCOUNTSCHEME_RECEIVED="CREATE_DISCOUNTSCHEME_RECEIVED",e.DELETE_DISCOUNTSCHEME_REQUEST="DELETE_DISCOUNTSCHEME_REQUEST",e.DELETE_DISCOUNTSCHEME_RECEIVED="DELETE_DISCOUNTSCHEME_RECEIVED",e.GET_BIDSOFCUSTOMER_INCART_REQUEST="GET_BIDSOFCUSTOMER_INCART_REQUEST",e.GET_BIDSOFCUSTOMER_INCART_RECEIVED="GET_BIDSOFCUSTOMER_INCART_RECEIVED",e.ADD_BID_TO_CART_REQUEST="ADD_BID_TO_CART_REQUEST",e.ADD_BID_TO_CART_RECEIVED="ADD_BID_TO_CART_RECEIVED",e.UPDATE_BID_IN_CART_REQUEST="UPDATE_BID_IN_CART_REQUEST",e.UPDATE_BID_IN_CART_RECEIVED="UPDATE_BID_IN_CART_RECEIVED",e.DELETE_BID_IN_CART_REQUEST="DELETE_BID_IN_CART_REQUEST",e.DELETE_BID_IN_CART_RECEIVED="DELETE_BID_IN_CART_RECEIVED",e.ERROR="ERROR",e.CLEAR_ERROR="CLEAR_ERROR",e.ORDER_BIDS_IN_CART_REQUEST="ORDER_BIDS_IN_CART_REQUEST",e.ORDER_BIDS_IN_CART_RECEIVED="ORDER_BIDS_IN_CART_RECEIVED",e.GET_PRODUCTS_REQUEST="GET_PRODUCTS_REQUEST",e.GET_PRODUCTS_RECEIVED="GET_PRODUCTS_RECEIVED",e.GET_PRODUCT_REQUEST="GET_PRODUCT_REQUEST",e.GET_PRODUCT_RECEIVED="GET_PRODUCT_RECEIVED",e.GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST="GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST",e.GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED="GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED",e.CREATE_PRODUCT_REQUEST="CREATE_PRODUCT_REQUEST",e.CREATE_PRODUCT_RECEIVED="CREATE_PRODUCT_RECEIVED",e.DELETE_PRODUCT_REQUEST="DELETE_PRODUCT_REQUEST",e.DELETE_PRODUCT_RECEIVED="DELETE_PRODUCT_RECEIVED",e.UPDATE_PRODUCT_REQUEST="UPDATE_PRODUCT_REQUEST",e.UPDATE_PRODUCT_RECEIVED="UPDATE_PRODUCT_RECEIVED",e.LOGIN_REQUEST="LOGIN_REQUEST",e.LOGIN_SUCCESS="LOGIN_SUCCESS",e.LOGIN_FAILED="LOGIN_FAILED",e.LOGOUT="LOGOUT",e.LOGOUT_SUCCESS="LOGOUT_SUCCESS",e.HTTP_UPDATE_SUCCESS="HTTP_UPDATE_SUCCESS",e.HTTP_READ_SUCCESS="HTTP_READ_SUCCESS",e.HTTP_CREATE_SUCCESS="HTTP_CREATE_SUCCESS",e.HTTP_DELETE_SUCCESS="HTTP_DELETE_SUCCESS",e.HTTP_UPDATE_ORDER_SUCCESS="HTTP_UPDATE_ORDER_SUCCESS"}(r||(r={}));var p=n(38),h=n(393),v=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,null,[{key:"getAuthHeader",value:function(){try{var e=JSON.parse(localStorage.getItem("authVM")).jwt,t=new Headers;return t.append("Authorization","Bearer ".concat(e)),t.append("Content-Type","application/json"),t}catch(n){console.log(n)}}},{key:"getJWT",value:function(){if(!localStorage.getItem("authVM"))return"";var e=JSON.parse(localStorage.getItem("authVM")).jwt;return"Bearer ".concat(e)}},{key:"getApiUrl",value:function(){return"http://localhost:44397/api/"}}]),e}();function f(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST,message:"GET DiscountScheme of producer id: "+e}),t.prev=1,t.next=4,fetch(v.getApiUrl()+"discountSchemes/producer/"+e,{headers:v.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED,discountSchemes:c,httpMessage:r.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}var S=n(542),C=n(535),g=n(538),T=n(537),O=n(539),D=n(540),_=n(126),R=n(73),b=n(80),I=n(160);function y(e){var t=e.title,n=e.paras,r=e.actionTitle,a=e.action,i=U();return c.a.createElement("div",null,c.a.createElement(C.a,{className:i.cardWidth},c.a.createElement(T.a,{onClick:a},c.a.createElement(g.a,{component:"img",height:"140",className:i.cardHeight,image:"e_commerce.png",title:"https://acowebs.com/impact-ecommerce-society/"})),c.a.createElement(O.a,null,c.a.createElement(R.a,{gutterBottom:!0,variant:"h5",component:"h2"},t),n),null!=a&&c.a.createElement(D.a,null,c.a.createElement(_.a,{size:"medium",color:"primary",onClick:a},r))))}var U=Object(b.a)((function(e){return Object(I.a)({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},cardWidth:{maxWidth:450},cardHeight:{height:140}})})),x=n(41),P=n(541),j=n(555);function A(e){var t=e.error,n=e.autoHideDuration,i=void 0===n?6e3:n,o=e.message,u=Object(l.c)(),d=Object(a.useState)(!1),E=Object(s.a)(d,2),p=E[0],h=E[1],v=function(){h(!1);var e=m(r.CLEAR_ERROR,t);u(e)};return Object(a.useEffect)((function(){t&&h(!0)}),[t]),c.a.createElement(P.a,{open:p,autoHideDuration:i,onClose:v},c.a.createElement(N,{severity:"error",onClose:v},o))}function N(e){return c.a.createElement(j.a,Object.assign({elevation:6,variant:"filled"},e))}function w(){var e,t,n=Object(l.c)(),i=Object(x.f)(),o=M(),u=null!==(e=Object(l.d)((function(e){return e.discountSchemeReducer.discountSchemes})))&&void 0!==e?e:[];console.log(u);var p=null!==(t=Object(l.d)((function(e){return e.errorReducer.error})))&&void 0!==t?t:null;Object(a.useEffect)((function(){document.title="Products";var e=function(){var e=Object(E.a)(d.a.mark((function e(t){var n,a;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("JWT",v.getJWT()),t({type:r.GET_DISCOUNTSCHEMES_REQUEST,message:"GET DiscountSchemes..."}),e.prev=2,e.next=5,fetch(v.getApiUrl()+"discountSchemes",{headers:v.getAuthHeader()});case 5:if((n=e.sent).ok){e.next=11;break}return e.next=9,n.json();case 9:throw e.sent;case 11:return e.next=13,n.json();case 13:a=e.sent,t({type:r.GET_DISCOUNTSCHEMES_RECEIVED,discountSchemes:a,httpMessage:r.HTTP_READ_SUCCESS}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),t(m(r.ERROR,e.t0));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}();n(e)}),[]);for(var h=[],f=function(e){var t,n,r=u[e],a="";r.expiryDate&&(a=new Date(r.expiryDate.toString()).toDateString());for(var o=null!==(t=null===(n=r.product)||void 0===n?void 0:n.name)&&void 0!==t?t:"",l=r.bids.filter((function(e){return!e.isInCart})).reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.quantity)}),0),d={Title:o,"Discounted Price":"$"+r.discountedPrice,"Remaining Bids Needed":r.minOrderQnty-l,"Expiry Date":a},E=[],m=0,p=Object.entries(d);m<p.length;m++){var v,f=Object(s.a)(p[m],2),C=f[0],g=f[1],T=c.a.createElement(R.a,{variant:"body2",color:"textSecondary",component:"p",align:"left",key:C},c.a.createElement("b",null,C,"\xa0"),g);if("Discounted Price"===C)T=c.a.createElement(R.a,{variant:"body2",color:"textSecondary",component:"p",align:"left",key:C},c.a.createElement("b",null,C,"\xa0")," $",r.discountedPrice," $",c.a.createElement("del",null,null===(v=r.product)||void 0===v?void 0:v.originalPrice));E.push(T)}var O=c.a.createElement(S.a,{item:!0,xs:12,sm:4,lg:3,key:e},c.a.createElement(y,{title:o,paras:E,actionTitle:"Add to Cart",action:function(){i.push("/discountScheme/"+r.discountSchemeId)}}));h.push(O)},C=0;C<u.length;C++)f(C);return c.a.createElement("div",null,u.length>0&&c.a.createElement(S.a,{className:o.fullWidth,container:!0,spacing:3},h),c.a.createElement(A,{error:p,message:"error fetching schemes"}))}var M=Object(b.a)((function(e){return Object(I.a)({typo:{fontVariant:"body2",color:"textSecondary",component:"p",align:"left"},fullWidth:{width:"100vw",margin:"auto",paddingLeft:"100px",paddingRight:"100px"}})})),k=n(37),H=n(40);function L(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("in thunk. bid to update",e.bidId),n({type:r.UPDATE_BID_IN_CART_REQUEST,messages:"Request to update bid in cart"}),t.prev=2,t.next=5,fetch(v.getApiUrl()+"bids/updatecart",{method:"PUT",headers:v.getAuthHeader(),body:JSON.stringify(e)});case 5:if((a=t.sent).ok){t.next=11;break}return t.next=9,a.json();case 9:throw t.sent;case 11:return t.next=13,a.json();case 13:c=t.sent,n({type:r.UPDATE_BID_IN_CART_RECEIVED,bid:c,message:a.statusText,httpMessage:r.HTTP_UPDATE_SUCCESS}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),n(m(r.ERROR,t.t0));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e){return t.apply(this,arguments)}}()}var G=n(295),Q=n.n(G),V=n(398),B=n.n(V),q=n(408),F=n.n(q),W=n(399),$=n.n(W),z=n(406),J=n.n(z),K=n(265),X=n.n(K),Y=n(307),Z=n.n(Y),ee=n(400),te=n.n(ee),ne=n(401),re=n.n(ne),ae=n(403),ce=n.n(ae),ie=n(404),oe=n.n(ie),se=n(405),le=n.n(se),ue=n(247),de=n.n(ue),Ee=n(402),me=n.n(Ee),pe=n(407),he=n.n(pe),ve=n(409),fe=n.n(ve),Se=n(248),Ce=n.n(Se);function ge(e){for(var t=e.title,n=e.data,r=e.columnNames,a=e.accessors,i=(e.handleChecked,e.idColumnAccessorName),o=void 0===i?"":i,s=e.pageSize,l=void 0===s?10:s,u=(e.actionIcon,e.enablePaging),d=void 0!==u&&u,E=e.enableSearch,m=void 0!==E&&E,p=(e.actionMessage,e.enableSelection),h=void 0!==p&&p,v=e.detailPanelFieldName,f=void 0===v?"":v,S=e.enabledDetailPanel,C=void 0!==S&&S,g=[],T=0;T<r.length;T++){var O=r[T],D=a[T],_={title:O,field:D,hidden:D===o};g.push(_)}var R=Te();return c.a.createElement("div",null,c.a.createElement(Q.a,{icons:Oe,title:t,columns:g,data:n,options:{selection:h,pageSize:l,search:m,paging:d,rowStyle:{height:"100px"}},detailPanel:[function(e){return{disabled:!C,icon:function(){return c.a.createElement(X.a,{className:C?R.display:R.displayNone})},render:function(){return function(e,t){return console.log(e),e[t]}(e,f)}}}]}))}var Te=Object(b.a)((function(e){return Object(I.a)({displayNone:{display:"none"},display:{display:"initial"}})})),Oe={Add:Object(a.forwardRef)((function(e,t){return c.a.createElement(B.a,Object.assign({},e,{ref:t}))})),Check:Object(a.forwardRef)((function(e,t){return c.a.createElement($.a,Object.assign({},e,{ref:t}))})),Clear:Object(a.forwardRef)((function(e,t){return c.a.createElement(Z.a,Object.assign({},e,{ref:t}))})),Delete:Object(a.forwardRef)((function(e,t){return c.a.createElement(te.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(a.forwardRef)((function(e,t){return c.a.createElement(X.a,Object.assign({},e,{ref:t}))})),Edit:Object(a.forwardRef)((function(e,t){return c.a.createElement(re.a,Object.assign({},e,{ref:t}))})),Export:Object(a.forwardRef)((function(e,t){return c.a.createElement(me.a,Object.assign({},e,{ref:t}))})),Filter:Object(a.forwardRef)((function(e,t){return c.a.createElement(ce.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(a.forwardRef)((function(e,t){return c.a.createElement(oe.a,Object.assign({},e,{ref:t}))})),LastPage:Object(a.forwardRef)((function(e,t){return c.a.createElement(le.a,Object.assign({},e,{ref:t}))})),NextPage:Object(a.forwardRef)((function(e,t){return c.a.createElement(X.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(a.forwardRef)((function(e,t){return c.a.createElement(J.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(a.forwardRef)((function(e,t){return c.a.createElement(Z.a,Object.assign({},e,{ref:t}))})),Search:Object(a.forwardRef)((function(e,t){return c.a.createElement(he.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(a.forwardRef)((function(e,t){return c.a.createElement(F.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(a.forwardRef)((function(e,t){return c.a.createElement(de.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(a.forwardRef)((function(e,t){return c.a.createElement(fe.a,Object.assign({},e,{ref:t}))})),AddShoppingCartIcon:Object(a.forwardRef)((function(e,t){return c.a.createElement(Ce.a,Object.assign({},e,{ref:t}))}))},De=n(548),_e=n(410),Re=n.n(_e);function be(e){var t=e.quantity,n=e.setQuantity,r=e.size,a=void 0===r?"medium":r,i=e.align,o=void 0===i?"alignLeft":i,s=Ie();return c.a.createElement("div",{className:s[o]},c.a.createElement(De.a,{color:"primary","aria-label":"outlined primary button group",size:a},c.a.createElement(_.a,{onClick:function(){n(t+1)}},c.a.createElement(Re.a,null)),c.a.createElement(_.a,null,t),c.a.createElement(_.a,{onClick:function(){t-1<1||n(t-1)}},c.a.createElement(de.a,null))))}var Ie=Object(b.a)((function(e){return Object(I.a)({alignLeft:{display:"flex",flexDirection:"column",alignItems:"left","& > *":{margin:e.spacing(1)}},alignCenter:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{margin:e.spacing(1)}},alignRight:{display:"flex",flexDirection:"column",alignItems:"right","& > *":{margin:e.spacing(1)}}})}));function ye(e){var t=e.open,n=e.setOpen,r=e.message,a=e.severity,i=e.cleanUp,o=e.autoHideDuration,s=void 0===o?6e3:o,l=function(e){n(!1),i&&i()};return c.a.createElement(P.a,{open:t,autoHideDuration:s,onClose:function(){return l()}},c.a.createElement(Ue,{onClose:function(){return l()},severity:a},r))}function Ue(e){return c.a.createElement(j.a,Object.assign({elevation:6,variant:"filled"},e))}var xe=n(549),Pe=n(387),je=n(158);function Ae(e){var t=e.bids,n=e.rowIds,r=e.handleOrder;console.log("in orderCheckOut",t);var a=t.filter((function(e){return n.includes(e.bidId)})),i=a.map((function(e){var t,n,r=e.addressBidCountDict[e.collectionAddress],a=null!==(t=null===e||void 0===e||null===(n=e.discountScheme)||void 0===n?void 0:n.deliveryCharge)&&void 0!==t?t:0;return r?a/r:a})).reduce((function(e,t){return e+t}),0),o=a.reduce((function(e,t){var n,r;return e+t.quantity*(null!==(n=null===(r=t.discountScheme)||void 0===r?void 0:r.discountedPrice)&&void 0!==n?n:0)}),0),s=a.reduce((function(e,t){var n;return null!==(n=e+t.quantity)&&void 0!==n?n:0}),0);return c.a.createElement(je.a,null,c.a.createElement(S.a,{container:!0,spacing:3},c.a.createElement(S.a,{item:!0,xs:3}),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement(R.a,{variant:"body1",align:"center",color:"textSecondary",paragraph:!0},c.a.createElement("b",null,"Total Quantity: "),s),c.a.createElement(R.a,{variant:"body1",align:"center",color:"textSecondary",paragraph:!0},c.a.createElement("b",null,"Total Price: "),"$",o),c.a.createElement(R.a,{variant:"body1",align:"center",color:"textSecondary",paragraph:!0},c.a.createElement("b",null,"Total Delivery Charge: "),"$",i),c.a.createElement(R.a,{variant:"body1",align:"center",color:"secondary",paragraph:!0},c.a.createElement("b",null,"Grand Total: "),"$",i+s)),c.a.createElement(S.a,{item:!0,xs:3,alignContent:"flex-end"},c.a.createElement(_.a,{color:"secondary",size:"large",variant:"contained",onClick:r,disabled:a.length<1},"Order Bids"))))}var Ne=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;Object(p.a)(this,e),this.disabled=!1,this.selected=!1,this.text="",this.value=void 0,this.text=t,this.value=n},we=n(297),Me=n(298),ke=n(303),He=n(364),Le=n(78),Ge=n(299);function Qe(e){var t=e.title,n=e.state,r=e.selectListItems,a=e.handleChange,i=e.isError,o=void 0!==i&&i,s=e.formHelperText,l=void 0===s?"":s,u=Ve();return c.a.createElement(we.a,{className:u.formControl,error:o},c.a.createElement(Me.a,{id:"demo-simple-select-label"},t),c.a.createElement(ke.a,{labelId:"demo-simple-select-label",autoWidth:!0,value:n,onChange:function(e){return a(e)}},c.a.createElement(He.a,{value:void 0,divider:!0},c.a.createElement("em",null,"None")),r.map((function(e,t){return c.a.createElement(He.a,{key:t,value:e.value},e.text)}))),o&&c.a.createElement(Ge.a,null,l))}var Ve=Object(b.a)((function(e){return Object(I.a)({formControl:{minWidth:150},selectEmpty:{marginTop:e.spacing(2)}})}));function Be(e){var t=e.textDict,n=e.color,r=void 0===n?"textSecondary":n;console.log(t);for(var a=[],i=0,o=Object.entries(t);i<o.length;i++){var l=Object(s.a)(o[i],2),u=l[0],d=l[1],E=c.a.createElement(R.a,{variant:"body2",color:r,component:"p",align:"left",key:u},c.a.createElement("b",null,u,"\xa0"),d);a.push(E)}return c.a.createElement(xe.a,null,a)}var qe=n(64),Fe=function e(){Object(p.a)(this,e),this.bidId=void 0,this.checkbox=void 0,this.name=void 0,this.discountedPrice=void 0,this.updateCartComponent=void 0,this.collectionAddress=void 0,this.deliveryCharge=void 0,this.deleteButton=void 0,this.detailPanel=void 0};function We(){var e,t,n=Object(x.f)(),i=Object(l.c)(),o=Object(a.useState)(!1),u=Object(s.a)(o,2),p=u[0],h=u[1],f=Object(a.useState)(""),C=Object(s.a)(f,2),g=C[0],T=C[1],O=function(e,t){h(e),T(t)},D=null!==(e=Object(l.d)((function(e){return e.bidReducer.bids})))&&void 0!==e?e:[],R=Object(a.useState)([]),b=Object(s.a)(R,2),I=b[0],y=b[1];Object(a.useEffect)((function(){y(Object(qe.cloneDeep)(D))}),[D.length]),console.log("bids received",D),Object(a.useEffect)((function(){document.title="Cart";var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.GET_BIDSOFCUSTOMER_INCART_REQUEST,messages:"Fetching bids in cart for customer "+e}),t.prev=1,t.next=4,fetch(v.getApiUrl()+"bids/cart/"+e,{headers:v.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.GET_BIDSOFCUSTOMER_INCART_RECEIVED,bids:c,message:a.statusText,httpMessage:r.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(1);i(e)}),[]);var U=Object(a.useState)([]),P=Object(s.a)(U,2),j=P[0],A=P[1],N=null!==(t=Object(l.d)((function(e){return e.bidReducer.httpMessage})))&&void 0!==t?t:"";Object(a.useEffect)((function(){if(N.includes(r.HTTP_UPDATE_SUCCESS)||N.includes(r.HTTP_DELETE_SUCCESS));N.includes(r.HTTP_UPDATE_ORDER_SUCCESS)&&(console.log(N),n.push("/orders"))}),[N]);for(var w=I.map((function(e){return function(e){var t,n,r,a,i,o,s,l=null===(t=e.discountScheme)||void 0===t?void 0:t.discountedPrice,u=null===(n=e.discountScheme)||void 0===n||null===(r=n.product)||void 0===r?void 0:r.originalPrice,d=new Fe;d.bidId=e.bidId,d.discountedPrice="$".concat(l," (Save $").concat(u-l,")"),d.name=null===(a=e.discountScheme)||void 0===a||null===(i=a.product)||void 0===i?void 0:i.name;var E=e.addressBidCountDict[e.collectionAddress],m=null!==(o=null===e||void 0===e||null===(s=e.discountScheme)||void 0===s?void 0:s.deliveryCharge)&&void 0!==o?o:0,p=E?m/(E+1):m;return d.deliveryCharge=c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement("span",null,"$".concat(p))),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement("span",{style:{borderBottom:"1px solid black",display:"block",fontSize:"12px"}},"$",m),c.a.createElement("span",{style:{fontSize:"12px"}},E," other bids here"))),d}(e)})),M=function(e){var t,n,a,o,s,l,u=I[e],p=u.quantity,h=function(t,n){var r=Object(qe.cloneDeep)(D),a=r[e];a.quantity=t,a.collectionAddress=n,y(r);var c=L(a);i(c),O(!0,"bid added to cart")},f="";(null===(t=u.discountScheme)||void 0===t?void 0:t.expiryDate)&&(f=new Date(u.discountScheme.expiryDate.toString()).toDateString());w[e].updateCartComponent=c.a.createElement(be,{quantity:p,setQuantity:function(e){h(e,u.collectionAddress)},size:"small"}),w[e].checkbox=c.a.createElement(Pe.a,{size:"small",onChange:function(){var e=u.bidId;if(j.includes(e)){var t=j.filter((function(t){return t!==e}));A(t)}else A([].concat(Object(H.a)(j),[e]))}}),w[e].deleteButton=c.a.createElement(_.a,{size:"small",variant:"contained",color:"primary",onClick:function(){var t=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.DELETE_BID_IN_CART_REQUEST,messages:"deleting bids in cart with bidId"+e}),t.prev=1,t.next=4,fetch(v.getApiUrl()+"bids/cart/"+e,{method:"DELETE",headers:v.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:n({type:r.DELETE_BID_IN_CART_RECEIVED,message:a.statusText,httpMessage:r.HTTP_DELETE_SUCCESS}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()}(u.bidId);i(t),O(!0,"item deleted");var n=Object(qe.cloneDeep)(I).filter((function(t,n){return n!=e}));console.log(I,n),y(n)}},"Delete");var C=u.addressBidCountDict,g=[];for(var T in C){var R=new Ne(T,T);R.selected=u.collectionAddress===T,g.push(R)}w[e].collectionAddress=c.a.createElement(Qe,{title:"Delivery",state:u.collectionAddress+"",selectListItems:g,handleChange:function(e){var t=e.target.value;h(u.quantity,t)}});var b={Description:null===(n=u.discountScheme)||void 0===n||null===(a=n.product)||void 0===a?void 0:a.description,"Bid Expiry Date":f},U={"Min Order Quantity":null===(o=u.discountScheme)||void 0===o?void 0:o.minOrderQnty,"Current total bids":u.currentTotalBids,"Remaining bids required":(null===(s=u.discountScheme)||void 0===s?void 0:s.minOrderQnty)-u.currentTotalBids},x={"Delivery Charge":"$"+(null===(l=u.discountScheme)||void 0===l?void 0:l.deliveryCharge)};w[e].detailPanel=c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(Be,{textDict:b})),c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(Be,{textDict:U})),c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(Be,{textDict:x})))},k=0;k<I.length;k++)M(k);var G=Object.keys(new Fe);G=G.filter((function(e){return"detailPanel"!==e}));return c.a.createElement(xe.a,{maxWidth:"xl"},c.a.createElement(Ae,{bids:I,rowIds:j,handleOrder:function(){var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.ORDER_BIDS_IN_CART_REQUEST,messages:"ordering bids in cart "+e.toString()}),t.prev=1,t.next=4,fetch(v.getApiUrl()+"bids/cart/order",{method:"PUT",headers:v.getAuthHeader(),body:JSON.stringify(e)});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:n({type:r.ORDER_BIDS_IN_CART_RECEIVED,message:a.statusText,httpMessage:r.HTTP_UPDATE_ORDER_SUCCESS}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()}(I.filter((function(e){return j.includes(e.bidId)})));i(e)}}),c.a.createElement("br",null),c.a.createElement(ge,{data:w,columnNames:["BidId","Check Box","Name","Price per Item","Quantity","Collection Address","Average Delivery Charge","Remove"],accessors:G,title:"Cart",idColumnAccessorName:"bidId",actionMessage:"Make Order",actionIcon:Ce.a,enabledDetailPanel:!0,detailPanelFieldName:"detailPanel"}),c.a.createElement(ye,{open:p,setOpen:h,message:g,severity:"success"}))}var $e=function e(){Object(p.a)(this,e),this.name=void 0,this.discountedPrice=void 0,this.quantity=void 0,this.deliveryCharge=void 0,this.collectionAddress=void 0,this.remainingBidsRequired=void 0,this.bidExpiryDate=void 0,this.bidStatus=void 0};function ze(){var e;document.title="Orders";var t=Object(l.c)(),n=null!==(e=Object(l.d)((function(e){return e.bidReducer.bids})))&&void 0!==e?e:[];Object(a.useEffect)((function(){var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST,messages:"getting  PendingOrSuccessfulBids of customer "+e}),t.prev=1,t.next=4,fetch(v.getApiUrl()+"bids/orders/1",{headers:v.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,console.log("in thunk",c),n({type:r.GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED,bids:c,message:a.statusText,httpMessage:r.HTTP_READ_SUCCESS}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}()}(1);t(e)}),[]);var i=Object.keys(new $e),o=n.map((function(e){return function(e){var t,n,r,a,c,i,o,s,l=null===(t=e.discountScheme)||void 0===t?void 0:t.discountedPrice,u=null===(n=e.discountScheme)||void 0===n||null===(r=n.product)||void 0===r?void 0:r.originalPrice,d=null===(a=e.discountScheme)||void 0===a?void 0:a.minOrderQnty,E=e.currentTotalBids;console.log("remainingBidsRequired",d,E,d-E,"bidId: "+e.bidId);var m=new $e;m.quantity=e.quantity+"",m.collectionAddress=e.collectionAddress,m.discountedPrice="$".concat(l," (Save $").concat(u-l,")"),m.deliveryCharge="$"+(null===(c=e.discountScheme)||void 0===c?void 0:c.deliveryCharge),m.name=null===(i=e.discountScheme)||void 0===i||null===(o=i.product)||void 0===o?void 0:o.name,m.remainingBidsRequired=d-E;var p=new Date(null===(s=e.discountScheme)||void 0===s?void 0:s.expiryDate);m.bidExpiryDate=p.toDateString(),null!=e.bidSuccessDate?m.bidStatus="SUCCESS":new Date>p?m.bidStatus="FAILED":m.bidStatus="PENDING";return m}(e)}));return c.a.createElement(xe.a,{maxWidth:"lg"},c.a.createElement(ge,{columnNames:["Name","Discounted Price Per Item","Quantity","Delivery Charge","Collection Address","Remaining Bids Required","Bid Expiry Date","Bid Status"],accessors:i,data:o,title:"Submitted Bids",enablePaging:!0,pageSize:5}))}var Je=n(162),Ke=function e(){Object(p.a)(this,e),this.discountSchemeId=0,this.minOrderQnty=0,this.discountedPrice=0,this.expiryDate=null,this.deliveryCharge=0,this.productId=0,this.product=null,this.bids=[],this.addressBidCountDict={}},Xe=function e(){Object(p.a)(this,e),this.productId=0,this.name="",this.category="",this.description="",this.originalPrice=0,this.producerId=0,this.discountSchemes=[]},Ye=n(521),Ze=n(524),et=n(523),tt=n(550),nt=n(249),rt=n.n(nt);function at(e){var t=e.open,n=e.toggleOpen,r=e.title,a=e.content,i=e.actionTitle,o=e.action,s=e.showPicture,l=void 0!==s&&s,u=e.secondaryActionTitle,d=e.secondaryAction;return c.a.createElement(Ye.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-title",maxWidth:"sm",fullWidth:!0},c.a.createElement(tt.a,{id:"form-dialog-title"},r),c.a.createElement(et.a,null,l&&c.a.createElement(g.a,{component:"img",image:rt.a,title:"https://acowebs.com/impact-ecommerce-society/"}),c.a.createElement("br",null),a),c.a.createElement(xe.a,null,c.a.createElement(S.a,{container:!0,spacing:0},c.a.createElement(S.a,{item:!0,xs:8}),c.a.createElement(S.a,{item:!0,xs:4},i&&c.a.createElement(Ze.a,null,c.a.createElement(_.a,{onClick:o,color:"primary",variant:"outlined"},i)))),c.a.createElement(S.a,{container:!0,spacing:0},c.a.createElement(S.a,{item:!0,xs:4},u&&c.a.createElement(Ze.a,null,c.a.createElement(_.a,{onClick:d,color:"secondary",variant:"outlined"},u))),c.a.createElement(S.a,{item:!0,xs:4}),c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(Ze.a,null,c.a.createElement(_.a,{onClick:n,color:"primary",variant:"outlined"},"Close"))))))}var ct=n(558),it=n(242),ot=function e(){Object(p.a)(this,e),this.name=void 0,this.discountedPrice=void 0,this.deliveryCharge="0",this.minOrderQnty=0,this.currentBids=0,this.bidExpiryDate="",this.bidStatus=void 0,this.delete=void 0};function st(){var e,t;document.title="Schemes";var n=Object(l.c)(),i=Object(x.f)(),o=null!==(e=Object(l.d)((function(e){return e.discountSchemeReducer.discountSchemes})))&&void 0!==e?e:[];Object(a.useEffect)((function(){var e=f(2);n(e)}),[]);var u=o.map((function(e){var t;return null!==(t=e.product)&&void 0!==t?t:new Xe}));u=Object(qe.uniqBy)(u,(function(e){return e.name}));var p=Object(a.useState)([]),h=Object(s.a)(p,2),C=h[0],g=h[1];Object(a.useEffect)((function(){console.log(o),g(o)}),[o.length]);var T=Object(a.useState)(),O=Object(s.a)(T,2),D=O[0],R=O[1],b=["SUCCESS","PENDING","FAILED"].map((function(e){return new Ne(e,e)})),I=Object(a.useState)(""),y=Object(s.a)(I,2),U=y[0],P=y[1];Object(a.useEffect)((function(){var e=Object(qe.cloneDeep)(o);e=e.filter((function(e){return!D||lt(e)===D})).filter((function(e){var t,n,r;return!U||(null===(t=e.product)||void 0===t||null===(n=t.name)||void 0===n||null===(r=n.toLowerCase())||void 0===r?void 0:r.includes(U.toLowerCase()))})),g(e)}),[D,U]);var j=Object(a.useState)(!1),A=Object(s.a)(j,2),N=A[0],w=A[1],M=Object(a.useState)(new Xe),k=Object(s.a)(M,2),H=k[0],L=k[1],G={Name:H.name,"Original Price":"$"+H.originalPrice,Category:H.category,Description:H.description},Q=c.a.createElement(Be,{textDict:G}),V=[],B=Object(a.useState)(!1),q=Object(s.a)(B,2),F=q[0],W=q[1],$=Object(a.useState)(new Ke),z=Object(s.a)($,2),J=z[0],K=z[1],X=null!==(t=Object(l.d)((function(e){return e.discountSchemeReducer.httpMessage})))&&void 0!==t?t:"";console.log("in ProductPage",X),Object(a.useEffect)((function(){if(X.includes(r.HTTP_DELETE_SUCCESS)){var e=f(2);n(e)}}),[X]);var Y,Z=Object(Je.a)(C);try{var ee=function(){var e,t=Y.value,n=function(e){var t,n=new ot;if(null==e)return n;var r=e.discountedPrice,a=null===(t=e.product)||void 0===t?void 0:t.originalPrice;n.discountedPrice=c.a.createElement("span",null,"$",r," ",c.a.createElement("del",null,"$",a));var i=new Date(e.expiryDate);return n.bidExpiryDate=i.toDateString(),n.deliveryCharge="$"+e.deliveryCharge,n.currentBids=e.bids.filter((function(e){return!e.isInCart})).reduce((function(e,t){return e+t.quantity}),0),n.minOrderQnty=e.minOrderQnty,n.bidStatus=lt(e),n}(t),r=t.bids.length>0,a=r?"Cannot delete scheme as it has dependent bids":"";n.name=c.a.createElement(_.a,{onClick:function(){var e,n=null!==(e=C.map((function(e){return e.product})).find((function(e){return(null===e||void 0===e?void 0:e.productId)===t.productId})))&&void 0!==e?e:new Xe;L(n),w(!N)},size:"small",variant:"outlined"},null===(e=t.product)||void 0===e?void 0:e.name),n.delete=c.a.createElement("div",{className:"tooltip__div-visible"},c.a.createElement(_.a,{size:"small",variant:"outlined",color:"secondary",disabled:r,onClick:function(){K(t),W(!0)}},"Delete",c.a.createElement("span",{className:"tooltiptext"},a))),V.push(n)};for(Z.s();!(Y=Z.n()).done;)ee()}catch(ne){Z.e(ne)}finally{Z.f()}var te=Object.keys(new ot);return c.a.createElement(xe.a,{maxWidth:"lg"},c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:2},c.a.createElement(Qe,{title:"Status",state:D,selectListItems:b,handleChange:function(e){var t=e.target.value;R(t)}})),c.a.createElement(S.a,{item:!0,xs:3},c.a.createElement(ct.a,{id:"combo-box-demo",options:u,getOptionLabel:function(e){var t;return null!==(t=e.name)&&void 0!==t?t:""},style:{width:300},onInputChange:function(e,t){return n=t,console.log(n),void P(n);var n},renderInput:function(e){return c.a.createElement(it.a,Object.assign({},e,{label:"Products",variant:"outlined"}))}})),c.a.createElement(S.a,{item:!0,xs:5}),c.a.createElement(S.a,{item:!0,xs:2},c.a.createElement(_.a,{onClick:function(){return i.push("/producer/discountSchemes/create")},variant:"contained",color:"primary"},"Create Scheme"))),c.a.createElement("br",null),c.a.createElement(ge,{columnNames:["Name","Discounted Price","Delivery Charge","Min Order Qnty","Current Bids","Expiry Date","Bid Status","Delete"],accessors:te,data:V,title:"Discount Schemes",enablePaging:!0,pageSize:5}),c.a.createElement(at,{open:N,toggleOpen:function(){return w(!N)},content:Q,showPicture:!0}),c.a.createElement(at,{open:F,toggleOpen:function(){return W(!F)},content:c.a.createElement("p",null,"Confirm Delete?"),secondaryAction:function(){if(!(J.bids.length>0)){console.log("discountSchemeId",J.discountSchemeId);var e,t=(e=J.discountSchemeId,function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.DELETE_DISCOUNTSCHEME_REQUEST,message:"Deleting Discount Scheme"}),t.prev=1,t.next=4,fetch(v.getApiUrl()+"discountSchemes/"+e,{method:"DELETE",headers:v.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.DELETE_DISCOUNTSCHEME_RECEIVED,discountScheme:c,httpMessage:r.HTTP_DELETE_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}());n(t),W(!1)}},secondaryActionTitle:"Delete Product"}))}function lt(e){var t=new Date(e.expiryDate),n=e.bids.some((function(e){return null!=e.bidSuccessDate})),r=t<new Date;return n?"SUCCESS":!n&&r?"FAILED":"PENDING"}function ut(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.GET_PRODUCTS_REQUEST,message:"Getting products of producer ..."}),t.prev=1,t.next=4,fetch(v.getApiUrl()+"products/producer/"+e,{headers:v.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.GET_PRODUCTS_RECEIVED,products:c,message:a.statusText,httpMessage:r.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}var dt=n(228),Et=n(31),mt=n(291),pt=n(411);function ht(e){var t=e.control,n=e.errors,r=e.label,a=e.name,i=e.defaultValue,o=void 0===i?"":i,s=e.errorMessage,l=void 0===s?"":s,u=e.rules,d=void 0===u?{}:u,E=null!=n[a],m=E?l:"";return c.a.createElement(Le.a,{name:a,defaultValue:o,control:t,rules:d,render:function(e){return c.a.createElement(vt,Object.assign({},e,{label:r,error:E,helperText:m}))}})}function vt(e){var t=e.label,n=e.onChange,r=e.value,a=e.error,i=void 0!==a&&a,o=e.helperText,s=void 0===o?"":o;return r||(r=new Date),c.a.createElement(Et.a,{utils:dt.default},c.a.createElement(mt.b,{error:i,helperText:s,disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:Object(pt.v4)(),label:t,value:r,onChange:n,KeyboardButtonProps:{"aria-label":"change date"}}))}var ft,St,Ct=n(300);function gt(e){var t=e.label,n=e.name,r=e.defaultValue,a=void 0===r?"":r,i=e.isFullWidth,o=void 0!==i&&i,s=e.variant,l=void 0===s?"standard":s,u=e.type,d=void 0===u?"text":u,E=e.adornment,m=void 0===E?null:E,p=e.control,h=e.errors,v=e.errorMessage,f=void 0===v?"":v,S=e.rules,C=void 0===S?{}:S;console.log("errors",h);var g=null!=h[n],T=g?f:"";return c.a.createElement("div",null,c.a.createElement(Le.a,{name:n,defaultValue:a,control:p,rules:C,render:function(e){return c.a.createElement(it.a,Object.assign({},e,{label:t,error:g,helperText:T,fullWidth:o,variant:l,type:d,InputProps:{startAdornment:m?c.a.createElement(Ct.a,{position:"start"},m):null}}))}}))}function Tt(){var e,t,n;document.title="Create Discount Scheme";var i=Object(l.c)(),o=Object(x.f)(),s=null!==(e=Object(l.d)((function(e){return e.productReducer.products})))&&void 0!==e?e:[];s.map((function(e){return new Ne(e.name,e.productId)}));Object(a.useEffect)((function(){var e=ut(2);i(e)}),[]);var u=Object(Le.b)(),p=u.errors,h=u.handleSubmit,f=u.control,C=u.getValues,g=(0,u.watch)(ft.productId,0),T=null!==(t=s.find((function(e){return e.productId===g})))&&void 0!==t?t:new Xe,O={"Original Price":"$"+T.originalPrice,Description:T.description};console.log("watchProductId",g);var D=null!==(n=Object(l.d)((function(e){return e.discountSchemeReducer.httpMessage})))&&void 0!==n?n:"";Object(a.useEffect)((function(){D.includes(r.HTTP_CREATE_SUCCESS)&&o.push("/producer/discountSchemes")}),[D]);return c.a.createElement(xe.a,{maxWidth:"md"},c.a.createElement("form",{onSubmit:h((function(e){var t=C([ft.productId,ft.discountedPrice,ft.minOrderQnty,ft.deliveryCharge,ft.expiryDate]),n=t.productId,a=t.discountedPrice,c=t.minOrderQnty,o=t.deliveryCharge,s=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.CREATE_DISCOUNTSCHEME_REQUEST,message:"Creating Discount Scheme"}),t.prev=1,t.next=4,fetch(v.getApiUrl()+"discountSchemes",{method:"POST",headers:v.getAuthHeader(),body:JSON.stringify(e)});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.CREATE_DISCOUNTSCHEME_RECEIVED,discountScheme:c,httpMessage:r.HTTP_CREATE_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(function(e,t,n,r,a){var c=new Ke;return c.productId=e,c.minOrderQnty=t,c.discountedPrice=n,c.expiryDate=r,c.deliveryCharge=a,c}(n,c,a,t.expiryDate,o));i(s)}))},c.a.createElement(S.a,{container:!0,justify:"flex-start"},c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(Le.a,{control:f,name:ft.productId,rules:{required:!0},render:function(e){var t=e.onChange;return c.a.createElement(ct.a,{id:"combo-box-demo",options:s,getOptionLabel:function(e){var t;return null!==(t=e.name)&&void 0!==t?t:""},style:{width:300},onChange:function(e,n){return t(n.productId)},renderInput:function(e){return c.a.createElement(it.a,Object.assign({},e,{label:"Products",variant:"outlined"}))}})}}),p.productId&&c.a.createElement("p",{style:{fontSize:"14px",color:"red",textAlign:"left"}},"Product is required")),c.a.createElement(S.a,{item:!0,xs:3,alignItems:"flex-end"},c.a.createElement(_.a,{onClick:function(){return o.push("/producer/product/0")},variant:"outlined",size:"small",style:{bottom:"-30%"}},"Or create one")),c.a.createElement(Ot,null),g>0&&c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(Be,{textDict:O,color:"textSecondary"})),c.a.createElement(Ot,null),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(gt,{isFullWidth:!0,control:f,errors:p,name:ft.discountedPrice,label:"Discounted Price",errorMessage:"Discounted Price is required",rules:{required:!0,min:1},adornment:"$"})),c.a.createElement(Ot,null),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(gt,{isFullWidth:!0,control:f,errors:p,name:ft.minOrderQnty,label:"Minimum order quantity",errorMessage:"Minimum order quantity is required",rules:{required:!0,min:1}})),c.a.createElement(Ot,null),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(gt,{isFullWidth:!0,control:f,errors:p,name:ft.deliveryCharge,label:"Delivery Charge",errorMessage:"Delivery Charge is required",rules:{required:!0,min:1},adornment:"$"})),c.a.createElement(Ot,null),c.a.createElement(S.a,{item:!0,xs:2},c.a.createElement(ht,{label:"Expiry Date",name:ft.expiryDate,control:f,errors:p,rules:{required:!0},errorMessage:"Expiry Date is required"})),c.a.createElement(Ot,null),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(_.a,{variant:"contained",color:"primary",type:"submit"},"Submit")),c.a.createElement(Ot,null))))}function Ot(){return c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement("br",null))}function Dt(){var e,t;document.title="Product Form";var n=Object(l.c)(),i=(Object(x.f)(),Object(x.g)()),o=parseInt(i.productId),u=0===o?"CREATE":"UPDATE",p=null!==(e=Object(l.d)((function(e){return e.productReducer.product})))&&void 0!==e?e:new Xe;Object(a.useEffect)((function(){if("UPDATE"===u){var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.GET_PRODUCT_REQUEST,message:"Getting products of producer ..."}),t.prev=1,t.next=4,fetch(v.getApiUrl()+"products/"+e,{headers:v.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,console.log("In productThunk",c),n({type:r.GET_PRODUCT_RECEIVED,product:c,message:a.statusText,httpMessage:r.HTTP_READ_SUCCESS}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}()}(o);n(e)}}),[o]);var h=Object(Le.b)(),f=h.errors,S=h.handleSubmit,C=h.control,g=(h.getValues,h.reset),T=h.setValue;Object(a.useEffect)((function(){"UPDATE"===u&&(T(St.productId,p.productId),T(St.name,p.name),T(St.category,p.category),T(St.description,p.description),T(St.originalPrice,p.originalPrice))}),[JSON.stringify(p)]);var O=Object(a.useState)(!1),D=Object(s.a)(O,2),R=D[0],b=D[1],I=null!==(t=Object(l.d)((function(e){return e.productReducer.httpMessage})))&&void 0!==t?t:"";return Object(a.useEffect)((function(){(I.includes(r.HTTP_CREATE_SUCCESS)||I.includes(r.HTTP_UPDATE_SUCCESS))&&b(!0)}),[I]),c.a.createElement(xe.a,{maxWidth:"md"},c.a.createElement("form",{onSubmit:S((function(e){var t=e.productId,a=function(e,t,n,r,a){var c=new Xe;return c.productId=e>0?e:0,c.name=t,c.category=n,c.description=r,c.originalPrice=a,c.producerId=2,c}(t,e.name,e.category,e.description,e.originalPrice);if(console.log("submitting product",a),"CREATE"===u){var c=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.GET_PRODUCTS_REQUEST,message:"Creating product ..."}),t.prev=1,t.next=4,fetch(v.getApiUrl()+"products/",{method:"POST",headers:v.getAuthHeader(),body:JSON.stringify(e)});case 4:if((a=t.sent).ok){t.next=11;break}return t.next=8,a.json();case 8:throw c=t.sent,console.log("apiError in createProductAsync",c),c;case 11:return t.next=13,a.json();case 13:i=t.sent,n({type:r.GET_PRODUCTS_RECEIVED,product:i,message:a.statusText,httpMessage:r.HTTP_CREATE_SUCCESS}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}()}(a);n(c),g({})}else if("UPDATE"===u){a.producerId=p.producerId;var i=function(e,t){return function(){var n=Object(E.a)(d.a.mark((function n(a){var c,i;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return a({type:r.UPDATE_PRODUCT_REQUEST,message:"Updating product ..."}),n.prev=1,n.next=4,fetch(v.getApiUrl()+"products/"+e,{method:"PUT",headers:v.getAuthHeader(),body:JSON.stringify(t)});case 4:if((c=n.sent).ok){n.next=10;break}return n.next=8,c.json();case 8:throw n.sent;case 10:return n.next=12,c.json();case 12:i=n.sent,console.log("updatedProduct",i),a({type:r.GET_PRODUCTS_RECEIVED,product:i,message:c.statusText,httpMessage:r.HTTP_UPDATE_SUCCESS}),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(1),a(m(r.ERROR,n.t0));case 20:case"end":return n.stop()}}),n,null,[[1,17]])})));return function(e){return n.apply(this,arguments)}}()}(t,a);n(i)}}))},c.a.createElement(_t,{display:"none",component:c.a.createElement(gt,{isFullWidth:!0,control:C,errors:f,name:St.productId,label:"Product Id",rules:{required:!1}})}),c.a.createElement(_t,{component:c.a.createElement(gt,{isFullWidth:!0,control:C,errors:f,name:St.name,label:"Name",rules:{required:!0},errorMessage:"Name is required"})}),c.a.createElement(_t,{component:c.a.createElement(gt,{isFullWidth:!0,control:C,errors:f,name:St.originalPrice,label:"Original Price",rules:{required:!0,min:1},adornment:"$",errorMessage:"Original Price is required"})}),c.a.createElement(_t,{component:c.a.createElement(gt,{isFullWidth:!0,control:C,errors:f,name:St.category,label:"Category",rules:{required:!1}})}),c.a.createElement(_t,{component:c.a.createElement(gt,{isFullWidth:!0,control:C,errors:f,name:St.description,label:"Description",rules:{required:!1}})}),c.a.createElement(_.a,{variant:"contained",color:"primary",type:"submit"},"Submit")),c.a.createElement(ye,{open:R,setOpen:b,severity:"success",message:u+" is successful!"}))}function _t(e){var t=e.component,n=e.display,r=void 0===n?"initial":n;return c.a.createElement("div",null,c.a.createElement(S.a,{item:!0,xs:12,style:{display:r}},t),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement("br",null)))}!function(e){e.productId="productId",e.discountedPrice="discountedPrice",e.minOrderQnty="minOrderQnty",e.deliveryCharge="deliveryCharge",e.expiryDate="expiryDate"}(ft||(ft={})),function(e){e.productId="productId",e.name="name",e.category="category",e.description="description",e.originalPrice="originalPrice"}(St||(St={}));n(501);var Rt=function e(){Object(p.a)(this,e),this.name=void 0,this.originalPrice=void 0,this.category=void 0,this.description=void 0,this.update=void 0,this.delete=void 0};function bt(){var e;document.title="Products";var t=Object(l.c)(),n=Object(x.f)(),i=null!==(e=Object(l.d)((function(e){return e.productReducer.products})))&&void 0!==e?e:[];Object(a.useEffect)((function(){var e=ut(2);t(e)}),[]);var o=Object.keys(new Rt),u=[],p=Object(a.useState)(!1),h=Object(s.a)(p,2),f=h[0],C=h[1],g=Object(a.useState)(new Xe),T=Object(s.a)(g,2),O=T[0],D=T[1],R=Object(l.d)((function(e){return e.productReducer.httpMessage}));Object(a.useEffect)((function(){if(R.includes(r.HTTP_DELETE_SUCCESS)){console.log("in productsPage",R);var e=ut(2);t(e)}}),[R]);for(var b=function(e){var t=i[e],r=function(e){var t=new Rt;return t.name=e.name,t.originalPrice="$"+e.originalPrice,t.category=e.category,t.description=e.description,t}(t),a=t.discountSchemes.length>0,o=a?"Cannot delete product as it has dependent discount schemes":"";r.update=c.a.createElement(_.a,{size:"small",variant:"outlined",onClick:function(){return n.push("/producer/product/"+t.productId)}},"Update"),r.delete=c.a.createElement("div",{className:"tooltip__div-visible"},c.a.createElement(_.a,{color:"secondary",size:"small",variant:"outlined",disabled:a,onClick:function(){C(!0),D(t)}},"Delete",c.a.createElement("span",{className:"tooltiptext"},o))),u.push(r)},I=0;I<i.length;I++)b(I);return c.a.createElement(xe.a,null,c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:10}),c.a.createElement(S.a,{item:!0,xs:2},c.a.createElement(_.a,{variant:"contained",onClick:function(){return n.push("/producer/product/0")},color:"primary"},"Create Product"))),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement("br",null)),c.a.createElement(ge,{columnNames:["Name","Original Price","Category","Description","Update","Delete"],accessors:o,data:u,title:"Products",enablePaging:!0,pageSize:5}),c.a.createElement(at,{open:f,toggleOpen:function(){return C(!f)},content:c.a.createElement("p",null,"Confirm Delete?"),secondaryAction:function(){if(console.log("productId",O.productId),!(O.discountSchemes.length>0)){var e,n=(e=O.productId,function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.DELETE_PRODUCT_REQUEST,message:"Deleting product ..."}),t.prev=1,t.next=4,fetch(v.getApiUrl()+"products/"+e,{method:"DELETE",headers:v.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,console.log("deletedProduct",c),n({type:r.DELETE_PRODUCT_RECEIVED,product:c,message:a.statusText,httpMessage:r.HTTP_DELETE_SUCCESS}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}());t(n),C(!1)}},secondaryActionTitle:"Delete Product"}))}var It,yt=function e(){Object(p.a)(this,e),this.userName="",this.passwordHash=""};!function(e){e.PRODUCER="PRODUCER",e.CONSUMER="CONSUMER"}(It||(It={}));var Ut,xt=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(p.a)(this,e),this.jwt="",this.isAuthenticated=!1,this.id="",this.userName="",this.email="",this.claims=[],this.userName=t};function Pt(){var e;document.title="Login";var t=Object(l.c)(),n=Object(x.f)(),i=Object(a.useState)(!1),o=Object(s.a)(i,2),u=o[0],p=o[1],h=new xt;h.isAuthenticated="UNTOUCHED";var f=null!==(e=Object(l.d)((function(e){return e.authReducer.authVM})))&&void 0!==e?e:h;Object(a.useEffect)((function(){"UNTOUCHED"!==f.isAuthenticated&&(f.isAuthenticated?n.push(""):p(!0))}),[f.isAuthenticated]);var S=Object(Le.b)(),C=S.errors,g=S.handleSubmit,T=S.control;return c.a.createElement(xe.a,null,c.a.createElement("form",{onSubmit:g((function(e){console.log(e);var n=new yt;n.userName=e.userName,n.passwordHash=e.passwordHash;var a=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.LOGIN_REQUEST,message:"Attempting login..."}),t.prev=1,t.next=4,fetch(v.getApiUrl()+"auth/signIn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:if(c=t.sent,console.log("IAuthVM",c),!1!==c.isAuthenticated){t.next=18;break}return c.userName="ACCOUNT",n({type:r.LOGIN_FAILED,authVM:c,message:a.statusText,httpMessage:r.HTTP_UPDATE_SUCCESS}),t.abrupt("return");case 18:n({type:r.LOGIN_SUCCESS,authVM:c,message:a.statusText,httpMessage:r.HTTP_UPDATE_SUCCESS}),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 24:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(e){return t.apply(this,arguments)}}()}(n);t(a)}))},c.a.createElement(jt,{component:c.a.createElement(gt,{isFullWidth:!0,control:T,errors:C,name:Ut.userName,label:"UserName",variant:"outlined",rules:{required:!0},errorMessage:"Name is required"})}),c.a.createElement(jt,{component:c.a.createElement(gt,{isFullWidth:!0,control:T,errors:C,name:Ut.passwordHash,label:"Password",variant:"outlined",type:"password",rules:{required:!0},errorMessage:"Password is required"})}),c.a.createElement(_.a,{variant:"contained",color:"primary",type:"submit"},"Submit")),c.a.createElement(ye,{open:u,setOpen:p,message:"Authentication failed",severity:"error"}))}function jt(e){var t=e.component;e.display;return c.a.createElement("div",null,c.a.createElement(S.a,{item:!0,xs:12},t),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement("br",null)))}function At(){return c.a.createElement(xe.a,null,c.a.createElement("h2",null,"An error occured"))}function Nt(e){var t=e.component,n=e.path,r=e.requiredClaims,i=void 0===r?[]:r,o=new xt;localStorage.getItem("authVM")&&(o=JSON.parse(localStorage.getItem("authVM")));var l=!0===o.isAuthenticated,u=o.claims,d=Object(x.f)();l||(console.log("not authenticated"),d.push("/login"));var E=Object(a.useState)(!1),m=Object(s.a)(E,2),p=m[0],h=m[1],v=i.every((function(e){return u.includes(e)})),f=c.a.createElement(a.Fragment,null,c.a.createElement("span",null,"Not Authorized "),c.a.createElement(k.b,{to:"/login",style:{color:"white"}},c.a.createElement("b",null,"Click here to login")));return Object(a.useEffect)((function(){if(!v)return console.log("not authorized"),void h(!0)}),[v]),c.a.createElement(a.Fragment,null,v?c.a.createElement(x.a,{path:n,component:t}):c.a.createElement(At,null),c.a.createElement(ye,{open:p,setOpen:h,message:f,severity:"warning",autoHideDuration:1e4}))}!function(e){e.userName="userName",e.passwordHash="passwordHash"}(Ut||(Ut={}));n(502);var wt,Mt=n(554),kt=n(557),Ht=n(552),Lt=n(553);n(503);function Gt(){var e,t,n,i,o=Qt(),s=Object(x.f)(),u=Object(l.c)(),d=null!==(e=Object(l.d)((function(e){return e.authReducer.authVM})))&&void 0!==e?e:new xt("ACCOUNT"),E=null!==(t=Object(l.d)((function(e){return e.authReducer.message})))&&void 0!==t?t:"";localStorage.getItem("authVM")&&(d=JSON.parse(localStorage.getItem("authVM")));return Object(a.useEffect)((function(){E===r.LOGOUT_SUCCESS&&s.push("/login")}),[E]),c.a.createElement("div",null,c.a.createElement(Mt.a,{expand:"lg",variant:"dark",className:o.blueBg},c.a.createElement(Mt.a.Brand,null,c.a.createElement(k.b,{to:"/",className:o.navLink},"BulkApi")),c.a.createElement(Mt.a.Toggle,{"aria-controls":"basic-navbar-nav"}),c.a.createElement(Mt.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(kt.a,{className:"mr-auto"},(null===(n=d.claims)||void 0===n?void 0:n.includes(wt.CONSUMER))&&c.a.createElement(a.Fragment,null,c.a.createElement(_.a,{color:"inherit"},c.a.createElement(k.b,{to:"/",className:o.navLink},"Products")),c.a.createElement(_.a,{color:"inherit"},c.a.createElement(k.b,{to:"/cart",className:o.navLink},"Cart")),c.a.createElement(_.a,{color:"inherit"},c.a.createElement(k.b,{to:"/orders",className:o.navLink},"Orders"))),(null===(i=d.claims)||void 0===i?void 0:i.includes(wt.PRODUCER))&&c.a.createElement(a.Fragment,null,c.a.createElement(_.a,{color:"inherit"},c.a.createElement(k.b,{to:"/producer/discountSchemes",className:o.navLink},"Schemes")),c.a.createElement(_.a,{color:"inherit"},c.a.createElement(k.b,{to:"/producer/products",className:o.navLink},"Products")))),c.a.createElement(Ht.a,{alignRight:!0,title:d.userName},d.isAuthenticated?c.a.createElement(Lt.a.Item,null,c.a.createElement(kt.a.Link,{as:k.b,onClick:function(){var e=function(){var e=new xt("ACCOUNT");return e.isAuthenticated="UNTOUCHED",{type:r.LOGOUT,message:"Logout ...",authVM:e}}();u(e)},to:"/login",style:{color:"black"}},"LOGOUT")):c.a.createElement(Lt.a.Item,null,c.a.createElement(kt.a.Link,{as:k.b,to:"/login",style:{color:"black"}},"LOGIN"))))),c.a.createElement("br",null))}!function(e){e.PRODUCER="PRODUCER",e.CONSUMER="CONSUMER"}(wt||(wt={}));var Qt=Object(b.a)((function(e){return Object(I.a)({navLink:{color:"white",textDecoration:"inherit"},blueBg:{backgroundColor:"#3f51b5",textDecoration:"inherit"},dropDownLink:{color:"black",textDecoration:"inherit"}})})),Vt=function e(){Object(p.a)(this,e),this.bidId=0,this.isInCart=!1,this.quantity=0,this.bidSuccessDate=null,this.collectionAddress="",this.discountSchemeId=0,this.discountScheme=null,this.customerId=0,this.currentTotalBids=0,this.addressBidCountDict={}};function Bt(e){var t,n,i,o,u,p,h=e.discountSchemeId,f=e.MODE,C=e.bidIdToUpdate,T=void 0===C?0:C,O=Object(l.c)(),D=Object(a.useState)(1),b=Object(s.a)(D,2),I=b[0],y=b[1],U=Object(a.useState)(!1),x=Object(s.a)(U,2),P=x[0],j=x[1];Object(a.useEffect)((function(){var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.GET_DISCOUNTSCHEME_REQUEST,message:"GET DiscountScheme with id: "+e}),t.prev=1,t.next=4,fetch(v.getApiUrl()+"discountSchemes/"+e,{headers:v.getAuthHeader()});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.GET_DISCOUNTSCHEME_RECEIVED,discountScheme:c,httpMessage:r.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(h);O(e)}),[h]);var A=null!==(t=Object(l.d)((function(e){return e.discountSchemeReducer.discountScheme})))&&void 0!==t?t:new Ke;console.log("in DiscountSchemeDetailPage",A);var N=A.addressBidCountDict,w=[];for(var M in N){var k=new Ne(M,M);w.push(k)}var H=Object(a.useState)(""),G=Object(s.a)(H,2),Q=G[0],V=G[1],B=null===N||void 0===N?void 0:N.address,q=B?A.deliveryCharge/(B+1):A.deliveryCharge,F="";A.expiryDate&&(F=new Date(A.expiryDate.toString()).toDateString());var W=A.bids.filter((function(e){return!e.isInCart})).reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.quantity)}),0),$={"Expiry Date":F},z={Description:null===(n=A.product)||void 0===n?void 0:n.description},J={"Discounted Price":"$"+A.discountedPrice},K={"Original Price":null!==(i="$"+(null===(o=A.product)||void 0===o?void 0:o.originalPrice))&&void 0!==i?i:"$"},X={"Remaining Bids Needed":A.minOrderQnty-W},Y={"Min Collective Quantity":A.minOrderQnty,"Current Total Bids":W},Z={"Delivery Charge":"$"+A.deliveryCharge,"Current bids at collection point":B},ee={"Current Average Delivery charge":"approx $"+q};return c.a.createElement(xe.a,{maxWidth:"sm"},c.a.createElement(R.a,{color:"primary",variant:"h5",align:"left"},null!==(u=null===(p=A.product)||void 0===p?void 0:p.name)&&void 0!==u?u:""),c.a.createElement(g.a,{component:"img",image:rt.a,title:"https://acowebs.com/impact-ecommerce-society/"}),c.a.createElement("br",null),c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(Be,{textDict:z}),c.a.createElement("hr",null)),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(Be,{textDict:$,color:"textPrimary"}),c.a.createElement("hr",null)),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement(Be,{textDict:J,color:"textPrimary"}),c.a.createElement("hr",null)),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement(Be,{textDict:K}),c.a.createElement("hr",null)),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement(Be,{textDict:X,color:"textPrimary"})),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement(Be,{textDict:Y}))),c.a.createElement("hr",null),c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(Qe,{title:"Delivery",state:Q,selectListItems:w,handleChange:function(e){var t=e.target.value;console.log(t),V(t)}})),c.a.createElement(S.a,{item:!0,xs:8},c.a.createElement(Be,{textDict:Z}),c.a.createElement(Be,{textDict:ee,color:"textPrimary"}))),c.a.createElement("hr",null),c.a.createElement(be,{quantity:I,setQuantity:y,align:"alignCenter"}),c.a.createElement(De.a,{size:"medium"},c.a.createElement(_.a,{onClick:function(){var e=new Vt;e.customerId=1,e.collectionAddress=Q,e.quantity=I;var t=null;"CREATE"===f?(e.discountSchemeId=A.discountSchemeId,t=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var a,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:r.ADD_BID_TO_CART_REQUEST,message:"Making post request to add bid to cart ..."}),t.prev=1,t.next=4,fetch(v.getApiUrl()+"bids/addcart",{method:"POST",headers:v.getAuthHeader(),body:JSON.stringify(e)});case 4:if((a=t.sent).ok){t.next=10;break}return t.next=8,a.json();case 8:throw t.sent;case 10:return t.next=12,a.json();case 12:c=t.sent,n({type:r.ADD_BID_TO_CART_RECEIVED,bid:c,message:a.statusText,httpMessage:r.HTTP_CREATE_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(r.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(e)):"UPDATE"===f&&(e.bidId=T,t=L(e)),O(t),j(!0)},color:"primary",variant:"contained",disabled:!Q||I<1},"Add To Cart")),c.a.createElement(ye,{open:P,setOpen:j,message:"Bid successfully created",severity:"success"}))}function qt(){var e=Object(x.g)(),t=parseInt(e.discountSchemeId);return c.a.createElement(Bt,{discountSchemeId:t,MODE:"CREATE"})}var Ft=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(k.a,null,c.a.createElement(Gt,null),c.a.createElement(x.c,null,c.a.createElement(x.a,{exact:!0,path:"/",component:w}),c.a.createElement(x.a,{path:"/login",component:Pt}),c.a.createElement(Nt,{path:"/discountScheme/:discountSchemeId",component:qt,requiredClaims:[It.CONSUMER]}),c.a.createElement(Nt,{path:"/cart",component:We,requiredClaims:[It.CONSUMER]}),c.a.createElement(Nt,{path:"/orders",component:ze,requiredClaims:[It.CONSUMER]}),c.a.createElement(Nt,{path:"/producer/products",component:bt,requiredClaims:[It.PRODUCER]}),c.a.createElement(Nt,{path:"/producer/product/:productId",component:Dt,requiredClaims:[It.PRODUCER]}),c.a.createElement(Nt,{path:"/producer/discountSchemes/create",component:Tt,requiredClaims:[It.PRODUCER]}),c.a.createElement(Nt,{path:"/producer/discountSchemes",component:st,requiredClaims:[It.PRODUCER]}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Wt=n(79),$t=n(417),zt={type:"",discountSchemes:null};var Jt={type:"",bid:void 0,bids:void 0,message:"Initial Message",httpMessage:"Initial Response Message"};var Kt={type:"",product:void 0,products:void 0,message:"",httpMessage:""};var Xt={type:"",error:null};var Yt={type:"",identityUser:void 0,message:"Initial Message",httpMessage:"Initial Response Message",authVM:void 0};var Zt=Object(Wt.c)({discountSchemeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0,n=Object(qe.cloneDeep)(e);switch(n.type=t.type,n.message="".concat(t.message," ").concat(new Date),n.httpMessage="".concat(t.httpMessage," ").concat(new Date),console.log("in discountSchemeReducer",n.httpMessage),t.type){case r.GET_DISCOUNTSCHEMES_REQUEST:return console.log(t.message),n;case r.GET_DISCOUNTSCHEMES_RECEIVED:console.log("GET_DISCOUNTSCHEMES_RECEIVED");var a=t.discountSchemes;return n.discountSchemes=a,n;case r.GET_DISCOUNTSCHEME_REQUEST:return console.log(t.message),n;case r.GET_DISCOUNTSCHEME_RECEIVED:console.log("ACTIONS.GET_DISCOUNTSCHEME_RECEIVED");var c=t.discountScheme;return n.discountScheme=c,n;case r.GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST:return console.log(t.message),n;case r.GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED:return console.log(t.discountSchemes),n.discountSchemes=t.discountSchemes,n;case r.CREATE_DISCOUNTSCHEME_REQUEST:return console.log(t.message),n;case r.CREATE_DISCOUNTSCHEME_RECEIVED:return n.discountScheme=t.discountScheme,n;case r.DELETE_DISCOUNTSCHEME_REQUEST:return n;case r.DELETE_DISCOUNTSCHEME_RECEIVED:return n.discountScheme=t.discountScheme,n;default:return e}},bidReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0,n=Object(qe.cloneDeep)(e);switch(n.type=t.type,n.message="".concat(t.message," ").concat(new Date),n.httpMessage="".concat(t.httpMessage," + ").concat(new Date),t.type){case r.ADD_BID_TO_CART_REQUEST:return n;case r.ADD_BID_TO_CART_RECEIVED:return n.bid=t.bid,n;case r.GET_BIDSOFCUSTOMER_INCART_REQUEST:return n;case r.GET_BIDSOFCUSTOMER_INCART_RECEIVED:return n.bids=t.bids,console.log(n.bids),n;case r.ADD_BID_TO_CART_REQUEST:case r.UPDATE_BID_IN_CART_REQUEST:case r.UPDATE_BID_IN_CART_RECEIVED:case r.DELETE_BID_IN_CART_REQUEST:case r.DELETE_BID_IN_CART_RECEIVED:case r.ORDER_BIDS_IN_CART_REQUEST:case r.ORDER_BIDS_IN_CART_RECEIVED:case r.GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST:return n;case r.GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED:return n.bids=t.bids,n;default:return e}},productReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0,n=Object(qe.cloneDeep)(e);switch(n.type=t.type,n.message="".concat(t.message," ").concat(new Date),n.httpMessage="".concat(t.httpMessage," + ").concat(new Date),console.log("in productReducer. Latest message",n.message),console.log("in productReducer. Latest api message",n.httpMessage),t.type){case r.GET_PRODUCTS_REQUEST:return n;case r.GET_PRODUCTS_RECEIVED:return n.products=t.products,n;case r.CREATE_PRODUCT_REQUEST:return n;case r.CREATE_PRODUCT_RECEIVED:return n.product=t.product,n;case r.GET_PRODUCT_REQUEST:return n;case r.GET_PRODUCT_RECEIVED:return n.product=t.product,n;case r.UPDATE_PRODUCT_RECEIVED:return n;case r.UPDATE_PRODUCT_REQUEST:return console.log("received updatedProduct",t.product),n.product=t.product,n;case r.DELETE_PRODUCT_REQUEST:return n;case r.DELETE_PRODUCT_RECEIVED:return n.product=t.product,n;default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0,n=Object(qe.cloneDeep)(e);switch(n.authVM=Object(qe.cloneDeep)(t.authVM),n.type=t.type,n.message="".concat(t.message," ").concat(new Date),n.httpMessage="".concat(t.httpMessage," + ").concat(new Date),t.type){case r.LOGIN_REQUEST:return n;case r.LOGIN_SUCCESS:return localStorage.setItem("authVM",JSON.stringify(t.authVM)),n;case r.LOGIN_FAILED:return n;case r.LOGOUT:return localStorage.removeItem("authVM"),n.message=r.LOGOUT_SUCCESS,n;default:return e}},errorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0,n=t.type,a=t.error;return n===r.CLEAR_ERROR?Xt:a?(console.log("error received in errorReducer:",a),{type:n,error:t.error}):e}}),en=Object(Wt.e)(Zt,Object(Wt.a)($t.a));o.a.render(c.a.createElement(l.a,{store:en},c.a.createElement(c.a.StrictMode,null,c.a.createElement(Ft,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[429,1,2]]]);
//# sourceMappingURL=main.25e9221a.chunk.js.map