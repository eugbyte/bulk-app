(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{245:function(e,t,n){e.exports=n.p+"static/media/e_commerce.3acf207a.png"},384:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=384},428:function(e,t,n){e.exports=n(506)},433:function(e,t,n){},434:function(e,t,n){},442:function(e,t,n){},505:function(e,t,n){},506:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),i=n(20),o=n.n(i),s=(n(433),n(434),n(21)),l=n(19),u=n(15),d=n.n(u),E=n(28);function m(e,t){return{type:e,error:t}}function p(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST,message:"GET DiscountScheme of producer id: "+e}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/discountSchemes/producer/"+e);case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,n({type:a.GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED,discountSchemes:c,httpMessage:a.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}!function(e){e.GET_DISCOUNTSCHEMES_REQUEST="GET_DISCOUNTSCHEMES_REQUEST",e.GET_DISCOUNTSCHEMES_RECEIVED="GET_DISCOUNTSCHEMES_RECEIVED",e.GET_DISCOUNTSCHEME_REQUEST="GET_DISCOUNTSCHEME_REQUEST",e.GET_DISCOUNTSCHEME_RECEIVED="GET_DISCOUNTSCHEME_RECEIVED",e.GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST="GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST",e.GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED="GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED",e.CREATE_DISCOUNTSCHEME_REQUEST="CREATE_DISCOUNTSCHEME_REQUEST",e.CREATE_DISCOUNTSCHEME_RECEIVED="CREATE_DISCOUNTSCHEME_RECEIVED",e.DELETE_DISCOUNTSCHEME_REQUEST="DELETE_DISCOUNTSCHEME_REQUEST",e.DELETE_DISCOUNTSCHEME_RECEIVED="DELETE_DISCOUNTSCHEME_RECEIVED",e.GET_BIDSOFCUSTOMER_INCART_REQUEST="GET_BIDSOFCUSTOMER_INCART_REQUEST",e.GET_BIDSOFCUSTOMER_INCART_RECEIVED="GET_BIDSOFCUSTOMER_INCART_RECEIVED",e.ADD_BID_TO_CART_REQUEST="ADD_BID_TO_CART_REQUEST",e.ADD_BID_TO_CART_RECEIVED="ADD_BID_TO_CART_RECEIVED",e.UPDATE_BID_IN_CART_REQUEST="UPDATE_BID_IN_CART_REQUEST",e.UPDATE_BID_IN_CART_RECEIVED="UPDATE_BID_IN_CART_RECEIVED",e.DELETE_BID_IN_CART_REQUEST="DELETE_BID_IN_CART_REQUEST",e.DELETE_BID_IN_CART_RECEIVED="DELETE_BID_IN_CART_RECEIVED",e.ERROR="ERROR",e.CLEAR_ERROR="CLEAR_ERROR",e.ORDER_BIDS_IN_CART_REQUEST="ORDER_BIDS_IN_CART_REQUEST",e.ORDER_BIDS_IN_CART_RECEIVED="ORDER_BIDS_IN_CART_RECEIVED",e.GET_PRODUCTS_REQUEST="GET_PRODUCTS_REQUEST",e.GET_PRODUCTS_RECEIVED="GET_PRODUCTS_RECEIVED",e.GET_PRODUCT_REQUEST="GET_PRODUCT_REQUEST",e.GET_PRODUCT_RECEIVED="GET_PRODUCT_RECEIVED",e.GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST="GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST",e.GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED="GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED",e.CREATE_PRODUCT_REQUEST="CREATE_PRODUCT_REQUEST",e.CREATE_PRODUCT_RECEIVED="CREATE_PRODUCT_RECEIVED",e.DELETE_PRODUCT_REQUEST="DELETE_PRODUCT_REQUEST",e.DELETE_PRODUCT_RECEIVED="DELETE_PRODUCT_RECEIVED",e.UPDATE_PRODUCT_REQUEST="UPDATE_PRODUCT_REQUEST",e.UPDATE_PRODUCT_RECEIVED="UPDATE_PRODUCT_RECEIVED",e.LOGIN_REQUEST="LOGIN_REQUEST",e.LOGIN_SUCCESS="LOGIN_SUCCESS",e.LOGIN_FAILED="LOGIN_FAILED",e.LOGOUT="LOGOUT",e.LOGOUT_SUCCESS="LOGOUT_SUCCESS",e.HTTP_UPDATE_SUCCESS="HTTP_UPDATE_SUCCESS",e.HTTP_READ_SUCCESS="HTTP_READ_SUCCESS",e.HTTP_CREATE_SUCCESS="HTTP_CREATE_SUCCESS",e.HTTP_DELETE_SUCCESS="HTTP_DELETE_SUCCESS",e.HTTP_UPDATE_ORDER_SUCCESS="HTTP_UPDATE_ORDER_SUCCESS"}(a||(a={}));var h=n(541),v=n(534),f=n(537),S=n(536),C=n(538),T=n(539),O=n(126),D=n(73),_=n(80),g=n(160);function R(e){var t=e.title,n=e.paras,a=e.actionTitle,r=e.action,i=b();return c.a.createElement("div",null,c.a.createElement(v.a,{className:i.cardWidth},c.a.createElement(S.a,{onClick:r},c.a.createElement(f.a,{component:"img",height:"140",className:i.cardHeight,image:"e_commerce.png",title:"https://acowebs.com/impact-ecommerce-society/"})),c.a.createElement(C.a,null,c.a.createElement(D.a,{gutterBottom:!0,variant:"h5",component:"h2"},t),n),null!=r&&c.a.createElement(T.a,null,c.a.createElement(O.a,{size:"medium",color:"primary",onClick:r},a))))}var b=Object(_.a)((function(e){return Object(g.a)({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},cardWidth:{maxWidth:450},cardHeight:{height:140}})})),y=n(40),I=n(540),U=n(554);function x(e){var t=e.error,n=e.autoHideDuration,i=void 0===n?6e3:n,o=e.message,u=Object(l.c)(),d=Object(r.useState)(!1),E=Object(s.a)(d,2),p=E[0],h=E[1],v=function(){h(!1);var e=m(a.CLEAR_ERROR,t);u(e)};return Object(r.useEffect)((function(){t&&h(!0)}),[t]),c.a.createElement(I.a,{open:p,autoHideDuration:i,onClose:v},c.a.createElement(j,{severity:"error",onClose:v},o))}function j(e){return c.a.createElement(U.a,Object.assign({elevation:6,variant:"filled"},e))}function P(){var e,t,n=Object(l.c)(),i=Object(y.f)(),o=A(),u=null!==(e=Object(l.d)((function(e){return e.discountSchemeReducer.discountSchemes})))&&void 0!==e?e:[];console.log(u);var p=null!==(t=Object(l.d)((function(e){return e.errorReducer.error})))&&void 0!==t?t:null;Object(r.useEffect)((function(){document.title="Products";var e=function(){var e=Object(E.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return t({type:a.GET_DISCOUNTSCHEMES_REQUEST,message:"GET DiscountSchemes..."}),e.prev=1,e.next=4,fetch("https://localhost:44397/api/discountSchemes");case 4:if((n=e.sent).ok){e.next=10;break}return e.next=8,n.json();case 8:throw e.sent;case 10:return e.next=12,n.json();case 12:r=e.sent,t({type:a.GET_DISCOUNTSCHEMES_RECEIVED,discountSchemes:r,httpMessage:a.HTTP_READ_SUCCESS}),e.next=19;break;case 16:e.prev=16,e.t0=e.catch(1),t(m(a.ERROR,e.t0));case 19:case"end":return e.stop()}}),e,null,[[1,16]])})));return function(t){return e.apply(this,arguments)}}();n(e)}),[]);for(var v=[],f=function(e){var t,n,a=u[e],r="";a.expiryDate&&(r=new Date(a.expiryDate.toString()).toDateString());for(var o=null!==(t=null===(n=a.product)||void 0===n?void 0:n.name)&&void 0!==t?t:"",l=a.bids.filter((function(e){return!e.isInCart})).reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.quantity)}),0),d={Title:o,"Discounted Price":"$"+a.discountedPrice,"Remaining Bids Needed":a.minOrderQnty-l,"Expiry Date":r},E=[],m=0,p=Object.entries(d);m<p.length;m++){var f,S=Object(s.a)(p[m],2),C=S[0],T=S[1],O=c.a.createElement(D.a,{variant:"body2",color:"textSecondary",component:"p",align:"left",key:C},c.a.createElement("b",null,C,"\xa0"),T);if("Discounted Price"===C)O=c.a.createElement(D.a,{variant:"body2",color:"textSecondary",component:"p",align:"left",key:C},c.a.createElement("b",null,C,"\xa0")," $",a.discountedPrice," $",c.a.createElement("del",null,null===(f=a.product)||void 0===f?void 0:f.originalPrice));E.push(O)}var _=c.a.createElement(h.a,{item:!0,xs:12,sm:4,lg:3,key:e},c.a.createElement(R,{title:o,paras:E,actionTitle:"Add to Cart",action:function(){i.push("/discountScheme/"+a.discountSchemeId)}}));v.push(_)},S=0;S<u.length;S++)f(S);return c.a.createElement("div",null,u.length>0&&c.a.createElement(h.a,{className:o.fullWidth,container:!0,spacing:3},v),c.a.createElement(x,{error:p,message:"error fetching schemes"}))}var N,A=Object(_.a)((function(e){return Object(g.a)({typo:{fontVariant:"body2",color:"textSecondary",component:"p",align:"left"},fullWidth:{width:"100vw",margin:"auto",paddingLeft:"100px",paddingRight:"100px"}})})),w=(n(441),n(37)),M=n(553),k=n(556),L=n(542),G=n(543),H=(n(442),n(44));!function(e){e.PRODUCER="PRODUCER",e.CONSUMER="CONSUMER"}(N||(N={}));var Q,B=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(H.a)(this,e),this.jwt="",this.isAuthenticated=!1,this.id="",this.userName="",this.email="",this.claims=[],this.userName=t};function V(){var e,t,n,i,o=q(),s=Object(y.f)(),u=Object(l.c)(),d=null!==(e=Object(l.d)((function(e){return e.authReducer.authVM})))&&void 0!==e?e:new B("ACCOUNT"),E=null!==(t=Object(l.d)((function(e){return e.authReducer.message})))&&void 0!==t?t:"";localStorage.getItem("authVM")&&(d=JSON.parse(localStorage.getItem("authVM")));return Object(r.useEffect)((function(){E===a.LOGOUT_SUCCESS&&s.push("/login")}),[E]),c.a.createElement("div",null,c.a.createElement(M.a,{expand:"lg",variant:"dark",className:o.blueBg},c.a.createElement(M.a.Brand,null,c.a.createElement(w.b,{to:"/",className:o.navLink},"BulkApi")),c.a.createElement(M.a.Toggle,{"aria-controls":"basic-navbar-nav"}),c.a.createElement(M.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(k.a,{className:"mr-auto"},(null===(n=d.claims)||void 0===n?void 0:n.includes(Q.CONSUMER))&&c.a.createElement(r.Fragment,null,c.a.createElement(O.a,{color:"inherit"},c.a.createElement(w.b,{to:"/",className:o.navLink},"Products")),c.a.createElement(O.a,{color:"inherit"},c.a.createElement(w.b,{to:"/cart",className:o.navLink},"Cart")),c.a.createElement(O.a,{color:"inherit"},c.a.createElement(w.b,{to:"/orders",className:o.navLink},"Orders"))),(null===(i=d.claims)||void 0===i?void 0:i.includes(Q.PRODUCER))&&c.a.createElement(r.Fragment,null,c.a.createElement(O.a,{color:"inherit"},c.a.createElement(w.b,{to:"/producer/discountSchemes",className:o.navLink},"Schemes")),c.a.createElement(O.a,{color:"inherit"},c.a.createElement(w.b,{to:"/producer/products",className:o.navLink},"Products")))),c.a.createElement(L.a,{alignRight:!0,title:d.userName},d.isAuthenticated?c.a.createElement(G.a.Item,null,c.a.createElement(k.a.Link,{as:w.b,onClick:function(){var e=function(){var e=new B("ACCOUNT");return e.isAuthenticated="UNTOUCHED",{type:a.LOGOUT,message:"Logout ...",authVM:e}}();u(e)},to:"/login",style:{color:"black"}},"LOGOUT")):c.a.createElement(G.a.Item,null,c.a.createElement(k.a.Link,{as:w.b,to:"/login",style:{color:"black"}},"LOGIN"))))),c.a.createElement("br",null))}!function(e){e.PRODUCER="PRODUCER",e.CONSUMER="CONSUMER"}(Q||(Q={}));var q=Object(_.a)((function(e){return Object(g.a)({navLink:{color:"white",textDecoration:"inherit"},blueBg:{backgroundColor:"#3f51b5",textDecoration:"inherit"},dropDownLink:{color:"black",textDecoration:"inherit"}})})),F=function e(){Object(H.a)(this,e),this.discountSchemeId=0,this.minOrderQnty=0,this.discountedPrice=0,this.expiryDate=null,this.deliveryCharge=0,this.productId=0,this.product=null,this.bids=[],this.addressBidCountDict={}},W=n(546),$=n(544),z=n(398),J=n.n(z),K=n(244),X=n.n(K);function Y(e){var t=e.quantity,n=e.setQuantity,a=e.size,r=void 0===a?"medium":a,i=e.align,o=void 0===i?"alignLeft":i,s=Z();return c.a.createElement("div",{className:s[o]},c.a.createElement($.a,{color:"primary","aria-label":"outlined primary button group",size:r},c.a.createElement(O.a,{onClick:function(){n(t+1)}},c.a.createElement(J.a,null)),c.a.createElement(O.a,null,t),c.a.createElement(O.a,{onClick:function(){t-1<1||n(t-1)}},c.a.createElement(X.a,null))))}var Z=Object(_.a)((function(e){return Object(g.a)({alignLeft:{display:"flex",flexDirection:"column",alignItems:"left","& > *":{margin:e.spacing(1)}},alignCenter:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{margin:e.spacing(1)}},alignRight:{display:"flex",flexDirection:"column",alignItems:"right","& > *":{margin:e.spacing(1)}}})})),ee=n(245),te=n.n(ee),ne=function e(){Object(H.a)(this,e),this.bidId=0,this.isInCart=!1,this.quantity=0,this.bidSuccessDate=null,this.collectionAddress="",this.discountSchemeId=0,this.discountScheme=null,this.customerId=0,this.currentTotalBids=0,this.addressBidCountDict={}};function ae(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("in thunk. bid to update",e.bidId),n({type:a.UPDATE_BID_IN_CART_REQUEST,messages:["Request to update bid in cart"]}),t.prev=2,t.next=5,fetch("https://localhost:44397/api/bids/updatecart",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 5:if((r=t.sent).ok){t.next=11;break}return t.next=9,r.json();case 9:throw t.sent;case 11:return t.next=13,r.json();case 13:c=t.sent,n({type:a.UPDATE_BID_IN_CART_RECEIVED,bid:c,message:r.statusText,httpMessage:a.HTTP_UPDATE_SUCCESS}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),n(m(a.ERROR,t.t0));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e){return t.apply(this,arguments)}}()}function re(e){var t=e.open,n=e.setOpen,a=e.message,r=e.severity,i=e.cleanUp,o=e.autoHideDuration,s=void 0===o?6e3:o,l=function(e){n(!1),i&&i()};return c.a.createElement(I.a,{open:t,autoHideDuration:s,onClose:function(){return l()}},c.a.createElement(ce,{onClose:function(){return l()},severity:r},a))}function ce(e){return c.a.createElement(U.a,Object.assign({elevation:6,variant:"filled"},e))}var ie=n(296),oe=n(297),se=n(303),le=n(361),ue=n(78),de=n(298);function Ee(e){var t=e.title,n=e.state,a=e.selectListItems,r=e.handleChange,i=e.isError,o=void 0!==i&&i,s=e.formHelperText,l=void 0===s?"":s,u=me();return c.a.createElement(ie.a,{className:u.formControl,error:o},c.a.createElement(oe.a,{id:"demo-simple-select-label"},t),c.a.createElement(se.a,{labelId:"demo-simple-select-label",autoWidth:!0,value:n,onChange:function(e){return r(e)}},c.a.createElement(le.a,{value:void 0,divider:!0},c.a.createElement("em",null,"None")),a.map((function(e,t){return c.a.createElement(le.a,{key:t,value:e.value},e.text)}))),o&&c.a.createElement(de.a,null,l))}var me=Object(_.a)((function(e){return Object(g.a)({formControl:{minWidth:150},selectEmpty:{marginTop:e.spacing(2)}})})),pe=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;Object(H.a)(this,e),this.disabled=!1,this.selected=!1,this.text="",this.value=void 0,this.text=t,this.value=n};function he(e){var t=e.textDict,n=e.color,a=void 0===n?"textSecondary":n;console.log(t);for(var r=[],i=0,o=Object.entries(t);i<o.length;i++){var l=Object(s.a)(o[i],2),u=l[0],d=l[1],E=c.a.createElement(D.a,{variant:"body2",color:a,component:"p",align:"left",key:u},c.a.createElement("b",null,u,"\xa0"),d);r.push(E)}return c.a.createElement(W.a,null,r)}function ve(e){var t,n,i,o,u,p,v=e.discountSchemeId,S=e.MODE,C=e.bidIdToUpdate,T=void 0===C?0:C,_=Object(l.c)(),g=Object(r.useState)(1),R=Object(s.a)(g,2),b=R[0],y=R[1],I=Object(r.useState)(!1),U=Object(s.a)(I,2),x=U[0],j=U[1];Object(r.useEffect)((function(){var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.GET_DISCOUNTSCHEME_REQUEST,message:"GET DiscountScheme with id: "+e}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/discountSchemes/"+e);case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,n({type:a.GET_DISCOUNTSCHEME_RECEIVED,discountScheme:c,httpMessage:a.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(v);_(e)}),[v]);var P=null!==(t=Object(l.d)((function(e){return e.discountSchemeReducer.discountScheme})))&&void 0!==t?t:new F;console.log("in DiscountSchemeDetailPage",P);var N=P.addressBidCountDict,A=[];for(var w in N){var M=new pe(w,w);A.push(M)}var k=Object(r.useState)(""),L=Object(s.a)(k,2),G=L[0],H=L[1],Q=null===N||void 0===N?void 0:N.address,B=Q?P.deliveryCharge/(Q+1):P.deliveryCharge,V="";P.expiryDate&&(V=new Date(P.expiryDate.toString()).toDateString());var q=P.bids.filter((function(e){return!e.isInCart})).reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.quantity)}),0),z={"Expiry Date":V},J={Description:null===(n=P.product)||void 0===n?void 0:n.description},K={"Discounted Price":"$"+P.discountedPrice},X={"Original Price":null!==(i="$"+(null===(o=P.product)||void 0===o?void 0:o.originalPrice))&&void 0!==i?i:"$"},Z={"Remaining Bids Needed":P.minOrderQnty-q},ee={"Min Collective Quantity":P.minOrderQnty,"Current Total Bids":q},ce={"Delivery Charge":"$"+P.deliveryCharge,"Current bids at collection point":Q},ie={"Current Average Delivery charge":"approx $"+B};return c.a.createElement(W.a,{maxWidth:"sm"},c.a.createElement(D.a,{color:"primary",variant:"h5",align:"left"},null!==(u=null===(p=P.product)||void 0===p?void 0:p.name)&&void 0!==u?u:""),c.a.createElement(f.a,{component:"img",image:te.a,title:"https://acowebs.com/impact-ecommerce-society/"}),c.a.createElement("br",null),c.a.createElement(h.a,{container:!0},c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(he,{textDict:J}),c.a.createElement("hr",null)),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(he,{textDict:z,color:"textPrimary"}),c.a.createElement("hr",null)),c.a.createElement(h.a,{item:!0,xs:6},c.a.createElement(he,{textDict:K,color:"textPrimary"}),c.a.createElement("hr",null)),c.a.createElement(h.a,{item:!0,xs:6},c.a.createElement(he,{textDict:X}),c.a.createElement("hr",null)),c.a.createElement(h.a,{item:!0,xs:6},c.a.createElement(he,{textDict:Z,color:"textPrimary"})),c.a.createElement(h.a,{item:!0,xs:6},c.a.createElement(he,{textDict:ee}))),c.a.createElement("hr",null),c.a.createElement(h.a,{container:!0},c.a.createElement(h.a,{item:!0,xs:4},c.a.createElement(Ee,{title:"Delivery",state:G,selectListItems:A,handleChange:function(e){var t=e.target.value;console.log(t),H(t)}})),c.a.createElement(h.a,{item:!0,xs:8},c.a.createElement(he,{textDict:ce}),c.a.createElement(he,{textDict:ie,color:"textPrimary"}))),c.a.createElement("hr",null),c.a.createElement(Y,{quantity:b,setQuantity:y,align:"alignCenter"}),c.a.createElement($.a,{size:"medium"},c.a.createElement(O.a,{onClick:function(){var e=new ne;e.customerId=1,e.collectionAddress=G,e.quantity=b;var t=null;"CREATE"===S?(e.discountSchemeId=P.discountSchemeId,t=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.ADD_BID_TO_CART_REQUEST,message:"Making post request to add bid to cart ..."}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/bids/addcart",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,n({type:a.ADD_BID_TO_CART_RECEIVED,bid:c,message:r.statusText,httpMessage:a.HTTP_CREATE_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(e)):"UPDATE"===S&&(e.bidId=T,t=ae(e)),_(t),j(!0)},color:"primary",variant:"contained",disabled:!G||b<1},"Add To Cart")),c.a.createElement(re,{open:x,setOpen:j,message:"Bid successfully created",severity:"success"}))}function fe(){var e=Object(y.g)(),t=parseInt(e.discountSchemeId);return c.a.createElement(ve,{discountSchemeId:t,MODE:"CREATE"})}var Se=n(39),Ce=n(299),Te=n.n(Ce),Oe=n(403),De=n.n(Oe),_e=n(413),ge=n.n(_e),Re=n(404),be=n.n(Re),ye=n(411),Ie=n.n(ye),Ue=n(265),xe=n.n(Ue),je=n(307),Pe=n.n(je),Ne=n(405),Ae=n.n(Ne),we=n(406),Me=n.n(we),ke=n(408),Le=n.n(ke),Ge=n(409),He=n.n(Ge),Qe=n(410),Be=n.n(Qe),Ve=n(407),qe=n.n(Ve),Fe=n(412),We=n.n(Fe),$e=n(414),ze=n.n($e),Je=n(256),Ke=n.n(Je);function Xe(e){for(var t=e.title,n=e.data,a=e.columnNames,r=e.accessors,i=(e.handleChecked,e.idColumnAccessorName),o=void 0===i?"":i,s=e.pageSize,l=void 0===s?10:s,u=(e.actionIcon,e.enablePaging),d=void 0!==u&&u,E=e.enableSearch,m=void 0!==E&&E,p=(e.actionMessage,e.enableSelection),h=void 0!==p&&p,v=e.detailPanelFieldName,f=void 0===v?"":v,S=e.enabledDetailPanel,C=void 0!==S&&S,T=[],O=0;O<a.length;O++){var D=a[O],_=r[O],g={title:D,field:_,hidden:_===o};T.push(g)}var R=Ye();return c.a.createElement("div",null,c.a.createElement(Te.a,{icons:Ze,title:t,columns:T,data:n,options:{selection:h,pageSize:l,search:m,paging:d,rowStyle:{height:"100px"}},detailPanel:[function(e){return{disabled:!C,icon:function(){return c.a.createElement(xe.a,{className:C?R.display:R.displayNone})},render:function(){return function(e,t){return console.log(e),e[t]}(e,f)}}}]}))}var Ye=Object(_.a)((function(e){return Object(g.a)({displayNone:{display:"none"},display:{display:"initial"}})})),Ze={Add:Object(r.forwardRef)((function(e,t){return c.a.createElement(De.a,Object.assign({},e,{ref:t}))})),Check:Object(r.forwardRef)((function(e,t){return c.a.createElement(be.a,Object.assign({},e,{ref:t}))})),Clear:Object(r.forwardRef)((function(e,t){return c.a.createElement(Pe.a,Object.assign({},e,{ref:t}))})),Delete:Object(r.forwardRef)((function(e,t){return c.a.createElement(Ae.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(r.forwardRef)((function(e,t){return c.a.createElement(xe.a,Object.assign({},e,{ref:t}))})),Edit:Object(r.forwardRef)((function(e,t){return c.a.createElement(Me.a,Object.assign({},e,{ref:t}))})),Export:Object(r.forwardRef)((function(e,t){return c.a.createElement(qe.a,Object.assign({},e,{ref:t}))})),Filter:Object(r.forwardRef)((function(e,t){return c.a.createElement(Le.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(r.forwardRef)((function(e,t){return c.a.createElement(He.a,Object.assign({},e,{ref:t}))})),LastPage:Object(r.forwardRef)((function(e,t){return c.a.createElement(Be.a,Object.assign({},e,{ref:t}))})),NextPage:Object(r.forwardRef)((function(e,t){return c.a.createElement(xe.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(r.forwardRef)((function(e,t){return c.a.createElement(Ie.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(r.forwardRef)((function(e,t){return c.a.createElement(Pe.a,Object.assign({},e,{ref:t}))})),Search:Object(r.forwardRef)((function(e,t){return c.a.createElement(We.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(r.forwardRef)((function(e,t){return c.a.createElement(ge.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(r.forwardRef)((function(e,t){return c.a.createElement(X.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(r.forwardRef)((function(e,t){return c.a.createElement(ze.a,Object.assign({},e,{ref:t}))})),AddShoppingCartIcon:Object(r.forwardRef)((function(e,t){return c.a.createElement(Ke.a,Object.assign({},e,{ref:t}))}))},et=n(387),tt=n(158);function nt(e){var t=e.bids,n=e.rowIds,a=e.handleOrder;console.log("in orderCheckOut",t);var r=t.filter((function(e){return n.includes(e.bidId)})),i=r.map((function(e){var t,n,a=e.addressBidCountDict[e.collectionAddress],r=null!==(t=null===e||void 0===e||null===(n=e.discountScheme)||void 0===n?void 0:n.deliveryCharge)&&void 0!==t?t:0;return a?r/a:r})).reduce((function(e,t){return e+t}),0),o=r.reduce((function(e,t){var n,a;return e+t.quantity*(null!==(n=null===(a=t.discountScheme)||void 0===a?void 0:a.discountedPrice)&&void 0!==n?n:0)}),0),s=r.reduce((function(e,t){var n;return null!==(n=e+t.quantity)&&void 0!==n?n:0}),0);return c.a.createElement(tt.a,null,c.a.createElement(h.a,{container:!0,spacing:3},c.a.createElement(h.a,{item:!0,xs:3}),c.a.createElement(h.a,{item:!0,xs:6},c.a.createElement(D.a,{variant:"body1",align:"center",color:"textSecondary",paragraph:!0},c.a.createElement("b",null,"Total Quantity: "),s),c.a.createElement(D.a,{variant:"body1",align:"center",color:"textSecondary",paragraph:!0},c.a.createElement("b",null,"Total Price: "),"$",o),c.a.createElement(D.a,{variant:"body1",align:"center",color:"textSecondary",paragraph:!0},c.a.createElement("b",null,"Total Delivery Charge: "),"$",i),c.a.createElement(D.a,{variant:"body1",align:"center",color:"secondary",paragraph:!0},c.a.createElement("b",null,"Grand Total: "),"$",i+s)),c.a.createElement(h.a,{item:!0,xs:3,alignContent:"flex-end"},c.a.createElement(O.a,{color:"secondary",size:"large",variant:"contained",onClick:a,disabled:r.length<1},"Order Bids"))))}var at=n(64),rt=function e(){Object(H.a)(this,e),this.bidId=void 0,this.checkbox=void 0,this.name=void 0,this.discountedPrice=void 0,this.updateCartComponent=void 0,this.collectionAddress=void 0,this.deliveryCharge=void 0,this.deleteButton=void 0,this.detailPanel=void 0};function ct(){var e,t,n=Object(y.f)(),i=Object(l.c)(),o=Object(r.useState)(!1),u=Object(s.a)(o,2),p=u[0],v=u[1],f=Object(r.useState)(""),S=Object(s.a)(f,2),C=S[0],T=S[1],D=function(e,t){v(e),T(t)},_=null!==(e=Object(l.d)((function(e){return e.bidReducer.bids})))&&void 0!==e?e:[],g=Object(r.useState)([]),R=Object(s.a)(g,2),b=R[0],I=R[1];Object(r.useEffect)((function(){I(Object(at.cloneDeep)(_))}),[_.length]),console.log("bids received",_),Object(r.useEffect)((function(){document.title="Cart";var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.GET_BIDSOFCUSTOMER_INCART_REQUEST,messages:["Fetching bids in cart for customer "+e]}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/bids/cart/"+e);case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,n({type:a.GET_BIDSOFCUSTOMER_INCART_RECEIVED,bids:c,message:r.statusText,httpMessage:a.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(1);i(e)}),[]);var U=Object(r.useState)([]),x=Object(s.a)(U,2),j=x[0],P=x[1],N=null!==(t=Object(l.d)((function(e){return e.bidReducer.httpMessage})))&&void 0!==t?t:"";Object(r.useEffect)((function(){if(N.includes(a.HTTP_UPDATE_SUCCESS)||N.includes(a.HTTP_DELETE_SUCCESS));N.includes(a.HTTP_UPDATE_ORDER_SUCCESS)&&(console.log(N),n.push("/orders"))}),[N]);for(var A=b.map((function(e){return function(e){var t,n,a,r,i,o,s,l=null===(t=e.discountScheme)||void 0===t?void 0:t.discountedPrice,u=null===(n=e.discountScheme)||void 0===n||null===(a=n.product)||void 0===a?void 0:a.originalPrice,d=new rt;d.bidId=e.bidId,d.discountedPrice="$".concat(l," (Save $").concat(u-l,")"),d.name=null===(r=e.discountScheme)||void 0===r||null===(i=r.product)||void 0===i?void 0:i.name;var E=e.addressBidCountDict[e.collectionAddress],m=null!==(o=null===e||void 0===e||null===(s=e.discountScheme)||void 0===s?void 0:s.deliveryCharge)&&void 0!==o?o:0,p=E?m/(E+1):m;return d.deliveryCharge=c.a.createElement(h.a,{container:!0},c.a.createElement(h.a,{item:!0,xs:6},c.a.createElement("span",null,"$".concat(p))),c.a.createElement(h.a,{item:!0,xs:6},c.a.createElement("span",{style:{borderBottom:"1px solid black",display:"block",fontSize:"12px"}},"$",m),c.a.createElement("span",{style:{fontSize:"12px"}},E," other bids here"))),d}(e)})),w=function(e){var t,n,r,o,s,l,u=b[e],p=u.quantity,v=function(t,n){var a=Object(at.cloneDeep)(_),r=a[e];r.quantity=t,r.collectionAddress=n,I(a);var c=ae(r);i(c),D(!0,"bid added to cart")},f="";(null===(t=u.discountScheme)||void 0===t?void 0:t.expiryDate)&&(f=new Date(u.discountScheme.expiryDate.toString()).toDateString());A[e].updateCartComponent=c.a.createElement(Y,{quantity:p,setQuantity:function(e){v(e,u.collectionAddress)},size:"small"}),A[e].checkbox=c.a.createElement(et.a,{size:"small",onChange:function(){var e=u.bidId;if(j.includes(e)){var t=j.filter((function(t){return t!==e}));P(t)}else P([].concat(Object(Se.a)(j),[e]))}}),A[e].deleteButton=c.a.createElement(O.a,{size:"small",variant:"contained",color:"primary",onClick:function(){var t=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.DELETE_BID_IN_CART_REQUEST,messages:["deleting bids in cart with bidId"+e]}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/bids/cart/"+e,{method:"DELETE"});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:n({type:a.DELETE_BID_IN_CART_RECEIVED,message:r.statusText,httpMessage:a.HTTP_DELETE_SUCCESS}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()}(u.bidId);i(t),D(!0,"item deleted");var n=Object(at.cloneDeep)(b).filter((function(t,n){return n!=e}));console.log(b,n),I(n)}},"Delete");var S=u.addressBidCountDict,C=[];for(var T in S){var g=new pe(T,T);g.selected=u.collectionAddress===T,C.push(g)}A[e].collectionAddress=c.a.createElement(Ee,{title:"Delivery",state:u.collectionAddress,selectListItems:C,handleChange:function(e){var t=e.target.value;v(u.quantity,t)}});var R={Description:null===(n=u.discountScheme)||void 0===n||null===(r=n.product)||void 0===r?void 0:r.description,"Bid Expiry Date":f},y={"Min Order Quantity":null===(o=u.discountScheme)||void 0===o?void 0:o.minOrderQnty,"Current total bids":u.currentTotalBids,"Remaining bids required":(null===(s=u.discountScheme)||void 0===s?void 0:s.minOrderQnty)-u.currentTotalBids},U={"Delivery Charge":"$"+(null===(l=u.discountScheme)||void 0===l?void 0:l.deliveryCharge)};A[e].detailPanel=c.a.createElement(h.a,{container:!0},c.a.createElement(h.a,{item:!0,xs:4},c.a.createElement(he,{textDict:R})),c.a.createElement(h.a,{item:!0,xs:4},c.a.createElement(he,{textDict:y})),c.a.createElement(h.a,{item:!0,xs:4},c.a.createElement(he,{textDict:U})))},M=0;M<b.length;M++)w(M);var k=Object.keys(new rt);k=k.filter((function(e){return"detailPanel"!==e}));return c.a.createElement(W.a,{maxWidth:"xl"},c.a.createElement(nt,{bids:b,rowIds:j,handleOrder:function(){var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.ORDER_BIDS_IN_CART_REQUEST,messages:["ordering bids in cart "+e.toString()]}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/bids/cart/order",{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:n({type:a.ORDER_BIDS_IN_CART_RECEIVED,message:r.statusText,httpMessage:a.HTTP_UPDATE_ORDER_SUCCESS}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()}(b.filter((function(e){return j.includes(e.bidId)})));i(e)}}),c.a.createElement("br",null),c.a.createElement(Xe,{data:A,columnNames:["BidId","Check Box","Name","Price per Item","Quantity","Collection Address","Average Delivery Charge","Remove"],accessors:k,title:"Cart",idColumnAccessorName:"bidId",actionMessage:"Make Order",actionIcon:Ke.a,enabledDetailPanel:!0,detailPanelFieldName:"detailPanel"}),c.a.createElement(re,{open:p,setOpen:v,message:C,severity:"success"}))}var it=function e(){Object(H.a)(this,e),this.name=void 0,this.discountedPrice=void 0,this.quantity=void 0,this.deliveryCharge=void 0,this.collectionAddress=void 0,this.remainingBidsRequired=void 0,this.bidExpiryDate=void 0,this.bidStatus=void 0};function ot(){var e;document.title="Orders";var t=Object(l.c)(),n=null!==(e=Object(l.d)((function(e){return e.bidReducer.bids})))&&void 0!==e?e:[];Object(r.useEffect)((function(){var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST,messages:["getting  PendingOrSuccessfulBids of customer "+e]}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/bids/orders/1");case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,console.log("in thunk",c),n({type:a.GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED,bids:c,message:r.statusText,httpMessage:a.HTTP_READ_SUCCESS}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}()}(1);t(e)}),[]);var i=Object.keys(new it),o=n.map((function(e){return function(e){var t,n,a,r,c,i,o,s,l=null===(t=e.discountScheme)||void 0===t?void 0:t.discountedPrice,u=null===(n=e.discountScheme)||void 0===n||null===(a=n.product)||void 0===a?void 0:a.originalPrice,d=null===(r=e.discountScheme)||void 0===r?void 0:r.minOrderQnty,E=e.currentTotalBids;console.log("remainingBidsRequired",d,E,d-E,"bidId: "+e.bidId);var m=new it;m.quantity=e.quantity+"",m.collectionAddress=e.collectionAddress,m.discountedPrice="$".concat(l," (Save $").concat(u-l,")"),m.deliveryCharge="$"+(null===(c=e.discountScheme)||void 0===c?void 0:c.deliveryCharge),m.name=null===(i=e.discountScheme)||void 0===i||null===(o=i.product)||void 0===o?void 0:o.name,m.remainingBidsRequired=d-E;var p=new Date(null===(s=e.discountScheme)||void 0===s?void 0:s.expiryDate);m.bidExpiryDate=p.toDateString(),null!=e.bidSuccessDate?m.bidStatus="SUCCESS":new Date>p?m.bidStatus="FAILED":m.bidStatus="PENDING";return m}(e)}));return c.a.createElement(W.a,{maxWidth:"lg"},c.a.createElement(Xe,{columnNames:["Name","Discounted Price Per Item","Quantity","Delivery Charge","Collection Address","Remaining Bids Required","Bid Expiry Date","Bid Status"],accessors:i,data:o,title:"Submitted Bids",enablePaging:!0,pageSize:5}))}var st=n(162),lt=function e(){Object(H.a)(this,e),this.productId=0,this.name="",this.category="",this.description="",this.originalPrice=0,this.producerId=0,this.discountSchemes=[]},ut=n(520),dt=n(523),Et=n(522),mt=n(551);function pt(e){var t=e.open,n=e.toggleOpen,a=e.title,r=e.content,i=e.actionTitle,o=e.action,s=e.showPicture,l=void 0!==s&&s,u=e.secondaryActionTitle,d=e.secondaryAction;return c.a.createElement(ut.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-title",maxWidth:"sm",fullWidth:!0},c.a.createElement(mt.a,{id:"form-dialog-title"},a),c.a.createElement(Et.a,null,l&&c.a.createElement(f.a,{component:"img",image:te.a,title:"https://acowebs.com/impact-ecommerce-society/"}),c.a.createElement("br",null),r),c.a.createElement(W.a,null,c.a.createElement(h.a,{container:!0,spacing:0},c.a.createElement(h.a,{item:!0,xs:8}),c.a.createElement(h.a,{item:!0,xs:4},i&&c.a.createElement(dt.a,null,c.a.createElement(O.a,{onClick:o,color:"primary",variant:"outlined"},i)))),c.a.createElement(h.a,{container:!0,spacing:0},c.a.createElement(h.a,{item:!0,xs:4},u&&c.a.createElement(dt.a,null,c.a.createElement(O.a,{onClick:d,color:"secondary",variant:"outlined"},u))),c.a.createElement(h.a,{item:!0,xs:4}),c.a.createElement(h.a,{item:!0,xs:4},c.a.createElement(dt.a,null,c.a.createElement(O.a,{onClick:n,color:"primary",variant:"outlined"},"Close"))))))}var ht=n(557),vt=n(251),ft=function e(){Object(H.a)(this,e),this.name=void 0,this.discountedPrice=void 0,this.deliveryCharge="0",this.minOrderQnty=0,this.currentBids=0,this.bidExpiryDate="",this.bidStatus=void 0,this.delete=void 0};function St(){var e,t;document.title="Schemes";var n=Object(l.c)(),i=Object(y.f)(),o=null!==(e=Object(l.d)((function(e){return e.discountSchemeReducer.discountSchemes})))&&void 0!==e?e:[];Object(r.useEffect)((function(){var e=p(2);n(e)}),[]);var u=o.map((function(e){var t;return null!==(t=e.product)&&void 0!==t?t:new lt}));u=Object(at.uniqBy)(u,(function(e){return e.name}));var v=Object(r.useState)([]),f=Object(s.a)(v,2),S=f[0],C=f[1];Object(r.useEffect)((function(){console.log(o),C(o)}),[o.length]);var T=Object(r.useState)(),D=Object(s.a)(T,2),_=D[0],g=D[1],R=["SUCCESS","PENDING","FAILED"].map((function(e){return new pe(e,e)})),b=Object(r.useState)(""),I=Object(s.a)(b,2),U=I[0],x=I[1];Object(r.useEffect)((function(){var e=Object(at.cloneDeep)(o);e=e.filter((function(e){return!_||Ct(e)===_})).filter((function(e){var t,n,a;return!U||(null===(t=e.product)||void 0===t||null===(n=t.name)||void 0===n||null===(a=n.toLowerCase())||void 0===a?void 0:a.includes(U.toLowerCase()))})),C(e)}),[_,U]);var j=Object(r.useState)(!1),P=Object(s.a)(j,2),N=P[0],A=P[1],w=Object(r.useState)(new lt),M=Object(s.a)(w,2),k=M[0],L=M[1],G={Name:k.name,"Original Price":"$"+k.originalPrice,Category:k.category,Description:k.description},H=c.a.createElement(he,{textDict:G}),Q=[],B=Object(r.useState)(!1),V=Object(s.a)(B,2),q=V[0],$=V[1],z=Object(r.useState)(new F),J=Object(s.a)(z,2),K=J[0],X=J[1],Y=null!==(t=Object(l.d)((function(e){return e.discountSchemeReducer.httpMessage})))&&void 0!==t?t:"";console.log("in ProductPage",Y),Object(r.useEffect)((function(){if(Y.includes(a.HTTP_DELETE_SUCCESS)){var e=p(2);n(e)}}),[Y]);var Z,ee=Object(st.a)(S);try{var te=function(){var e,t=Z.value,n=function(e){var t,n=new ft;if(null==e)return n;var a=e.discountedPrice,r=null===(t=e.product)||void 0===t?void 0:t.originalPrice;n.discountedPrice=c.a.createElement("span",null,"$",a," ",c.a.createElement("del",null,"$",r));var i=new Date(e.expiryDate);return n.bidExpiryDate=i.toDateString(),n.deliveryCharge="$"+e.deliveryCharge,n.currentBids=e.bids.filter((function(e){return!e.isInCart})).reduce((function(e,t){return e+t.quantity}),0),n.minOrderQnty=e.minOrderQnty,n.bidStatus=Ct(e),n}(t),a=t.bids.length>0,r=a?"Cannot delete scheme as it has dependent bids":"";n.name=c.a.createElement(O.a,{onClick:function(){var e,n=null!==(e=S.map((function(e){return e.product})).find((function(e){return(null===e||void 0===e?void 0:e.productId)===t.productId})))&&void 0!==e?e:new lt;L(n),A(!N)},size:"small",variant:"outlined"},null===(e=t.product)||void 0===e?void 0:e.name),n.delete=c.a.createElement("div",{className:"tooltip__div-visible"},c.a.createElement(O.a,{size:"small",variant:"outlined",color:"secondary",disabled:a,onClick:function(){X(t),$(!0)}},"Delete",c.a.createElement("span",{className:"tooltiptext"},r))),Q.push(n)};for(ee.s();!(Z=ee.n()).done;)te()}catch(ae){ee.e(ae)}finally{ee.f()}var ne=Object.keys(new ft);return c.a.createElement(W.a,{maxWidth:"lg"},c.a.createElement(h.a,{container:!0},c.a.createElement(h.a,{item:!0,xs:2},c.a.createElement(Ee,{title:"Status",state:_,selectListItems:R,handleChange:function(e){var t=e.target.value;g(t)}})),c.a.createElement(h.a,{item:!0,xs:3},c.a.createElement(ht.a,{id:"combo-box-demo",options:u,getOptionLabel:function(e){var t;return null!==(t=e.name)&&void 0!==t?t:""},style:{width:300},onInputChange:function(e,t){return n=t,console.log(n),void x(n);var n},renderInput:function(e){return c.a.createElement(vt.a,Object.assign({},e,{label:"Products",variant:"outlined"}))}})),c.a.createElement(h.a,{item:!0,xs:5}),c.a.createElement(h.a,{item:!0,xs:2},c.a.createElement(O.a,{onClick:function(){return i.push("/producer/discountSchemes/create")},variant:"contained",color:"primary"},"Create Scheme"))),c.a.createElement("br",null),c.a.createElement(Xe,{columnNames:["Name","Discounted Price","Delivery Charge","Min Order Qnty","Current Bids","Expiry Date","Bid Status","Delete"],accessors:ne,data:Q,title:"Discount Schemes",enablePaging:!0,pageSize:5}),c.a.createElement(pt,{open:N,toggleOpen:function(){return A(!N)},content:H,showPicture:!0}),c.a.createElement(pt,{open:q,toggleOpen:function(){return $(!q)},content:c.a.createElement("p",null,"Confirm Delete?"),secondaryAction:function(){if(!(K.bids.length>0)){console.log("discountSchemeId",K.discountSchemeId);var e,t=(e=K.discountSchemeId,function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.DELETE_DISCOUNTSCHEME_REQUEST,message:"Deleting Discount Scheme"}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/discountSchemes/"+e,{method:"DELETE",headers:{"Content-Type":"application/json"}});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,n({type:a.DELETE_DISCOUNTSCHEME_RECEIVED,discountScheme:c,httpMessage:a.HTTP_DELETE_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}());n(t),$(!1)}},secondaryActionTitle:"Delete Product"}))}function Ct(e){var t=new Date(e.expiryDate),n=e.bids.some((function(e){return null!=e.bidSuccessDate})),a=t<new Date;return n?"SUCCESS":!n&&a?"FAILED":"PENDING"}function Tt(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.GET_PRODUCTS_REQUEST,message:"Getting products of producer ..."}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/products/producer/"+e);case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,n({type:a.GET_PRODUCTS_RECEIVED,products:c,message:r.statusText,httpMessage:a.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}var Ot=n(228),Dt=n(31),_t=n(291),gt=n(415);function Rt(e){var t=e.control,n=e.errors,a=e.label,r=e.name,i=e.defaultValue,o=void 0===i?"":i,s=e.errorMessage,l=void 0===s?"":s,u=e.rules,d=void 0===u?{}:u,E=null!=n[r],m=E?l:"";return c.a.createElement(ue.a,{name:r,defaultValue:o,control:t,rules:d,render:function(e){return c.a.createElement(bt,Object.assign({},e,{label:a,error:E,helperText:m}))}})}function bt(e){var t=e.label,n=e.onChange,a=e.value,r=e.error,i=void 0!==r&&r,o=e.helperText,s=void 0===o?"":o;return a||(a=new Date),c.a.createElement(Dt.a,{utils:Ot.default},c.a.createElement(_t.b,{error:i,helperText:s,disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:Object(gt.v4)(),label:t,value:a,onChange:n,KeyboardButtonProps:{"aria-label":"change date"}}))}var yt,It,Ut=n(301);function xt(e){var t=e.label,n=e.name,a=e.defaultValue,r=void 0===a?"":a,i=e.isFullWidth,o=void 0!==i&&i,s=e.variant,l=void 0===s?"standard":s,u=e.type,d=void 0===u?"text":u,E=e.adornment,m=void 0===E?null:E,p=e.control,h=e.errors,v=e.errorMessage,f=void 0===v?"":v,S=e.rules,C=void 0===S?{}:S;console.log("errors",h);var T=null!=h[n],O=T?f:"";return c.a.createElement("div",null,c.a.createElement(ue.a,{name:n,defaultValue:r,control:p,rules:C,render:function(e){return c.a.createElement(vt.a,Object.assign({},e,{label:t,error:T,helperText:O,fullWidth:o,variant:l,type:d,InputProps:{startAdornment:m?c.a.createElement(Ut.a,{position:"start"},m):null}}))}}))}function jt(){var e,t,n;document.title="Create Discount Scheme";var i=Object(l.c)(),o=Object(y.f)(),s=null!==(e=Object(l.d)((function(e){return e.productReducer.products})))&&void 0!==e?e:[];s.map((function(e){return new pe(e.name,e.productId)}));Object(r.useEffect)((function(){var e=Tt(2);i(e)}),[]);var u=Object(ue.b)(),p=u.errors,v=u.handleSubmit,f=u.control,S=u.getValues,C=(0,u.watch)(yt.productId,0),T=null!==(t=s.find((function(e){return e.productId===C})))&&void 0!==t?t:new lt,D={"Original Price":"$"+T.originalPrice,Description:T.description};console.log("watchProductId",C);var _=null!==(n=Object(l.d)((function(e){return e.discountSchemeReducer.httpMessage})))&&void 0!==n?n:"";Object(r.useEffect)((function(){_.includes(a.HTTP_CREATE_SUCCESS)&&o.push("/producer/discountSchemes")}),[_]);return c.a.createElement(W.a,{maxWidth:"md"},c.a.createElement("form",{onSubmit:v((function(e){var t=S([yt.productId,yt.discountedPrice,yt.minOrderQnty,yt.deliveryCharge,yt.expiryDate]),n=t.productId,r=t.discountedPrice,c=t.minOrderQnty,o=t.deliveryCharge,s=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.CREATE_DISCOUNTSCHEME_REQUEST,message:"Creating Discount Scheme"}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/discountSchemes",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,n({type:a.CREATE_DISCOUNTSCHEME_RECEIVED,discountScheme:c,httpMessage:a.HTTP_CREATE_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(function(e,t,n,a,r){var c=new F;return c.productId=e,c.minOrderQnty=t,c.discountedPrice=n,c.expiryDate=a,c.deliveryCharge=r,c}(n,c,r,t.expiryDate,o));i(s)}))},c.a.createElement(h.a,{container:!0,justify:"flex-start"},c.a.createElement(h.a,{item:!0,xs:4},c.a.createElement(ue.a,{control:f,name:yt.productId,rules:{required:!0},render:function(e){var t=e.onChange;return c.a.createElement(ht.a,{id:"combo-box-demo",options:s,getOptionLabel:function(e){var t;return null!==(t=e.name)&&void 0!==t?t:""},style:{width:300},onChange:function(e,n){return t(n.productId)},renderInput:function(e){return c.a.createElement(vt.a,Object.assign({},e,{label:"Products",variant:"outlined"}))}})}}),p.productId&&c.a.createElement("p",{style:{fontSize:"14px",color:"red",textAlign:"left"}},"Product is required")),c.a.createElement(h.a,{item:!0,xs:3,alignItems:"flex-end"},c.a.createElement(O.a,{onClick:function(){return o.push("/producer/product/0")},variant:"outlined",size:"small",style:{bottom:"-30%"}},"Or create one")),c.a.createElement(Pt,null),C>0&&c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(he,{textDict:D,color:"textSecondary"})),c.a.createElement(Pt,null),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(xt,{isFullWidth:!0,control:f,errors:p,name:yt.discountedPrice,label:"Discounted Price",errorMessage:"Discounted Price is required",rules:{required:!0,min:1},adornment:"$"})),c.a.createElement(Pt,null),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(xt,{isFullWidth:!0,control:f,errors:p,name:yt.minOrderQnty,label:"Minimum order quantity",errorMessage:"Minimum order quantity is required",rules:{required:!0,min:1}})),c.a.createElement(Pt,null),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(xt,{isFullWidth:!0,control:f,errors:p,name:yt.deliveryCharge,label:"Delivery Charge",errorMessage:"Delivery Charge is required",rules:{required:!0,min:1},adornment:"$"})),c.a.createElement(Pt,null),c.a.createElement(h.a,{item:!0,xs:2},c.a.createElement(Rt,{label:"Expiry Date",name:yt.expiryDate,control:f,errors:p,rules:{required:!0},errorMessage:"Expiry Date is required"})),c.a.createElement(Pt,null),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement(O.a,{variant:"contained",color:"primary",type:"submit"},"Submit")),c.a.createElement(Pt,null))))}function Pt(){return c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement("br",null))}function Nt(){var e,t;document.title="Product Form";var n=Object(l.c)(),i=(Object(y.f)(),Object(y.g)()),o=parseInt(i.productId),u=0===o?"CREATE":"UPDATE",p=null!==(e=Object(l.d)((function(e){return e.productReducer.product})))&&void 0!==e?e:new lt;Object(r.useEffect)((function(){if("UPDATE"===u){var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.GET_PRODUCT_REQUEST,message:"Getting products of producer ..."}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/products/"+e);case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,console.log("In productThunk",c),n({type:a.GET_PRODUCT_RECEIVED,product:c,message:r.statusText,httpMessage:a.HTTP_READ_SUCCESS}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}()}(o);n(e)}}),[o]);var h=Object(ue.b)(),v=h.errors,f=h.handleSubmit,S=h.control,C=(h.getValues,h.reset),T=h.setValue;Object(r.useEffect)((function(){"UPDATE"===u&&(T(It.productId,p.productId),T(It.name,p.name),T(It.category,p.category),T(It.description,p.description),T(It.originalPrice,p.originalPrice))}),[JSON.stringify(p)]);var D=Object(r.useState)(!1),_=Object(s.a)(D,2),g=_[0],R=_[1],b=null!==(t=Object(l.d)((function(e){return e.productReducer.httpMessage})))&&void 0!==t?t:"";return Object(r.useEffect)((function(){(b.includes(a.HTTP_CREATE_SUCCESS)||b.includes(a.HTTP_UPDATE_SUCCESS))&&R(!0)}),[b]),c.a.createElement(W.a,{maxWidth:"md"},c.a.createElement("form",{onSubmit:f((function(e){var t=e.productId,r=function(e,t,n,a,r){var c=new lt;return c.productId=e>0?e:0,c.name=t,c.category=n,c.description=a,c.originalPrice=r,c.producerId=2,c}(t,e.name,e.category,e.description,e.originalPrice);if(console.log("submitting product",r),"CREATE"===u){var c=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.GET_PRODUCTS_REQUEST,message:"Creating product ..."}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/products/",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:if((r=t.sent).ok){t.next=11;break}return t.next=8,r.json();case 8:throw c=t.sent,console.log("apiError in createProductAsync",c),c;case 11:return t.next=13,r.json();case 13:i=t.sent,n({type:a.GET_PRODUCTS_RECEIVED,product:i,message:r.statusText,httpMessage:a.HTTP_CREATE_SUCCESS}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}()}(r);n(c),C({})}else if("UPDATE"===u){r.producerId=p.producerId;var i=function(e,t){return function(){var n=Object(E.a)(d.a.mark((function n(r){var c,i;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:a.UPDATE_PRODUCT_REQUEST,message:"Updating product ..."}),n.prev=1,n.next=4,fetch("https://localhost:44397/api/products/"+e,{method:"PUT",headers:{"Content-Type":"application/json"},body:JSON.stringify(t)});case 4:if((c=n.sent).ok){n.next=10;break}return n.next=8,c.json();case 8:throw n.sent;case 10:return n.next=12,c.json();case 12:i=n.sent,console.log("updatedProduct",i),r({type:a.GET_PRODUCTS_RECEIVED,product:i,message:c.statusText,httpMessage:a.HTTP_UPDATE_SUCCESS}),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(1),r(m(a.ERROR,n.t0));case 20:case"end":return n.stop()}}),n,null,[[1,17]])})));return function(e){return n.apply(this,arguments)}}()}(t,r);n(i)}}))},c.a.createElement(At,{display:"none",component:c.a.createElement(xt,{isFullWidth:!0,control:S,errors:v,name:It.productId,label:"Product Id",rules:{required:!1}})}),c.a.createElement(At,{component:c.a.createElement(xt,{isFullWidth:!0,control:S,errors:v,name:It.name,label:"Name",rules:{required:!0},errorMessage:"Name is required"})}),c.a.createElement(At,{component:c.a.createElement(xt,{isFullWidth:!0,control:S,errors:v,name:It.originalPrice,label:"Original Price",rules:{required:!0,min:1},adornment:"$",errorMessage:"Original Price is required"})}),c.a.createElement(At,{component:c.a.createElement(xt,{isFullWidth:!0,control:S,errors:v,name:It.category,label:"Category",rules:{required:!1}})}),c.a.createElement(At,{component:c.a.createElement(xt,{isFullWidth:!0,control:S,errors:v,name:It.description,label:"Description",rules:{required:!1}})}),c.a.createElement(O.a,{variant:"contained",color:"primary",type:"submit"},"Submit")),c.a.createElement(re,{open:g,setOpen:R,severity:"success",message:u+" is successful!"}))}function At(e){var t=e.component,n=e.display,a=void 0===n?"initial":n;return c.a.createElement("div",null,c.a.createElement(h.a,{item:!0,xs:12,style:{display:a}},t),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement("br",null)))}!function(e){e.productId="productId",e.discountedPrice="discountedPrice",e.minOrderQnty="minOrderQnty",e.deliveryCharge="deliveryCharge",e.expiryDate="expiryDate"}(yt||(yt={})),function(e){e.productId="productId",e.name="name",e.category="category",e.description="description",e.originalPrice="originalPrice"}(It||(It={}));n(505);var wt=function e(){Object(H.a)(this,e),this.name=void 0,this.originalPrice=void 0,this.category=void 0,this.description=void 0,this.update=void 0,this.delete=void 0};function Mt(){var e;document.title="Products";var t=Object(l.c)(),n=Object(y.f)(),i=null!==(e=Object(l.d)((function(e){return e.productReducer.products})))&&void 0!==e?e:[];Object(r.useEffect)((function(){var e=Tt(2);t(e)}),[]);var o=Object.keys(new wt),u=[],p=Object(r.useState)(!1),v=Object(s.a)(p,2),f=v[0],S=v[1],C=Object(r.useState)(new lt),T=Object(s.a)(C,2),D=T[0],_=T[1],g=Object(l.d)((function(e){return e.productReducer.httpMessage}));Object(r.useEffect)((function(){if(g.includes(a.HTTP_DELETE_SUCCESS)){console.log("in productsPage",g);var e=Tt(2);t(e)}}),[g]);for(var R=function(e){var t=i[e],a=function(e){var t=new wt;return t.name=e.name,t.originalPrice=e.originalPrice,t.category=e.category,t.description=e.description,t}(t),r=t.discountSchemes.length>0,o=r?"Cannot delete product as it has dependent discount schemes":"";a.update=c.a.createElement(O.a,{size:"small",variant:"outlined",onClick:function(){return n.push("/producer/product/"+t.productId)}},"Update"),a.delete=c.a.createElement("div",{className:"tooltip__div-visible"},c.a.createElement(O.a,{color:"secondary",size:"small",variant:"outlined",disabled:r,onClick:function(){S(!0),_(t)}},"Delete",c.a.createElement("span",{className:"tooltiptext"},o))),u.push(a)},b=0;b<i.length;b++)R(b);return c.a.createElement(W.a,null,c.a.createElement(h.a,{container:!0},c.a.createElement(h.a,{item:!0,xs:10}),c.a.createElement(h.a,{item:!0,xs:2},c.a.createElement(O.a,{variant:"outlined",onClick:function(){return n.push("/producer/product/0")}},"Create Product"))),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement("br",null)),c.a.createElement(Xe,{columnNames:["Name","Original Price","Category","Description","Update","Delete"],accessors:o,data:u,title:"Products",enablePaging:!0,pageSize:5}),c.a.createElement(pt,{open:f,toggleOpen:function(){return S(!f)},content:c.a.createElement("p",null,"Confirm Delete?"),secondaryAction:function(){if(console.log("productId",D.productId),!(D.discountSchemes.length>0)){var e,n=(e=D.productId,function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.DELETE_PRODUCT_REQUEST,message:"Deleting product ..."}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/products/"+e,{method:"DELETE"});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,console.log("deletedProduct",c),n({type:a.DELETE_PRODUCT_RECEIVED,product:c,message:r.statusText,httpMessage:a.HTTP_DELETE_SUCCESS}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}());t(n),S(!1)}},secondaryActionTitle:"Delete Product"}))}var kt,Lt=function e(){Object(H.a)(this,e),this.userName="",this.passwordHash=""};function Gt(){var e;document.title="Login";var t=Object(l.c)(),n=Object(y.f)(),i=Object(r.useState)(!1),o=Object(s.a)(i,2),u=o[0],p=o[1],h=new B;h.isAuthenticated="UNTOUCHED";var v=null!==(e=Object(l.d)((function(e){return e.authReducer.authVM})))&&void 0!==e?e:h;Object(r.useEffect)((function(){"UNTOUCHED"!==v.isAuthenticated&&(v.isAuthenticated?n.push(""):p(!0))}),[v.isAuthenticated]);var f=Object(ue.b)(),S=f.errors,C=f.handleSubmit,T=f.control;return c.a.createElement(W.a,null,c.a.createElement("form",{onSubmit:C((function(e){console.log(e);var n=new Lt;n.userName=e.userName,n.passwordHash=e.passwordHash;var r=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.LOGIN_REQUEST,message:"Attempting login..."}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/auth/signIn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:if(c=t.sent,console.log("IAuthVM",c),!1!==c.isAuthenticated){t.next=18;break}return c.userName="ACCOUNT",n({type:a.LOGIN_FAILED,authVM:c,message:r.statusText,httpMessage:a.HTTP_UPDATE_SUCCESS}),t.abrupt("return");case 18:n({type:a.LOGIN_SUCCESS,authVM:c,message:r.statusText,httpMessage:a.HTTP_UPDATE_SUCCESS}),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 24:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(e){return t.apply(this,arguments)}}()}(n);t(r)}))},c.a.createElement(Ht,{component:c.a.createElement(xt,{isFullWidth:!0,control:T,errors:S,name:kt.userName,label:"UserName",variant:"outlined",rules:{required:!0},errorMessage:"Name is required"})}),c.a.createElement(Ht,{component:c.a.createElement(xt,{isFullWidth:!0,control:T,errors:S,name:kt.passwordHash,label:"Password",variant:"outlined",type:"password",rules:{required:!0},errorMessage:"Password is required"})}),c.a.createElement(O.a,{variant:"contained",color:"primary",type:"submit"},"Submit")),c.a.createElement(re,{open:u,setOpen:p,message:"Authentication failed",severity:"error"}))}function Ht(e){var t=e.component;e.display;return c.a.createElement("div",null,c.a.createElement(h.a,{item:!0,xs:12},t),c.a.createElement(h.a,{item:!0,xs:12},c.a.createElement("br",null)))}function Qt(){return c.a.createElement(W.a,null,c.a.createElement("h2",null,"An error occured"))}function Bt(e){var t=e.component,n=e.path,a=e.requiredClaims,i=void 0===a?[]:a,o=new B;localStorage.getItem("authVM")&&(o=JSON.parse(localStorage.getItem("authVM")));var l=!0===o.isAuthenticated,u=o.claims,d=Object(y.f)();l||(console.log("not authenticated"),d.push("/login"));var E=Object(r.useState)(!1),m=Object(s.a)(E,2),p=m[0],h=m[1],v=i.every((function(e){return u.includes(e)})),f=c.a.createElement(r.Fragment,null,c.a.createElement("span",null,"Not Authorized "),c.a.createElement(w.b,{to:"/login",style:{color:"white"}},c.a.createElement("b",null,"Click here to login")));return Object(r.useEffect)((function(){if(!v)return console.log("not authorized"),void h(!0)}),[v]),c.a.createElement(r.Fragment,null,v?c.a.createElement(y.a,{path:n,component:t}):c.a.createElement(Qt,null),c.a.createElement(re,{open:p,setOpen:h,message:f,severity:"warning",autoHideDuration:1e4}))}!function(e){e.userName="userName",e.passwordHash="passwordHash"}(kt||(kt={}));var Vt=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(w.a,null,c.a.createElement(V,null),c.a.createElement(y.c,null,c.a.createElement(y.a,{path:"/login",component:Gt}),c.a.createElement(y.a,{exact:!0,path:"/",component:P}),c.a.createElement(Bt,{path:"/discountScheme/:discountSchemeId",component:fe,requiredClaims:[N.CONSUMER]}),c.a.createElement(Bt,{path:"/cart",component:ct,requiredClaims:[N.CONSUMER]}),c.a.createElement(Bt,{path:"/orders",component:ot,requiredClaims:[N.CONSUMER]}),c.a.createElement(Bt,{path:"/producer/products",component:Mt,requiredClaims:[N.PRODUCER]}),c.a.createElement(Bt,{path:"/producer/product/:productId",component:Nt,requiredClaims:[N.PRODUCER]}),c.a.createElement(Bt,{path:"/producer/discountSchemes/create",component:jt,requiredClaims:[N.PRODUCER]}),c.a.createElement(Bt,{path:"/producer/discountSchemes",component:St,requiredClaims:[N.PRODUCER]}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var qt=n(79),Ft=n(416),Wt={type:"",discountSchemes:null};var $t={type:"",bid:void 0,bids:void 0,message:"Initial Message",httpMessage:"Initial Response Message"};var zt={type:"",product:void 0,products:void 0,message:"",httpMessage:""};var Jt={type:"",error:null};var Kt={type:"",identityUser:void 0,message:"Initial Message",httpMessage:"Initial Response Message",authVM:void 0};var Xt=Object(qt.c)({discountSchemeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Wt,t=arguments.length>1?arguments[1]:void 0,n=Object(at.cloneDeep)(e);switch(n.type=t.type,n.message="".concat(t.message," ").concat(new Date),n.httpMessage="".concat(t.httpMessage," ").concat(new Date),console.log("in discountSchemeReducer",n.httpMessage),t.type){case a.GET_DISCOUNTSCHEMES_REQUEST:return console.log(t.message),n;case a.GET_DISCOUNTSCHEMES_RECEIVED:console.log("GET_DISCOUNTSCHEMES_RECEIVED");var r=t.discountSchemes;return n.discountSchemes=r,n;case a.GET_DISCOUNTSCHEME_REQUEST:return console.log(t.message),n;case a.GET_DISCOUNTSCHEME_RECEIVED:console.log("ACTIONS.GET_DISCOUNTSCHEME_RECEIVED");var c=t.discountScheme;return n.discountScheme=c,n;case a.GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST:return console.log(t.message),n;case a.GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED:return console.log(t.discountSchemes),n.discountSchemes=t.discountSchemes,n;case a.CREATE_DISCOUNTSCHEME_REQUEST:return console.log(t.message),n;case a.CREATE_DISCOUNTSCHEME_RECEIVED:return n.discountScheme=t.discountScheme,n;case a.DELETE_DISCOUNTSCHEME_REQUEST:return n;case a.DELETE_DISCOUNTSCHEME_RECEIVED:return n.discountScheme=t.discountScheme,n;default:return e}},bidReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:$t,t=arguments.length>1?arguments[1]:void 0,n=Object(at.cloneDeep)(e);switch(n.type=t.type,n.message="".concat(t.message," ").concat(new Date),n.httpMessage="".concat(t.httpMessage," + ").concat(new Date),t.type){case a.ADD_BID_TO_CART_REQUEST:return n;case a.ADD_BID_TO_CART_RECEIVED:return n.bid=t.bid,n;case a.GET_BIDSOFCUSTOMER_INCART_REQUEST:return n;case a.GET_BIDSOFCUSTOMER_INCART_RECEIVED:return n.bids=t.bids,console.log(n.bids),n;case a.ADD_BID_TO_CART_REQUEST:case a.UPDATE_BID_IN_CART_REQUEST:case a.UPDATE_BID_IN_CART_RECEIVED:case a.DELETE_BID_IN_CART_REQUEST:case a.DELETE_BID_IN_CART_RECEIVED:case a.ORDER_BIDS_IN_CART_REQUEST:case a.ORDER_BIDS_IN_CART_RECEIVED:case a.GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST:return n;case a.GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED:return n.bids=t.bids,n;default:return e}},productReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0,n=Object(at.cloneDeep)(e);switch(n.type=t.type,n.message="".concat(t.message," ").concat(new Date),n.httpMessage="".concat(t.httpMessage," + ").concat(new Date),console.log("in productReducer. Latest message",n.message),console.log("in productReducer. Latest api message",n.httpMessage),t.type){case a.GET_PRODUCTS_REQUEST:return n;case a.GET_PRODUCTS_RECEIVED:return n.products=t.products,n;case a.CREATE_PRODUCT_REQUEST:return n;case a.CREATE_PRODUCT_RECEIVED:return n.product=t.product,n;case a.GET_PRODUCT_REQUEST:return n;case a.GET_PRODUCT_RECEIVED:return n.product=t.product,n;case a.UPDATE_PRODUCT_RECEIVED:return n;case a.UPDATE_PRODUCT_REQUEST:return console.log("received updatedProduct",t.product),n.product=t.product,n;case a.DELETE_PRODUCT_REQUEST:return n;case a.DELETE_PRODUCT_RECEIVED:return n.product=t.product,n;default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0,n=Object(at.cloneDeep)(e);switch(n.authVM=Object(at.cloneDeep)(t.authVM),n.type=t.type,n.message="".concat(t.message," ").concat(new Date),n.httpMessage="".concat(t.httpMessage," + ").concat(new Date),t.type){case a.LOGIN_REQUEST:return n;case a.LOGIN_SUCCESS:return localStorage.setItem("authVM",JSON.stringify(t.authVM)),n;case a.LOGIN_FAILED:return n;case a.LOGOUT:return localStorage.removeItem("authVM"),n.message=a.LOGOUT_SUCCESS,n;default:return e}},errorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.error;return n===a.CLEAR_ERROR?Jt:r?(console.log("error received in errorReducer:",r),{type:n,error:t.error}):e}}),Yt=Object(qt.e)(Xt,Object(qt.a)(Ft.a));o.a.render(c.a.createElement(l.a,{store:Yt},c.a.createElement(c.a.StrictMode,null,c.a.createElement(Vt,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[428,1,2]]]);
//# sourceMappingURL=main.262c2a86.chunk.js.map