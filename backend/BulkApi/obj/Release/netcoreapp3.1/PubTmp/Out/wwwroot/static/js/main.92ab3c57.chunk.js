(this["webpackJsonpmy-app"]=this["webpackJsonpmy-app"]||[]).push([[0],{245:function(e,t,n){e.exports=n.p+"static/media/e_commerce.3acf207a.png"},384:function(e,t){function n(e){var t=new Error("Cannot find module '"+e+"'");throw t.code="MODULE_NOT_FOUND",t}n.keys=function(){return[]},n.resolve=n,e.exports=n,n.id=384},429:function(e,t,n){e.exports=n(507)},434:function(e,t,n){},435:function(e,t,n){},443:function(e,t,n){},506:function(e,t,n){},507:function(e,t,n){"use strict";n.r(t);var a,r=n(0),c=n.n(r),i=n(20),o=n.n(i),s=(n(434),n(435),n(21)),l=n(19),u=n(15),d=n.n(u),E=n(28);function m(e,t){return{type:e,error:t}}!function(e){e.GET_DISCOUNTSCHEMES_REQUEST="GET_DISCOUNTSCHEMES_REQUEST",e.GET_DISCOUNTSCHEMES_RECEIVED="GET_DISCOUNTSCHEMES_RECEIVED",e.GET_DISCOUNTSCHEME_REQUEST="GET_DISCOUNTSCHEME_REQUEST",e.GET_DISCOUNTSCHEME_RECEIVED="GET_DISCOUNTSCHEME_RECEIVED",e.GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST="GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST",e.GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED="GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED",e.CREATE_DISCOUNTSCHEME_REQUEST="CREATE_DISCOUNTSCHEME_REQUEST",e.CREATE_DISCOUNTSCHEME_RECEIVED="CREATE_DISCOUNTSCHEME_RECEIVED",e.DELETE_DISCOUNTSCHEME_REQUEST="DELETE_DISCOUNTSCHEME_REQUEST",e.DELETE_DISCOUNTSCHEME_RECEIVED="DELETE_DISCOUNTSCHEME_RECEIVED",e.GET_BIDSOFCUSTOMER_INCART_REQUEST="GET_BIDSOFCUSTOMER_INCART_REQUEST",e.GET_BIDSOFCUSTOMER_INCART_RECEIVED="GET_BIDSOFCUSTOMER_INCART_RECEIVED",e.ADD_BID_TO_CART_REQUEST="ADD_BID_TO_CART_REQUEST",e.ADD_BID_TO_CART_RECEIVED="ADD_BID_TO_CART_RECEIVED",e.UPDATE_BID_IN_CART_REQUEST="UPDATE_BID_IN_CART_REQUEST",e.UPDATE_BID_IN_CART_RECEIVED="UPDATE_BID_IN_CART_RECEIVED",e.DELETE_BID_IN_CART_REQUEST="DELETE_BID_IN_CART_REQUEST",e.DELETE_BID_IN_CART_RECEIVED="DELETE_BID_IN_CART_RECEIVED",e.ERROR="ERROR",e.CLEAR_ERROR="CLEAR_ERROR",e.ORDER_BIDS_IN_CART_REQUEST="ORDER_BIDS_IN_CART_REQUEST",e.ORDER_BIDS_IN_CART_RECEIVED="ORDER_BIDS_IN_CART_RECEIVED",e.GET_PRODUCTS_REQUEST="GET_PRODUCTS_REQUEST",e.GET_PRODUCTS_RECEIVED="GET_PRODUCTS_RECEIVED",e.GET_PRODUCT_REQUEST="GET_PRODUCT_REQUEST",e.GET_PRODUCT_RECEIVED="GET_PRODUCT_RECEIVED",e.GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST="GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST",e.GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED="GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED",e.CREATE_PRODUCT_REQUEST="CREATE_PRODUCT_REQUEST",e.CREATE_PRODUCT_RECEIVED="CREATE_PRODUCT_RECEIVED",e.DELETE_PRODUCT_REQUEST="DELETE_PRODUCT_REQUEST",e.DELETE_PRODUCT_RECEIVED="DELETE_PRODUCT_RECEIVED",e.UPDATE_PRODUCT_REQUEST="UPDATE_PRODUCT_REQUEST",e.UPDATE_PRODUCT_RECEIVED="UPDATE_PRODUCT_RECEIVED",e.LOGIN_REQUEST="LOGIN_REQUEST",e.LOGIN_SUCCESS="LOGIN_SUCCESS",e.LOGIN_FAILED="LOGIN_FAILED",e.LOGOUT="LOGOUT",e.LOGOUT_SUCCESS="LOGOUT_SUCCESS",e.HTTP_UPDATE_SUCCESS="HTTP_UPDATE_SUCCESS",e.HTTP_READ_SUCCESS="HTTP_READ_SUCCESS",e.HTTP_CREATE_SUCCESS="HTTP_CREATE_SUCCESS",e.HTTP_DELETE_SUCCESS="HTTP_DELETE_SUCCESS",e.HTTP_UPDATE_ORDER_SUCCESS="HTTP_UPDATE_ORDER_SUCCESS"}(a||(a={}));var p=n(38),h=n(393),v=function(){function e(){Object(p.a)(this,e)}return Object(h.a)(e,null,[{key:"getAuthHeader",value:function(){try{var e=JSON.parse(localStorage.getItem("authVM")).jwt,t=new Headers;return t.append("Authorization","Bearer ".concat(e)),t.append("Content-Type","application/json"),t}catch(n){console.log(n)}}},{key:"getJWT",value:function(){if(!localStorage.getItem("authVM"))return"";var e=JSON.parse(localStorage.getItem("authVM")).jwt;return"Bearer ".concat(e)}}]),e}();function f(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST,message:"GET DiscountScheme of producer id: "+e}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/discountSchemes/producer/"+e,{headers:v.getAuthHeader()});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,n({type:a.GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED,discountSchemes:c,httpMessage:a.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}var S=n(542),C=n(535),T=n(538),g=n(537),O=n(539),D=n(540),_=n(126),R=n(73),b=n(80),I=n(160);function y(e){var t=e.title,n=e.paras,a=e.actionTitle,r=e.action,i=U();return c.a.createElement("div",null,c.a.createElement(C.a,{className:i.cardWidth},c.a.createElement(g.a,{onClick:r},c.a.createElement(T.a,{component:"img",height:"140",className:i.cardHeight,image:"e_commerce.png",title:"https://acowebs.com/impact-ecommerce-society/"})),c.a.createElement(O.a,null,c.a.createElement(R.a,{gutterBottom:!0,variant:"h5",component:"h2"},t),n),null!=r&&c.a.createElement(D.a,null,c.a.createElement(_.a,{size:"medium",color:"primary",onClick:r},a))))}var U=Object(b.a)((function(e){return Object(I.a)({backdrop:{zIndex:e.zIndex.drawer+1,color:"#fff"},cardWidth:{maxWidth:450},cardHeight:{height:140}})})),x=n(41),P=n(541),j=n(555);function A(e){var t=e.error,n=e.autoHideDuration,i=void 0===n?6e3:n,o=e.message,u=Object(l.c)(),d=Object(r.useState)(!1),E=Object(s.a)(d,2),p=E[0],h=E[1],v=function(){h(!1);var e=m(a.CLEAR_ERROR,t);u(e)};return Object(r.useEffect)((function(){t&&h(!0)}),[t]),c.a.createElement(P.a,{open:p,autoHideDuration:i,onClose:v},c.a.createElement(N,{severity:"error",onClose:v},o))}function N(e){return c.a.createElement(j.a,Object.assign({elevation:6,variant:"filled"},e))}function w(){var e,t,n=Object(l.c)(),i=Object(x.f)(),o=k(),u=null!==(e=Object(l.d)((function(e){return e.discountSchemeReducer.discountSchemes})))&&void 0!==e?e:[];console.log(u);var p=null!==(t=Object(l.d)((function(e){return e.errorReducer.error})))&&void 0!==t?t:null;Object(r.useEffect)((function(){document.title="Products";var e=function(){var e=Object(E.a)(d.a.mark((function e(t){var n,r;return d.a.wrap((function(e){for(;;)switch(e.prev=e.next){case 0:return console.log("JWT",v.getJWT()),t({type:a.GET_DISCOUNTSCHEMES_REQUEST,message:"GET DiscountSchemes..."}),e.prev=2,e.next=5,fetch("https://localhost:44397/api/discountSchemes",{headers:v.getAuthHeader()});case 5:if((n=e.sent).ok){e.next=11;break}return e.next=9,n.json();case 9:throw e.sent;case 11:return e.next=13,n.json();case 13:r=e.sent,t({type:a.GET_DISCOUNTSCHEMES_RECEIVED,discountSchemes:r,httpMessage:a.HTTP_READ_SUCCESS}),e.next=20;break;case 17:e.prev=17,e.t0=e.catch(2),t(m(a.ERROR,e.t0));case 20:case"end":return e.stop()}}),e,null,[[2,17]])})));return function(t){return e.apply(this,arguments)}}();n(e)}),[]);for(var h=[],f=function(e){var t,n,a=u[e],r="";a.expiryDate&&(r=new Date(a.expiryDate.toString()).toDateString());for(var o=null!==(t=null===(n=a.product)||void 0===n?void 0:n.name)&&void 0!==t?t:"",l=a.bids.filter((function(e){return!e.isInCart})).reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.quantity)}),0),d={Title:o,"Discounted Price":"$"+a.discountedPrice,"Remaining Bids Needed":a.minOrderQnty-l,"Expiry Date":r},E=[],m=0,p=Object.entries(d);m<p.length;m++){var v,f=Object(s.a)(p[m],2),C=f[0],T=f[1],g=c.a.createElement(R.a,{variant:"body2",color:"textSecondary",component:"p",align:"left",key:C},c.a.createElement("b",null,C,"\xa0"),T);if("Discounted Price"===C)g=c.a.createElement(R.a,{variant:"body2",color:"textSecondary",component:"p",align:"left",key:C},c.a.createElement("b",null,C,"\xa0")," $",a.discountedPrice," $",c.a.createElement("del",null,null===(v=a.product)||void 0===v?void 0:v.originalPrice));E.push(g)}var O=c.a.createElement(S.a,{item:!0,xs:12,sm:4,lg:3,key:e},c.a.createElement(y,{title:o,paras:E,actionTitle:"Add to Cart",action:function(){i.push("/discountScheme/"+a.discountSchemeId)}}));h.push(O)},C=0;C<u.length;C++)f(C);return c.a.createElement("div",null,u.length>0&&c.a.createElement(S.a,{className:o.fullWidth,container:!0,spacing:3},h),c.a.createElement(A,{error:p,message:"error fetching schemes"}))}var M,k=Object(b.a)((function(e){return Object(I.a)({typo:{fontVariant:"body2",color:"textSecondary",component:"p",align:"left"},fullWidth:{width:"100vw",margin:"auto",paddingLeft:"100px",paddingRight:"100px"}})})),H=(n(442),n(37)),L=n(554),G=n(557),Q=n(543),V=n(544);n(443);!function(e){e.PRODUCER="PRODUCER",e.CONSUMER="CONSUMER"}(M||(M={}));var B,q=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"";Object(p.a)(this,e),this.jwt="",this.isAuthenticated=!1,this.id="",this.userName="",this.email="",this.claims=[],this.userName=t};function F(){var e,t,n,i,o=W(),s=Object(x.f)(),u=Object(l.c)(),d=null!==(e=Object(l.d)((function(e){return e.authReducer.authVM})))&&void 0!==e?e:new q("ACCOUNT"),E=null!==(t=Object(l.d)((function(e){return e.authReducer.message})))&&void 0!==t?t:"";localStorage.getItem("authVM")&&(d=JSON.parse(localStorage.getItem("authVM")));return Object(r.useEffect)((function(){E===a.LOGOUT_SUCCESS&&s.push("/login")}),[E]),c.a.createElement("div",null,c.a.createElement(L.a,{expand:"lg",variant:"dark",className:o.blueBg},c.a.createElement(L.a.Brand,null,c.a.createElement(H.b,{to:"/",className:o.navLink},"BulkApi")),c.a.createElement(L.a.Toggle,{"aria-controls":"basic-navbar-nav"}),c.a.createElement(L.a.Collapse,{id:"basic-navbar-nav"},c.a.createElement(G.a,{className:"mr-auto"},(null===(n=d.claims)||void 0===n?void 0:n.includes(B.CONSUMER))&&c.a.createElement(r.Fragment,null,c.a.createElement(_.a,{color:"inherit"},c.a.createElement(H.b,{to:"/",className:o.navLink},"Products")),c.a.createElement(_.a,{color:"inherit"},c.a.createElement(H.b,{to:"/cart",className:o.navLink},"Cart")),c.a.createElement(_.a,{color:"inherit"},c.a.createElement(H.b,{to:"/orders",className:o.navLink},"Orders"))),(null===(i=d.claims)||void 0===i?void 0:i.includes(B.PRODUCER))&&c.a.createElement(r.Fragment,null,c.a.createElement(_.a,{color:"inherit"},c.a.createElement(H.b,{to:"/producer/discountSchemes",className:o.navLink},"Schemes")),c.a.createElement(_.a,{color:"inherit"},c.a.createElement(H.b,{to:"/producer/products",className:o.navLink},"Products")))),c.a.createElement(Q.a,{alignRight:!0,title:d.userName},d.isAuthenticated?c.a.createElement(V.a.Item,null,c.a.createElement(G.a.Link,{as:H.b,onClick:function(){var e=function(){var e=new q("ACCOUNT");return e.isAuthenticated="UNTOUCHED",{type:a.LOGOUT,message:"Logout ...",authVM:e}}();u(e)},to:"/login",style:{color:"black"}},"LOGOUT")):c.a.createElement(V.a.Item,null,c.a.createElement(G.a.Link,{as:H.b,to:"/login",style:{color:"black"}},"LOGIN"))))),c.a.createElement("br",null))}!function(e){e.PRODUCER="PRODUCER",e.CONSUMER="CONSUMER"}(B||(B={}));var W=Object(b.a)((function(e){return Object(I.a)({navLink:{color:"white",textDecoration:"inherit"},blueBg:{backgroundColor:"#3f51b5",textDecoration:"inherit"},dropDownLink:{color:"black",textDecoration:"inherit"}})})),$=function e(){Object(p.a)(this,e),this.discountSchemeId=0,this.minOrderQnty=0,this.discountedPrice=0,this.expiryDate=null,this.deliveryCharge=0,this.productId=0,this.product=null,this.bids=[],this.addressBidCountDict={}},z=n(547),J=n(545),K=n(399),X=n.n(K),Y=n(244),Z=n.n(Y);function ee(e){var t=e.quantity,n=e.setQuantity,a=e.size,r=void 0===a?"medium":a,i=e.align,o=void 0===i?"alignLeft":i,s=te();return c.a.createElement("div",{className:s[o]},c.a.createElement(J.a,{color:"primary","aria-label":"outlined primary button group",size:r},c.a.createElement(_.a,{onClick:function(){n(t+1)}},c.a.createElement(X.a,null)),c.a.createElement(_.a,null,t),c.a.createElement(_.a,{onClick:function(){t-1<1||n(t-1)}},c.a.createElement(Z.a,null))))}var te=Object(b.a)((function(e){return Object(I.a)({alignLeft:{display:"flex",flexDirection:"column",alignItems:"left","& > *":{margin:e.spacing(1)}},alignCenter:{display:"flex",flexDirection:"column",alignItems:"center","& > *":{margin:e.spacing(1)}},alignRight:{display:"flex",flexDirection:"column",alignItems:"right","& > *":{margin:e.spacing(1)}}})})),ne=n(245),ae=n.n(ne),re=function e(){Object(p.a)(this,e),this.bidId=0,this.isInCart=!1,this.quantity=0,this.bidSuccessDate=null,this.collectionAddress="",this.discountSchemeId=0,this.discountScheme=null,this.customerId=0,this.currentTotalBids=0,this.addressBidCountDict={}};function ce(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return console.log("in thunk. bid to update",e.bidId),n({type:a.UPDATE_BID_IN_CART_REQUEST,messages:["Request to update bid in cart"]}),t.prev=2,t.next=5,fetch("https://localhost:44397/api/bids/updatecart",{method:"PUT",headers:v.getAuthHeader(),body:JSON.stringify(e)});case 5:if((r=t.sent).ok){t.next=11;break}return t.next=9,r.json();case 9:throw t.sent;case 11:return t.next=13,r.json();case 13:c=t.sent,n({type:a.UPDATE_BID_IN_CART_RECEIVED,bid:c,message:r.statusText,httpMessage:a.HTTP_UPDATE_SUCCESS}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(2),n(m(a.ERROR,t.t0));case 20:case"end":return t.stop()}}),t,null,[[2,17]])})));return function(e){return t.apply(this,arguments)}}()}function ie(e){var t=e.open,n=e.setOpen,a=e.message,r=e.severity,i=e.cleanUp,o=e.autoHideDuration,s=void 0===o?6e3:o,l=function(e){n(!1),i&&i()};return c.a.createElement(P.a,{open:t,autoHideDuration:s,onClose:function(){return l()}},c.a.createElement(oe,{onClose:function(){return l()},severity:r},a))}function oe(e){return c.a.createElement(j.a,Object.assign({elevation:6,variant:"filled"},e))}var se=n(296),le=n(297),ue=n(303),de=n(361),Ee=n(78),me=n(298);function pe(e){var t=e.title,n=e.state,a=e.selectListItems,r=e.handleChange,i=e.isError,o=void 0!==i&&i,s=e.formHelperText,l=void 0===s?"":s,u=he();return c.a.createElement(se.a,{className:u.formControl,error:o},c.a.createElement(le.a,{id:"demo-simple-select-label"},t),c.a.createElement(ue.a,{labelId:"demo-simple-select-label",autoWidth:!0,value:n,onChange:function(e){return r(e)}},c.a.createElement(de.a,{value:void 0,divider:!0},c.a.createElement("em",null,"None")),a.map((function(e,t){return c.a.createElement(de.a,{key:t,value:e.value},e.text)}))),o&&c.a.createElement(me.a,null,l))}var he=Object(b.a)((function(e){return Object(I.a)({formControl:{minWidth:150},selectEmpty:{marginTop:e.spacing(2)}})})),ve=function e(){var t=arguments.length>0&&void 0!==arguments[0]?arguments[0]:"",n=arguments.length>1?arguments[1]:void 0;Object(p.a)(this,e),this.disabled=!1,this.selected=!1,this.text="",this.value=void 0,this.text=t,this.value=n};function fe(e){var t=e.textDict,n=e.color,a=void 0===n?"textSecondary":n;console.log(t);for(var r=[],i=0,o=Object.entries(t);i<o.length;i++){var l=Object(s.a)(o[i],2),u=l[0],d=l[1],E=c.a.createElement(R.a,{variant:"body2",color:a,component:"p",align:"left",key:u},c.a.createElement("b",null,u,"\xa0"),d);r.push(E)}return c.a.createElement(z.a,null,r)}function Se(e){var t,n,i,o,u,p,h=e.discountSchemeId,f=e.MODE,C=e.bidIdToUpdate,g=void 0===C?0:C,O=Object(l.c)(),D=Object(r.useState)(1),b=Object(s.a)(D,2),I=b[0],y=b[1],U=Object(r.useState)(!1),x=Object(s.a)(U,2),P=x[0],j=x[1];Object(r.useEffect)((function(){var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.GET_DISCOUNTSCHEME_REQUEST,message:"GET DiscountScheme with id: "+e}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/discountSchemes/"+e,{headers:v.getAuthHeader()});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,n({type:a.GET_DISCOUNTSCHEME_RECEIVED,discountScheme:c,httpMessage:a.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(h);O(e)}),[h]);var A=null!==(t=Object(l.d)((function(e){return e.discountSchemeReducer.discountScheme})))&&void 0!==t?t:new $;console.log("in DiscountSchemeDetailPage",A);var N=A.addressBidCountDict,w=[];for(var M in N){var k=new ve(M,M);w.push(k)}var H=Object(r.useState)(""),L=Object(s.a)(H,2),G=L[0],Q=L[1],V=null===N||void 0===N?void 0:N.address,B=V?A.deliveryCharge/(V+1):A.deliveryCharge,q="";A.expiryDate&&(q=new Date(A.expiryDate.toString()).toDateString());var F=A.bids.filter((function(e){return!e.isInCart})).reduce((function(e,t){return e+(null===t||void 0===t?void 0:t.quantity)}),0),W={"Expiry Date":q},K={Description:null===(n=A.product)||void 0===n?void 0:n.description},X={"Discounted Price":"$"+A.discountedPrice},Y={"Original Price":null!==(i="$"+(null===(o=A.product)||void 0===o?void 0:o.originalPrice))&&void 0!==i?i:"$"},Z={"Remaining Bids Needed":A.minOrderQnty-F},te={"Min Collective Quantity":A.minOrderQnty,"Current Total Bids":F},ne={"Delivery Charge":"$"+A.deliveryCharge,"Current bids at collection point":V},oe={"Current Average Delivery charge":"approx $"+B};return c.a.createElement(z.a,{maxWidth:"sm"},c.a.createElement(R.a,{color:"primary",variant:"h5",align:"left"},null!==(u=null===(p=A.product)||void 0===p?void 0:p.name)&&void 0!==u?u:""),c.a.createElement(T.a,{component:"img",image:ae.a,title:"https://acowebs.com/impact-ecommerce-society/"}),c.a.createElement("br",null),c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(fe,{textDict:K}),c.a.createElement("hr",null)),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(fe,{textDict:W,color:"textPrimary"}),c.a.createElement("hr",null)),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement(fe,{textDict:X,color:"textPrimary"}),c.a.createElement("hr",null)),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement(fe,{textDict:Y}),c.a.createElement("hr",null)),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement(fe,{textDict:Z,color:"textPrimary"})),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement(fe,{textDict:te}))),c.a.createElement("hr",null),c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(pe,{title:"Delivery",state:G,selectListItems:w,handleChange:function(e){var t=e.target.value;console.log(t),Q(t)}})),c.a.createElement(S.a,{item:!0,xs:8},c.a.createElement(fe,{textDict:ne}),c.a.createElement(fe,{textDict:oe,color:"textPrimary"}))),c.a.createElement("hr",null),c.a.createElement(ee,{quantity:I,setQuantity:y,align:"alignCenter"}),c.a.createElement(J.a,{size:"medium"},c.a.createElement(_.a,{onClick:function(){var e=new re;e.customerId=1,e.collectionAddress=G,e.quantity=I;var t=null;"CREATE"===f?(e.discountSchemeId=A.discountSchemeId,t=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.ADD_BID_TO_CART_REQUEST,message:"Making post request to add bid to cart ..."}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/bids/addcart",{method:"POST",headers:v.getAuthHeader(),body:JSON.stringify(e)});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,n({type:a.ADD_BID_TO_CART_RECEIVED,bid:c,message:r.statusText,httpMessage:a.HTTP_CREATE_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(e)):"UPDATE"===f&&(e.bidId=g,t=ce(e)),O(t),j(!0)},color:"primary",variant:"contained",disabled:!G||I<1},"Add To Cart")),c.a.createElement(ie,{open:P,setOpen:j,message:"Bid successfully created",severity:"success"}))}function Ce(){var e=Object(x.g)(),t=parseInt(e.discountSchemeId);return c.a.createElement(Se,{discountSchemeId:t,MODE:"CREATE"})}var Te=n(40),ge=n(299),Oe=n.n(ge),De=n(404),_e=n.n(De),Re=n(414),be=n.n(Re),Ie=n(405),ye=n.n(Ie),Ue=n(412),xe=n.n(Ue),Pe=n(265),je=n.n(Pe),Ae=n(307),Ne=n.n(Ae),we=n(406),Me=n.n(we),ke=n(407),He=n.n(ke),Le=n(409),Ge=n.n(Le),Qe=n(410),Ve=n.n(Qe),Be=n(411),qe=n.n(Be),Fe=n(408),We=n.n(Fe),$e=n(413),ze=n.n($e),Je=n(415),Ke=n.n(Je),Xe=n(256),Ye=n.n(Xe);function Ze(e){for(var t=e.title,n=e.data,a=e.columnNames,r=e.accessors,i=(e.handleChecked,e.idColumnAccessorName),o=void 0===i?"":i,s=e.pageSize,l=void 0===s?10:s,u=(e.actionIcon,e.enablePaging),d=void 0!==u&&u,E=e.enableSearch,m=void 0!==E&&E,p=(e.actionMessage,e.enableSelection),h=void 0!==p&&p,v=e.detailPanelFieldName,f=void 0===v?"":v,S=e.enabledDetailPanel,C=void 0!==S&&S,T=[],g=0;g<a.length;g++){var O=a[g],D=r[g],_={title:O,field:D,hidden:D===o};T.push(_)}var R=et();return c.a.createElement("div",null,c.a.createElement(Oe.a,{icons:tt,title:t,columns:T,data:n,options:{selection:h,pageSize:l,search:m,paging:d,rowStyle:{height:"100px"}},detailPanel:[function(e){return{disabled:!C,icon:function(){return c.a.createElement(je.a,{className:C?R.display:R.displayNone})},render:function(){return function(e,t){return console.log(e),e[t]}(e,f)}}}]}))}var et=Object(b.a)((function(e){return Object(I.a)({displayNone:{display:"none"},display:{display:"initial"}})})),tt={Add:Object(r.forwardRef)((function(e,t){return c.a.createElement(_e.a,Object.assign({},e,{ref:t}))})),Check:Object(r.forwardRef)((function(e,t){return c.a.createElement(ye.a,Object.assign({},e,{ref:t}))})),Clear:Object(r.forwardRef)((function(e,t){return c.a.createElement(Ne.a,Object.assign({},e,{ref:t}))})),Delete:Object(r.forwardRef)((function(e,t){return c.a.createElement(Me.a,Object.assign({},e,{ref:t}))})),DetailPanel:Object(r.forwardRef)((function(e,t){return c.a.createElement(je.a,Object.assign({},e,{ref:t}))})),Edit:Object(r.forwardRef)((function(e,t){return c.a.createElement(He.a,Object.assign({},e,{ref:t}))})),Export:Object(r.forwardRef)((function(e,t){return c.a.createElement(We.a,Object.assign({},e,{ref:t}))})),Filter:Object(r.forwardRef)((function(e,t){return c.a.createElement(Ge.a,Object.assign({},e,{ref:t}))})),FirstPage:Object(r.forwardRef)((function(e,t){return c.a.createElement(Ve.a,Object.assign({},e,{ref:t}))})),LastPage:Object(r.forwardRef)((function(e,t){return c.a.createElement(qe.a,Object.assign({},e,{ref:t}))})),NextPage:Object(r.forwardRef)((function(e,t){return c.a.createElement(je.a,Object.assign({},e,{ref:t}))})),PreviousPage:Object(r.forwardRef)((function(e,t){return c.a.createElement(xe.a,Object.assign({},e,{ref:t}))})),ResetSearch:Object(r.forwardRef)((function(e,t){return c.a.createElement(Ne.a,Object.assign({},e,{ref:t}))})),Search:Object(r.forwardRef)((function(e,t){return c.a.createElement(ze.a,Object.assign({},e,{ref:t}))})),SortArrow:Object(r.forwardRef)((function(e,t){return c.a.createElement(be.a,Object.assign({},e,{ref:t}))})),ThirdStateCheck:Object(r.forwardRef)((function(e,t){return c.a.createElement(Z.a,Object.assign({},e,{ref:t}))})),ViewColumn:Object(r.forwardRef)((function(e,t){return c.a.createElement(Ke.a,Object.assign({},e,{ref:t}))})),AddShoppingCartIcon:Object(r.forwardRef)((function(e,t){return c.a.createElement(Ye.a,Object.assign({},e,{ref:t}))}))},nt=n(387),at=n(158);function rt(e){var t=e.bids,n=e.rowIds,a=e.handleOrder;console.log("in orderCheckOut",t);var r=t.filter((function(e){return n.includes(e.bidId)})),i=r.map((function(e){var t,n,a=e.addressBidCountDict[e.collectionAddress],r=null!==(t=null===e||void 0===e||null===(n=e.discountScheme)||void 0===n?void 0:n.deliveryCharge)&&void 0!==t?t:0;return a?r/a:r})).reduce((function(e,t){return e+t}),0),o=r.reduce((function(e,t){var n,a;return e+t.quantity*(null!==(n=null===(a=t.discountScheme)||void 0===a?void 0:a.discountedPrice)&&void 0!==n?n:0)}),0),s=r.reduce((function(e,t){var n;return null!==(n=e+t.quantity)&&void 0!==n?n:0}),0);return c.a.createElement(at.a,null,c.a.createElement(S.a,{container:!0,spacing:3},c.a.createElement(S.a,{item:!0,xs:3}),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement(R.a,{variant:"body1",align:"center",color:"textSecondary",paragraph:!0},c.a.createElement("b",null,"Total Quantity: "),s),c.a.createElement(R.a,{variant:"body1",align:"center",color:"textSecondary",paragraph:!0},c.a.createElement("b",null,"Total Price: "),"$",o),c.a.createElement(R.a,{variant:"body1",align:"center",color:"textSecondary",paragraph:!0},c.a.createElement("b",null,"Total Delivery Charge: "),"$",i),c.a.createElement(R.a,{variant:"body1",align:"center",color:"secondary",paragraph:!0},c.a.createElement("b",null,"Grand Total: "),"$",i+s)),c.a.createElement(S.a,{item:!0,xs:3,alignContent:"flex-end"},c.a.createElement(_.a,{color:"secondary",size:"large",variant:"contained",onClick:a,disabled:r.length<1},"Order Bids"))))}var ct=n(64),it=function e(){Object(p.a)(this,e),this.bidId=void 0,this.checkbox=void 0,this.name=void 0,this.discountedPrice=void 0,this.updateCartComponent=void 0,this.collectionAddress=void 0,this.deliveryCharge=void 0,this.deleteButton=void 0,this.detailPanel=void 0};function ot(){var e,t,n=Object(x.f)(),i=Object(l.c)(),o=Object(r.useState)(!1),u=Object(s.a)(o,2),p=u[0],h=u[1],f=Object(r.useState)(""),C=Object(s.a)(f,2),T=C[0],g=C[1],O=function(e,t){h(e),g(t)},D=null!==(e=Object(l.d)((function(e){return e.bidReducer.bids})))&&void 0!==e?e:[],R=Object(r.useState)([]),b=Object(s.a)(R,2),I=b[0],y=b[1];Object(r.useEffect)((function(){y(Object(ct.cloneDeep)(D))}),[D.length]),console.log("bids received",D),Object(r.useEffect)((function(){document.title="Cart";var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.GET_BIDSOFCUSTOMER_INCART_REQUEST,messages:["Fetching bids in cart for customer "+e]}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/bids/cart/"+e,{headers:v.getAuthHeader()});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,n({type:a.GET_BIDSOFCUSTOMER_INCART_RECEIVED,bids:c,message:r.statusText,httpMessage:a.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(1);i(e)}),[]);var U=Object(r.useState)([]),P=Object(s.a)(U,2),j=P[0],A=P[1],N=null!==(t=Object(l.d)((function(e){return e.bidReducer.httpMessage})))&&void 0!==t?t:"";Object(r.useEffect)((function(){if(N.includes(a.HTTP_UPDATE_SUCCESS)||N.includes(a.HTTP_DELETE_SUCCESS));N.includes(a.HTTP_UPDATE_ORDER_SUCCESS)&&(console.log(N),n.push("/orders"))}),[N]);for(var w=I.map((function(e){return function(e){var t,n,a,r,i,o,s,l=null===(t=e.discountScheme)||void 0===t?void 0:t.discountedPrice,u=null===(n=e.discountScheme)||void 0===n||null===(a=n.product)||void 0===a?void 0:a.originalPrice,d=new it;d.bidId=e.bidId,d.discountedPrice="$".concat(l," (Save $").concat(u-l,")"),d.name=null===(r=e.discountScheme)||void 0===r||null===(i=r.product)||void 0===i?void 0:i.name;var E=e.addressBidCountDict[e.collectionAddress],m=null!==(o=null===e||void 0===e||null===(s=e.discountScheme)||void 0===s?void 0:s.deliveryCharge)&&void 0!==o?o:0,p=E?m/(E+1):m;return d.deliveryCharge=c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement("span",null,"$".concat(p))),c.a.createElement(S.a,{item:!0,xs:6},c.a.createElement("span",{style:{borderBottom:"1px solid black",display:"block",fontSize:"12px"}},"$",m),c.a.createElement("span",{style:{fontSize:"12px"}},E," other bids here"))),d}(e)})),M=function(e){var t,n,r,o,s,l,u=I[e],p=u.quantity,h=function(t,n){var a=Object(ct.cloneDeep)(D),r=a[e];r.quantity=t,r.collectionAddress=n,y(a);var c=ce(r);i(c),O(!0,"bid added to cart")},f="";(null===(t=u.discountScheme)||void 0===t?void 0:t.expiryDate)&&(f=new Date(u.discountScheme.expiryDate.toString()).toDateString());w[e].updateCartComponent=c.a.createElement(ee,{quantity:p,setQuantity:function(e){h(e,u.collectionAddress)},size:"small"}),w[e].checkbox=c.a.createElement(nt.a,{size:"small",onChange:function(){var e=u.bidId;if(j.includes(e)){var t=j.filter((function(t){return t!==e}));A(t)}else A([].concat(Object(Te.a)(j),[e]))}}),w[e].deleteButton=c.a.createElement(_.a,{size:"small",variant:"contained",color:"primary",onClick:function(){var t=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.DELETE_BID_IN_CART_REQUEST,messages:["deleting bids in cart with bidId"+e]}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/bids/cart/"+e,{method:"DELETE",headers:v.getAuthHeader()});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:n({type:a.DELETE_BID_IN_CART_RECEIVED,message:r.statusText,httpMessage:a.HTTP_DELETE_SUCCESS}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()}(u.bidId);i(t),O(!0,"item deleted");var n=Object(ct.cloneDeep)(I).filter((function(t,n){return n!=e}));console.log(I,n),y(n)}},"Delete");var C=u.addressBidCountDict,T=[];for(var g in C){var R=new ve(g,g);R.selected=u.collectionAddress===g,T.push(R)}w[e].collectionAddress=c.a.createElement(pe,{title:"Delivery",state:u.collectionAddress,selectListItems:T,handleChange:function(e){var t=e.target.value;h(u.quantity,t)}});var b={Description:null===(n=u.discountScheme)||void 0===n||null===(r=n.product)||void 0===r?void 0:r.description,"Bid Expiry Date":f},U={"Min Order Quantity":null===(o=u.discountScheme)||void 0===o?void 0:o.minOrderQnty,"Current total bids":u.currentTotalBids,"Remaining bids required":(null===(s=u.discountScheme)||void 0===s?void 0:s.minOrderQnty)-u.currentTotalBids},x={"Delivery Charge":"$"+(null===(l=u.discountScheme)||void 0===l?void 0:l.deliveryCharge)};w[e].detailPanel=c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(fe,{textDict:b})),c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(fe,{textDict:U})),c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(fe,{textDict:x})))},k=0;k<I.length;k++)M(k);var H=Object.keys(new it);H=H.filter((function(e){return"detailPanel"!==e}));return c.a.createElement(z.a,{maxWidth:"xl"},c.a.createElement(rt,{bids:I,rowIds:j,handleOrder:function(){var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.ORDER_BIDS_IN_CART_REQUEST,messages:["ordering bids in cart "+e.toString()]}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/bids/cart/order",{method:"PUT",headers:v.getAuthHeader(),body:JSON.stringify(e)});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:n({type:a.ORDER_BIDS_IN_CART_RECEIVED,message:r.statusText,httpMessage:a.HTTP_UPDATE_ORDER_SUCCESS}),t.next=16;break;case 13:t.prev=13,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 16:case"end":return t.stop()}}),t,null,[[1,13]])})));return function(e){return t.apply(this,arguments)}}()}(I.filter((function(e){return j.includes(e.bidId)})));i(e)}}),c.a.createElement("br",null),c.a.createElement(Ze,{data:w,columnNames:["BidId","Check Box","Name","Price per Item","Quantity","Collection Address","Average Delivery Charge","Remove"],accessors:H,title:"Cart",idColumnAccessorName:"bidId",actionMessage:"Make Order",actionIcon:Ye.a,enabledDetailPanel:!0,detailPanelFieldName:"detailPanel"}),c.a.createElement(ie,{open:p,setOpen:h,message:T,severity:"success"}))}var st=function e(){Object(p.a)(this,e),this.name=void 0,this.discountedPrice=void 0,this.quantity=void 0,this.deliveryCharge=void 0,this.collectionAddress=void 0,this.remainingBidsRequired=void 0,this.bidExpiryDate=void 0,this.bidStatus=void 0};function lt(){var e;document.title="Orders";var t=Object(l.c)(),n=null!==(e=Object(l.d)((function(e){return e.bidReducer.bids})))&&void 0!==e?e:[];Object(r.useEffect)((function(){var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST,messages:["getting  PendingOrSuccessfulBids of customer "+e]}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/bids/orders/1",{headers:v.getAuthHeader()});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,console.log("in thunk",c),n({type:a.GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED,bids:c,message:r.statusText,httpMessage:a.HTTP_READ_SUCCESS}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}()}(1);t(e)}),[]);var i=Object.keys(new st),o=n.map((function(e){return function(e){var t,n,a,r,c,i,o,s,l=null===(t=e.discountScheme)||void 0===t?void 0:t.discountedPrice,u=null===(n=e.discountScheme)||void 0===n||null===(a=n.product)||void 0===a?void 0:a.originalPrice,d=null===(r=e.discountScheme)||void 0===r?void 0:r.minOrderQnty,E=e.currentTotalBids;console.log("remainingBidsRequired",d,E,d-E,"bidId: "+e.bidId);var m=new st;m.quantity=e.quantity+"",m.collectionAddress=e.collectionAddress,m.discountedPrice="$".concat(l," (Save $").concat(u-l,")"),m.deliveryCharge="$"+(null===(c=e.discountScheme)||void 0===c?void 0:c.deliveryCharge),m.name=null===(i=e.discountScheme)||void 0===i||null===(o=i.product)||void 0===o?void 0:o.name,m.remainingBidsRequired=d-E;var p=new Date(null===(s=e.discountScheme)||void 0===s?void 0:s.expiryDate);m.bidExpiryDate=p.toDateString(),null!=e.bidSuccessDate?m.bidStatus="SUCCESS":new Date>p?m.bidStatus="FAILED":m.bidStatus="PENDING";return m}(e)}));return c.a.createElement(z.a,{maxWidth:"lg"},c.a.createElement(Ze,{columnNames:["Name","Discounted Price Per Item","Quantity","Delivery Charge","Collection Address","Remaining Bids Required","Bid Expiry Date","Bid Status"],accessors:i,data:o,title:"Submitted Bids",enablePaging:!0,pageSize:5}))}var ut=n(162),dt=function e(){Object(p.a)(this,e),this.productId=0,this.name="",this.category="",this.description="",this.originalPrice=0,this.producerId=0,this.discountSchemes=[]},Et=n(521),mt=n(524),pt=n(523),ht=n(552);function vt(e){var t=e.open,n=e.toggleOpen,a=e.title,r=e.content,i=e.actionTitle,o=e.action,s=e.showPicture,l=void 0!==s&&s,u=e.secondaryActionTitle,d=e.secondaryAction;return c.a.createElement(Et.a,{open:t,onClose:n,"aria-labelledby":"form-dialog-title",maxWidth:"sm",fullWidth:!0},c.a.createElement(ht.a,{id:"form-dialog-title"},a),c.a.createElement(pt.a,null,l&&c.a.createElement(T.a,{component:"img",image:ae.a,title:"https://acowebs.com/impact-ecommerce-society/"}),c.a.createElement("br",null),r),c.a.createElement(z.a,null,c.a.createElement(S.a,{container:!0,spacing:0},c.a.createElement(S.a,{item:!0,xs:8}),c.a.createElement(S.a,{item:!0,xs:4},i&&c.a.createElement(mt.a,null,c.a.createElement(_.a,{onClick:o,color:"primary",variant:"outlined"},i)))),c.a.createElement(S.a,{container:!0,spacing:0},c.a.createElement(S.a,{item:!0,xs:4},u&&c.a.createElement(mt.a,null,c.a.createElement(_.a,{onClick:d,color:"secondary",variant:"outlined"},u))),c.a.createElement(S.a,{item:!0,xs:4}),c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(mt.a,null,c.a.createElement(_.a,{onClick:n,color:"primary",variant:"outlined"},"Close"))))))}var ft=n(558),St=n(251),Ct=function e(){Object(p.a)(this,e),this.name=void 0,this.discountedPrice=void 0,this.deliveryCharge="0",this.minOrderQnty=0,this.currentBids=0,this.bidExpiryDate="",this.bidStatus=void 0,this.delete=void 0};function Tt(){var e,t;document.title="Schemes";var n=Object(l.c)(),i=Object(x.f)(),o=null!==(e=Object(l.d)((function(e){return e.discountSchemeReducer.discountSchemes})))&&void 0!==e?e:[];Object(r.useEffect)((function(){var e=f(2);n(e)}),[]);var u=o.map((function(e){var t;return null!==(t=e.product)&&void 0!==t?t:new dt}));u=Object(ct.uniqBy)(u,(function(e){return e.name}));var p=Object(r.useState)([]),h=Object(s.a)(p,2),C=h[0],T=h[1];Object(r.useEffect)((function(){console.log(o),T(o)}),[o.length]);var g=Object(r.useState)(),O=Object(s.a)(g,2),D=O[0],R=O[1],b=["SUCCESS","PENDING","FAILED"].map((function(e){return new ve(e,e)})),I=Object(r.useState)(""),y=Object(s.a)(I,2),U=y[0],P=y[1];Object(r.useEffect)((function(){var e=Object(ct.cloneDeep)(o);e=e.filter((function(e){return!D||gt(e)===D})).filter((function(e){var t,n,a;return!U||(null===(t=e.product)||void 0===t||null===(n=t.name)||void 0===n||null===(a=n.toLowerCase())||void 0===a?void 0:a.includes(U.toLowerCase()))})),T(e)}),[D,U]);var j=Object(r.useState)(!1),A=Object(s.a)(j,2),N=A[0],w=A[1],M=Object(r.useState)(new dt),k=Object(s.a)(M,2),H=k[0],L=k[1],G={Name:H.name,"Original Price":"$"+H.originalPrice,Category:H.category,Description:H.description},Q=c.a.createElement(fe,{textDict:G}),V=[],B=Object(r.useState)(!1),q=Object(s.a)(B,2),F=q[0],W=q[1],J=Object(r.useState)(new $),K=Object(s.a)(J,2),X=K[0],Y=K[1],Z=null!==(t=Object(l.d)((function(e){return e.discountSchemeReducer.httpMessage})))&&void 0!==t?t:"";console.log("in ProductPage",Z),Object(r.useEffect)((function(){if(Z.includes(a.HTTP_DELETE_SUCCESS)){var e=f(2);n(e)}}),[Z]);var ee,te=Object(ut.a)(C);try{var ne=function(){var e,t=ee.value,n=function(e){var t,n=new Ct;if(null==e)return n;var a=e.discountedPrice,r=null===(t=e.product)||void 0===t?void 0:t.originalPrice;n.discountedPrice=c.a.createElement("span",null,"$",a," ",c.a.createElement("del",null,"$",r));var i=new Date(e.expiryDate);return n.bidExpiryDate=i.toDateString(),n.deliveryCharge="$"+e.deliveryCharge,n.currentBids=e.bids.filter((function(e){return!e.isInCart})).reduce((function(e,t){return e+t.quantity}),0),n.minOrderQnty=e.minOrderQnty,n.bidStatus=gt(e),n}(t),a=t.bids.length>0,r=a?"Cannot delete scheme as it has dependent bids":"";n.name=c.a.createElement(_.a,{onClick:function(){var e,n=null!==(e=C.map((function(e){return e.product})).find((function(e){return(null===e||void 0===e?void 0:e.productId)===t.productId})))&&void 0!==e?e:new dt;L(n),w(!N)},size:"small",variant:"outlined"},null===(e=t.product)||void 0===e?void 0:e.name),n.delete=c.a.createElement("div",{className:"tooltip__div-visible"},c.a.createElement(_.a,{size:"small",variant:"outlined",color:"secondary",disabled:a,onClick:function(){Y(t),W(!0)}},"Delete",c.a.createElement("span",{className:"tooltiptext"},r))),V.push(n)};for(te.s();!(ee=te.n()).done;)ne()}catch(re){te.e(re)}finally{te.f()}var ae=Object.keys(new Ct);return c.a.createElement(z.a,{maxWidth:"lg"},c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:2},c.a.createElement(pe,{title:"Status",state:D,selectListItems:b,handleChange:function(e){var t=e.target.value;R(t)}})),c.a.createElement(S.a,{item:!0,xs:3},c.a.createElement(ft.a,{id:"combo-box-demo",options:u,getOptionLabel:function(e){var t;return null!==(t=e.name)&&void 0!==t?t:""},style:{width:300},onInputChange:function(e,t){return n=t,console.log(n),void P(n);var n},renderInput:function(e){return c.a.createElement(St.a,Object.assign({},e,{label:"Products",variant:"outlined"}))}})),c.a.createElement(S.a,{item:!0,xs:5}),c.a.createElement(S.a,{item:!0,xs:2},c.a.createElement(_.a,{onClick:function(){return i.push("/producer/discountSchemes/create")},variant:"contained",color:"primary"},"Create Scheme"))),c.a.createElement("br",null),c.a.createElement(Ze,{columnNames:["Name","Discounted Price","Delivery Charge","Min Order Qnty","Current Bids","Expiry Date","Bid Status","Delete"],accessors:ae,data:V,title:"Discount Schemes",enablePaging:!0,pageSize:5}),c.a.createElement(vt,{open:N,toggleOpen:function(){return w(!N)},content:Q,showPicture:!0}),c.a.createElement(vt,{open:F,toggleOpen:function(){return W(!F)},content:c.a.createElement("p",null,"Confirm Delete?"),secondaryAction:function(){if(!(X.bids.length>0)){console.log("discountSchemeId",X.discountSchemeId);var e,t=(e=X.discountSchemeId,function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.DELETE_DISCOUNTSCHEME_REQUEST,message:"Deleting Discount Scheme"}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/discountSchemes/"+e,{method:"DELETE",headers:v.getAuthHeader()});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,n({type:a.DELETE_DISCOUNTSCHEME_RECEIVED,discountScheme:c,httpMessage:a.HTTP_DELETE_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}());n(t),W(!1)}},secondaryActionTitle:"Delete Product"}))}function gt(e){var t=new Date(e.expiryDate),n=e.bids.some((function(e){return null!=e.bidSuccessDate})),a=t<new Date;return n?"SUCCESS":!n&&a?"FAILED":"PENDING"}function Ot(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.GET_PRODUCTS_REQUEST,message:"Getting products of producer ..."}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/products/producer/"+e,{headers:v.getAuthHeader()});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,n({type:a.GET_PRODUCTS_RECEIVED,products:c,message:r.statusText,httpMessage:a.HTTP_READ_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}var Dt=n(228),_t=n(31),Rt=n(291),bt=n(416);function It(e){var t=e.control,n=e.errors,a=e.label,r=e.name,i=e.defaultValue,o=void 0===i?"":i,s=e.errorMessage,l=void 0===s?"":s,u=e.rules,d=void 0===u?{}:u,E=null!=n[r],m=E?l:"";return c.a.createElement(Ee.a,{name:r,defaultValue:o,control:t,rules:d,render:function(e){return c.a.createElement(yt,Object.assign({},e,{label:a,error:E,helperText:m}))}})}function yt(e){var t=e.label,n=e.onChange,a=e.value,r=e.error,i=void 0!==r&&r,o=e.helperText,s=void 0===o?"":o;return a||(a=new Date),c.a.createElement(_t.a,{utils:Dt.default},c.a.createElement(Rt.b,{error:i,helperText:s,disableToolbar:!0,variant:"inline",format:"dd/MM/yyyy",margin:"normal",id:Object(bt.v4)(),label:t,value:a,onChange:n,KeyboardButtonProps:{"aria-label":"change date"}}))}var Ut,xt,Pt=n(301);function jt(e){var t=e.label,n=e.name,a=e.defaultValue,r=void 0===a?"":a,i=e.isFullWidth,o=void 0!==i&&i,s=e.variant,l=void 0===s?"standard":s,u=e.type,d=void 0===u?"text":u,E=e.adornment,m=void 0===E?null:E,p=e.control,h=e.errors,v=e.errorMessage,f=void 0===v?"":v,S=e.rules,C=void 0===S?{}:S;console.log("errors",h);var T=null!=h[n],g=T?f:"";return c.a.createElement("div",null,c.a.createElement(Ee.a,{name:n,defaultValue:r,control:p,rules:C,render:function(e){return c.a.createElement(St.a,Object.assign({},e,{label:t,error:T,helperText:g,fullWidth:o,variant:l,type:d,InputProps:{startAdornment:m?c.a.createElement(Pt.a,{position:"start"},m):null}}))}}))}function At(){var e,t,n;document.title="Create Discount Scheme";var i=Object(l.c)(),o=Object(x.f)(),s=null!==(e=Object(l.d)((function(e){return e.productReducer.products})))&&void 0!==e?e:[];s.map((function(e){return new ve(e.name,e.productId)}));Object(r.useEffect)((function(){var e=Ot(2);i(e)}),[]);var u=Object(Ee.b)(),p=u.errors,h=u.handleSubmit,f=u.control,C=u.getValues,T=(0,u.watch)(Ut.productId,0),g=null!==(t=s.find((function(e){return e.productId===T})))&&void 0!==t?t:new dt,O={"Original Price":"$"+g.originalPrice,Description:g.description};console.log("watchProductId",T);var D=null!==(n=Object(l.d)((function(e){return e.discountSchemeReducer.httpMessage})))&&void 0!==n?n:"";Object(r.useEffect)((function(){D.includes(a.HTTP_CREATE_SUCCESS)&&o.push("/producer/discountSchemes")}),[D]);return c.a.createElement(z.a,{maxWidth:"md"},c.a.createElement("form",{onSubmit:h((function(e){var t=C([Ut.productId,Ut.discountedPrice,Ut.minOrderQnty,Ut.deliveryCharge,Ut.expiryDate]),n=t.productId,r=t.discountedPrice,c=t.minOrderQnty,o=t.deliveryCharge,s=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.CREATE_DISCOUNTSCHEME_REQUEST,message:"Creating Discount Scheme"}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/discountSchemes",{method:"POST",headers:v.getAuthHeader(),body:JSON.stringify(e)});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,n({type:a.CREATE_DISCOUNTSCHEME_RECEIVED,discountScheme:c,httpMessage:a.HTTP_CREATE_SUCCESS}),t.next=19;break;case 16:t.prev=16,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 19:case"end":return t.stop()}}),t,null,[[1,16]])})));return function(e){return t.apply(this,arguments)}}()}(function(e,t,n,a,r){var c=new $;return c.productId=e,c.minOrderQnty=t,c.discountedPrice=n,c.expiryDate=a,c.deliveryCharge=r,c}(n,c,r,t.expiryDate,o));i(s)}))},c.a.createElement(S.a,{container:!0,justify:"flex-start"},c.a.createElement(S.a,{item:!0,xs:4},c.a.createElement(Ee.a,{control:f,name:Ut.productId,rules:{required:!0},render:function(e){var t=e.onChange;return c.a.createElement(ft.a,{id:"combo-box-demo",options:s,getOptionLabel:function(e){var t;return null!==(t=e.name)&&void 0!==t?t:""},style:{width:300},onChange:function(e,n){return t(n.productId)},renderInput:function(e){return c.a.createElement(St.a,Object.assign({},e,{label:"Products",variant:"outlined"}))}})}}),p.productId&&c.a.createElement("p",{style:{fontSize:"14px",color:"red",textAlign:"left"}},"Product is required")),c.a.createElement(S.a,{item:!0,xs:3,alignItems:"flex-end"},c.a.createElement(_.a,{onClick:function(){return o.push("/producer/product/0")},variant:"outlined",size:"small",style:{bottom:"-30%"}},"Or create one")),c.a.createElement(Nt,null),T>0&&c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(fe,{textDict:O,color:"textSecondary"})),c.a.createElement(Nt,null),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(jt,{isFullWidth:!0,control:f,errors:p,name:Ut.discountedPrice,label:"Discounted Price",errorMessage:"Discounted Price is required",rules:{required:!0,min:1},adornment:"$"})),c.a.createElement(Nt,null),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(jt,{isFullWidth:!0,control:f,errors:p,name:Ut.minOrderQnty,label:"Minimum order quantity",errorMessage:"Minimum order quantity is required",rules:{required:!0,min:1}})),c.a.createElement(Nt,null),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(jt,{isFullWidth:!0,control:f,errors:p,name:Ut.deliveryCharge,label:"Delivery Charge",errorMessage:"Delivery Charge is required",rules:{required:!0,min:1},adornment:"$"})),c.a.createElement(Nt,null),c.a.createElement(S.a,{item:!0,xs:2},c.a.createElement(It,{label:"Expiry Date",name:Ut.expiryDate,control:f,errors:p,rules:{required:!0},errorMessage:"Expiry Date is required"})),c.a.createElement(Nt,null),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement(_.a,{variant:"contained",color:"primary",type:"submit"},"Submit")),c.a.createElement(Nt,null))))}function Nt(){return c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement("br",null))}function wt(){var e,t;document.title="Product Form";var n=Object(l.c)(),i=(Object(x.f)(),Object(x.g)()),o=parseInt(i.productId),u=0===o?"CREATE":"UPDATE",p=null!==(e=Object(l.d)((function(e){return e.productReducer.product})))&&void 0!==e?e:new dt;Object(r.useEffect)((function(){if("UPDATE"===u){var e=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.GET_PRODUCT_REQUEST,message:"Getting products of producer ..."}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/products/"+e,{headers:v.getAuthHeader()});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,console.log("In productThunk",c),n({type:a.GET_PRODUCT_RECEIVED,product:c,message:r.statusText,httpMessage:a.HTTP_READ_SUCCESS}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}()}(o);n(e)}}),[o]);var h=Object(Ee.b)(),f=h.errors,S=h.handleSubmit,C=h.control,T=(h.getValues,h.reset),g=h.setValue;Object(r.useEffect)((function(){"UPDATE"===u&&(g(xt.productId,p.productId),g(xt.name,p.name),g(xt.category,p.category),g(xt.description,p.description),g(xt.originalPrice,p.originalPrice))}),[JSON.stringify(p)]);var O=Object(r.useState)(!1),D=Object(s.a)(O,2),R=D[0],b=D[1],I=null!==(t=Object(l.d)((function(e){return e.productReducer.httpMessage})))&&void 0!==t?t:"";return Object(r.useEffect)((function(){(I.includes(a.HTTP_CREATE_SUCCESS)||I.includes(a.HTTP_UPDATE_SUCCESS))&&b(!0)}),[I]),c.a.createElement(z.a,{maxWidth:"md"},c.a.createElement("form",{onSubmit:S((function(e){var t=e.productId,r=function(e,t,n,a,r){var c=new dt;return c.productId=e>0?e:0,c.name=t,c.category=n,c.description=a,c.originalPrice=r,c.producerId=2,c}(t,e.name,e.category,e.description,e.originalPrice);if(console.log("submitting product",r),"CREATE"===u){var c=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c,i;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.GET_PRODUCTS_REQUEST,message:"Creating product ..."}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/products/",{method:"POST",headers:v.getAuthHeader(),body:JSON.stringify(e)});case 4:if((r=t.sent).ok){t.next=11;break}return t.next=8,r.json();case 8:throw c=t.sent,console.log("apiError in createProductAsync",c),c;case 11:return t.next=13,r.json();case 13:i=t.sent,n({type:a.GET_PRODUCTS_RECEIVED,product:i,message:r.statusText,httpMessage:a.HTTP_CREATE_SUCCESS}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}()}(r);n(c),T({})}else if("UPDATE"===u){r.producerId=p.producerId;var i=function(e,t){return function(){var n=Object(E.a)(d.a.mark((function n(r){var c,i;return d.a.wrap((function(n){for(;;)switch(n.prev=n.next){case 0:return r({type:a.UPDATE_PRODUCT_REQUEST,message:"Updating product ..."}),n.prev=1,n.next=4,fetch("https://localhost:44397/api/products/"+e,{method:"PUT",headers:v.getAuthHeader(),body:JSON.stringify(t)});case 4:if((c=n.sent).ok){n.next=10;break}return n.next=8,c.json();case 8:throw n.sent;case 10:return n.next=12,c.json();case 12:i=n.sent,console.log("updatedProduct",i),r({type:a.GET_PRODUCTS_RECEIVED,product:i,message:c.statusText,httpMessage:a.HTTP_UPDATE_SUCCESS}),n.next=20;break;case 17:n.prev=17,n.t0=n.catch(1),r(m(a.ERROR,n.t0));case 20:case"end":return n.stop()}}),n,null,[[1,17]])})));return function(e){return n.apply(this,arguments)}}()}(t,r);n(i)}}))},c.a.createElement(Mt,{display:"none",component:c.a.createElement(jt,{isFullWidth:!0,control:C,errors:f,name:xt.productId,label:"Product Id",rules:{required:!1}})}),c.a.createElement(Mt,{component:c.a.createElement(jt,{isFullWidth:!0,control:C,errors:f,name:xt.name,label:"Name",rules:{required:!0},errorMessage:"Name is required"})}),c.a.createElement(Mt,{component:c.a.createElement(jt,{isFullWidth:!0,control:C,errors:f,name:xt.originalPrice,label:"Original Price",rules:{required:!0,min:1},adornment:"$",errorMessage:"Original Price is required"})}),c.a.createElement(Mt,{component:c.a.createElement(jt,{isFullWidth:!0,control:C,errors:f,name:xt.category,label:"Category",rules:{required:!1}})}),c.a.createElement(Mt,{component:c.a.createElement(jt,{isFullWidth:!0,control:C,errors:f,name:xt.description,label:"Description",rules:{required:!1}})}),c.a.createElement(_.a,{variant:"contained",color:"primary",type:"submit"},"Submit")),c.a.createElement(ie,{open:R,setOpen:b,severity:"success",message:u+" is successful!"}))}function Mt(e){var t=e.component,n=e.display,a=void 0===n?"initial":n;return c.a.createElement("div",null,c.a.createElement(S.a,{item:!0,xs:12,style:{display:a}},t),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement("br",null)))}!function(e){e.productId="productId",e.discountedPrice="discountedPrice",e.minOrderQnty="minOrderQnty",e.deliveryCharge="deliveryCharge",e.expiryDate="expiryDate"}(Ut||(Ut={})),function(e){e.productId="productId",e.name="name",e.category="category",e.description="description",e.originalPrice="originalPrice"}(xt||(xt={}));n(506);var kt=function e(){Object(p.a)(this,e),this.name=void 0,this.originalPrice=void 0,this.category=void 0,this.description=void 0,this.update=void 0,this.delete=void 0};function Ht(){var e;document.title="Products";var t=Object(l.c)(),n=Object(x.f)(),i=null!==(e=Object(l.d)((function(e){return e.productReducer.products})))&&void 0!==e?e:[];Object(r.useEffect)((function(){var e=Ot(2);t(e)}),[]);var o=Object.keys(new kt),u=[],p=Object(r.useState)(!1),h=Object(s.a)(p,2),f=h[0],C=h[1],T=Object(r.useState)(new dt),g=Object(s.a)(T,2),O=g[0],D=g[1],R=Object(l.d)((function(e){return e.productReducer.httpMessage}));Object(r.useEffect)((function(){if(R.includes(a.HTTP_DELETE_SUCCESS)){console.log("in productsPage",R);var e=Ot(2);t(e)}}),[R]);for(var b=function(e){var t=i[e],a=function(e){var t=new kt;return t.name=e.name,t.originalPrice="$"+e.originalPrice,t.category=e.category,t.description=e.description,t}(t),r=t.discountSchemes.length>0,o=r?"Cannot delete product as it has dependent discount schemes":"";a.update=c.a.createElement(_.a,{size:"small",variant:"outlined",onClick:function(){return n.push("/producer/product/"+t.productId)}},"Update"),a.delete=c.a.createElement("div",{className:"tooltip__div-visible"},c.a.createElement(_.a,{color:"secondary",size:"small",variant:"outlined",disabled:r,onClick:function(){C(!0),D(t)}},"Delete",c.a.createElement("span",{className:"tooltiptext"},o))),u.push(a)},I=0;I<i.length;I++)b(I);return c.a.createElement(z.a,null,c.a.createElement(S.a,{container:!0},c.a.createElement(S.a,{item:!0,xs:10}),c.a.createElement(S.a,{item:!0,xs:2},c.a.createElement(_.a,{variant:"contained",onClick:function(){return n.push("/producer/product/0")},color:"primary"},"Create Product"))),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement("br",null)),c.a.createElement(Ze,{columnNames:["Name","Original Price","Category","Description","Update","Delete"],accessors:o,data:u,title:"Products",enablePaging:!0,pageSize:5}),c.a.createElement(vt,{open:f,toggleOpen:function(){return C(!f)},content:c.a.createElement("p",null,"Confirm Delete?"),secondaryAction:function(){if(console.log("productId",O.productId),!(O.discountSchemes.length>0)){var e,n=(e=O.productId,function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.DELETE_PRODUCT_REQUEST,message:"Deleting product ..."}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/products/"+e,{method:"DELETE",headers:v.getAuthHeader()});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:c=t.sent,console.log("deletedProduct",c),n({type:a.DELETE_PRODUCT_RECEIVED,product:c,message:r.statusText,httpMessage:a.HTTP_DELETE_SUCCESS}),t.next=20;break;case 17:t.prev=17,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 20:case"end":return t.stop()}}),t,null,[[1,17]])})));return function(e){return t.apply(this,arguments)}}());t(n),C(!1)}},secondaryActionTitle:"Delete Product"}))}var Lt,Gt=function e(){Object(p.a)(this,e),this.userName="",this.passwordHash=""};function Qt(){var e;document.title="Login";var t=Object(l.c)(),n=Object(x.f)(),i=Object(r.useState)(!1),o=Object(s.a)(i,2),u=o[0],p=o[1],h=new q;h.isAuthenticated="UNTOUCHED";var v=null!==(e=Object(l.d)((function(e){return e.authReducer.authVM})))&&void 0!==e?e:h;Object(r.useEffect)((function(){"UNTOUCHED"!==v.isAuthenticated&&(v.isAuthenticated?n.push(""):p(!0))}),[v.isAuthenticated]);var f=Object(Ee.b)(),S=f.errors,C=f.handleSubmit,T=f.control;return c.a.createElement(z.a,null,c.a.createElement("form",{onSubmit:C((function(e){console.log(e);var n=new Gt;n.userName=e.userName,n.passwordHash=e.passwordHash;var r=function(e){return function(){var t=Object(E.a)(d.a.mark((function t(n){var r,c;return d.a.wrap((function(t){for(;;)switch(t.prev=t.next){case 0:return n({type:a.LOGIN_REQUEST,message:"Attempting login..."}),t.prev=1,t.next=4,fetch("https://localhost:44397/api/auth/signIn",{method:"POST",headers:{"Content-Type":"application/json"},body:JSON.stringify(e)});case 4:if((r=t.sent).ok){t.next=10;break}return t.next=8,r.json();case 8:throw t.sent;case 10:return t.next=12,r.json();case 12:if(c=t.sent,console.log("IAuthVM",c),!1!==c.isAuthenticated){t.next=18;break}return c.userName="ACCOUNT",n({type:a.LOGIN_FAILED,authVM:c,message:r.statusText,httpMessage:a.HTTP_UPDATE_SUCCESS}),t.abrupt("return");case 18:n({type:a.LOGIN_SUCCESS,authVM:c,message:r.statusText,httpMessage:a.HTTP_UPDATE_SUCCESS}),t.next=24;break;case 21:t.prev=21,t.t0=t.catch(1),n(m(a.ERROR,t.t0));case 24:case"end":return t.stop()}}),t,null,[[1,21]])})));return function(e){return t.apply(this,arguments)}}()}(n);t(r)}))},c.a.createElement(Vt,{component:c.a.createElement(jt,{isFullWidth:!0,control:T,errors:S,name:Lt.userName,label:"UserName",variant:"outlined",rules:{required:!0},errorMessage:"Name is required"})}),c.a.createElement(Vt,{component:c.a.createElement(jt,{isFullWidth:!0,control:T,errors:S,name:Lt.passwordHash,label:"Password",variant:"outlined",type:"password",rules:{required:!0},errorMessage:"Password is required"})}),c.a.createElement(_.a,{variant:"contained",color:"primary",type:"submit"},"Submit")),c.a.createElement(ie,{open:u,setOpen:p,message:"Authentication failed",severity:"error"}))}function Vt(e){var t=e.component;e.display;return c.a.createElement("div",null,c.a.createElement(S.a,{item:!0,xs:12},t),c.a.createElement(S.a,{item:!0,xs:12},c.a.createElement("br",null)))}function Bt(){return c.a.createElement(z.a,null,c.a.createElement("h2",null,"An error occured"))}function qt(e){var t=e.component,n=e.path,a=e.requiredClaims,i=void 0===a?[]:a,o=new q;localStorage.getItem("authVM")&&(o=JSON.parse(localStorage.getItem("authVM")));var l=!0===o.isAuthenticated,u=o.claims,d=Object(x.f)();l||(console.log("not authenticated"),d.push("/login"));var E=Object(r.useState)(!1),m=Object(s.a)(E,2),p=m[0],h=m[1],v=i.every((function(e){return u.includes(e)})),f=c.a.createElement(r.Fragment,null,c.a.createElement("span",null,"Not Authorized "),c.a.createElement(H.b,{to:"/login",style:{color:"white"}},c.a.createElement("b",null,"Click here to login")));return Object(r.useEffect)((function(){if(!v)return console.log("not authorized"),void h(!0)}),[v]),c.a.createElement(r.Fragment,null,v?c.a.createElement(x.a,{path:n,component:t}):c.a.createElement(Bt,null),c.a.createElement(ie,{open:p,setOpen:h,message:f,severity:"warning",autoHideDuration:1e4}))}!function(e){e.userName="userName",e.passwordHash="passwordHash"}(Lt||(Lt={}));var Ft=function(){return c.a.createElement("div",{className:"App"},c.a.createElement(H.a,null,c.a.createElement(F,null),c.a.createElement(x.c,null,c.a.createElement(x.a,{path:"/login",component:Qt}),c.a.createElement(x.a,{exact:!0,path:"/",component:w}),c.a.createElement(qt,{path:"/discountScheme/:discountSchemeId",component:Ce,requiredClaims:[M.CONSUMER]}),c.a.createElement(qt,{path:"/cart",component:ot,requiredClaims:[M.CONSUMER]}),c.a.createElement(qt,{path:"/orders",component:lt,requiredClaims:[M.CONSUMER]}),c.a.createElement(qt,{path:"/producer/products",component:Ht,requiredClaims:[M.PRODUCER]}),c.a.createElement(qt,{path:"/producer/product/:productId",component:wt,requiredClaims:[M.PRODUCER]}),c.a.createElement(qt,{path:"/producer/discountSchemes/create",component:At,requiredClaims:[M.PRODUCER]}),c.a.createElement(qt,{path:"/producer/discountSchemes",component:Tt,requiredClaims:[M.PRODUCER]}))))};Boolean("localhost"===window.location.hostname||"[::1]"===window.location.hostname||window.location.hostname.match(/^127(?:\.(?:25[0-5]|2[0-4][0-9]|[01]?[0-9][0-9]?)){3}$/));var Wt=n(79),$t=n(417),zt={type:"",discountSchemes:null};var Jt={type:"",bid:void 0,bids:void 0,message:"Initial Message",httpMessage:"Initial Response Message"};var Kt={type:"",product:void 0,products:void 0,message:"",httpMessage:""};var Xt={type:"",error:null};var Yt={type:"",identityUser:void 0,message:"Initial Message",httpMessage:"Initial Response Message",authVM:void 0};var Zt=Object(Wt.c)({discountSchemeReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:zt,t=arguments.length>1?arguments[1]:void 0,n=Object(ct.cloneDeep)(e);switch(n.type=t.type,n.message="".concat(t.message," ").concat(new Date),n.httpMessage="".concat(t.httpMessage," ").concat(new Date),console.log("in discountSchemeReducer",n.httpMessage),t.type){case a.GET_DISCOUNTSCHEMES_REQUEST:return console.log(t.message),n;case a.GET_DISCOUNTSCHEMES_RECEIVED:console.log("GET_DISCOUNTSCHEMES_RECEIVED");var r=t.discountSchemes;return n.discountSchemes=r,n;case a.GET_DISCOUNTSCHEME_REQUEST:return console.log(t.message),n;case a.GET_DISCOUNTSCHEME_RECEIVED:console.log("ACTIONS.GET_DISCOUNTSCHEME_RECEIVED");var c=t.discountScheme;return n.discountScheme=c,n;case a.GET_DISCOUNTSCHEME_OF_PRODUCER_REQUEST:return console.log(t.message),n;case a.GET_DISCOUNTSCHEME_OF_PRODUCER_RECEIVED:return console.log(t.discountSchemes),n.discountSchemes=t.discountSchemes,n;case a.CREATE_DISCOUNTSCHEME_REQUEST:return console.log(t.message),n;case a.CREATE_DISCOUNTSCHEME_RECEIVED:return n.discountScheme=t.discountScheme,n;case a.DELETE_DISCOUNTSCHEME_REQUEST:return n;case a.DELETE_DISCOUNTSCHEME_RECEIVED:return n.discountScheme=t.discountScheme,n;default:return e}},bidReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Jt,t=arguments.length>1?arguments[1]:void 0,n=Object(ct.cloneDeep)(e);switch(n.type=t.type,n.message="".concat(t.message," ").concat(new Date),n.httpMessage="".concat(t.httpMessage," + ").concat(new Date),t.type){case a.ADD_BID_TO_CART_REQUEST:return n;case a.ADD_BID_TO_CART_RECEIVED:return n.bid=t.bid,n;case a.GET_BIDSOFCUSTOMER_INCART_REQUEST:return n;case a.GET_BIDSOFCUSTOMER_INCART_RECEIVED:return n.bids=t.bids,console.log(n.bids),n;case a.ADD_BID_TO_CART_REQUEST:case a.UPDATE_BID_IN_CART_REQUEST:case a.UPDATE_BID_IN_CART_RECEIVED:case a.DELETE_BID_IN_CART_REQUEST:case a.DELETE_BID_IN_CART_RECEIVED:case a.ORDER_BIDS_IN_CART_REQUEST:case a.ORDER_BIDS_IN_CART_RECEIVED:case a.GET_PENDING_OR_SUCCESSFUL_BIDS_REQUEST:return n;case a.GET_PENDING_OR_SUCCESSFUL_BIDS_RECEIVED:return n.bids=t.bids,n;default:return e}},productReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Kt,t=arguments.length>1?arguments[1]:void 0,n=Object(ct.cloneDeep)(e);switch(n.type=t.type,n.message="".concat(t.message," ").concat(new Date),n.httpMessage="".concat(t.httpMessage," + ").concat(new Date),console.log("in productReducer. Latest message",n.message),console.log("in productReducer. Latest api message",n.httpMessage),t.type){case a.GET_PRODUCTS_REQUEST:return n;case a.GET_PRODUCTS_RECEIVED:return n.products=t.products,n;case a.CREATE_PRODUCT_REQUEST:return n;case a.CREATE_PRODUCT_RECEIVED:return n.product=t.product,n;case a.GET_PRODUCT_REQUEST:return n;case a.GET_PRODUCT_RECEIVED:return n.product=t.product,n;case a.UPDATE_PRODUCT_RECEIVED:return n;case a.UPDATE_PRODUCT_REQUEST:return console.log("received updatedProduct",t.product),n.product=t.product,n;case a.DELETE_PRODUCT_REQUEST:return n;case a.DELETE_PRODUCT_RECEIVED:return n.product=t.product,n;default:return e}},authReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Yt,t=arguments.length>1?arguments[1]:void 0,n=Object(ct.cloneDeep)(e);switch(n.authVM=Object(ct.cloneDeep)(t.authVM),n.type=t.type,n.message="".concat(t.message," ").concat(new Date),n.httpMessage="".concat(t.httpMessage," + ").concat(new Date),t.type){case a.LOGIN_REQUEST:return n;case a.LOGIN_SUCCESS:return localStorage.setItem("authVM",JSON.stringify(t.authVM)),n;case a.LOGIN_FAILED:return n;case a.LOGOUT:return localStorage.removeItem("authVM"),n.message=a.LOGOUT_SUCCESS,n;default:return e}},errorReducer:function(){var e=arguments.length>0&&void 0!==arguments[0]?arguments[0]:Xt,t=arguments.length>1?arguments[1]:void 0,n=t.type,r=t.error;return n===a.CLEAR_ERROR?Xt:r?(console.log("error received in errorReducer:",r),{type:n,error:t.error}):e}}),en=Object(Wt.e)(Zt,Object(Wt.a)($t.a));o.a.render(c.a.createElement(l.a,{store:en},c.a.createElement(c.a.StrictMode,null,c.a.createElement(Ft,null))),document.getElementById("root")),"serviceWorker"in navigator&&navigator.serviceWorker.ready.then((function(e){e.unregister()})).catch((function(e){console.error(e.message)}))}},[[429,1,2]]]);
//# sourceMappingURL=main.92ab3c57.chunk.js.map